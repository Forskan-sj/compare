var egret = window.egret;var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);n.prototype=t.prototype,e.prototype=new n},ant_farm;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="AntFarmBayPanelView",n.isCreate=!1,n.landId=e,n.skinName="AntFarmBayPanelViewSkin",n}return __extends(n,t),n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType),this.initShowInfo()},n.prototype.init=function(){this.showList.itemRenderer=e.AntFarmBayPanelViewItem,this.showList.itemRendererSkinName="AntFarmBayPanelViewItemSkin",this.listArr=new eui.ArrayCollection,this.showList.dataProvider=this.listArr,this.isCreate=!0,this.initShowInfo()},n.prototype.initShowInfo=function(){if(this.isCreate){for(var e,t=this.landId,n=0,a=0,o=game.GameDatas.getIntance().getSomeOnePastureInfo(t),r=0,i=game.GameDatas.getIntance().mine_wokers_infos.mine_workers.length;i>r;r++)game.GameDatas.getIntance().mine_wokers_infos.mine_workers[r].pasture_id==t&&(e=game.GameDatas.getIntance().mine_wokers_infos.mine_workers[r]);var s=!1;this.listArr.removeAll();for(var l=!1,r=0,i=o.workers.length;i>r;r++){var m={workerinfo:null,isunlock:!1,iscurr:!1,worker_index:o.workers[r].worker_index};e&&r<e.unlock_workers_num?(m.isunlock=!0,n=o.workers[r].output):(m.isunlock=!1,s||(s=!0,m.iscurr=!0),l||(l=!0,a=o.workers[r].output)),m.workerinfo=o.workers[r],this.listArr.addItem(m)}this.currNum.text=commonUtils.NumberTool.getThreeTypeNumberStr(n)+"/天",this.nextNum.text=commonUtils.NumberTool.getThreeTypeNumberStr(a)+"/天"}},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),commonUtils.EventMananger.getIntance().addEvent(e.AntFarmEvent.OpenSomeOneWorker,this.openSomeOneWorker,this)},n.prototype.openSomeOneWorker=function(e,t){this.removeUsFromParent()},n.prototype.touchHandle=function(e){switch(e.target){case this.closeBtn:this.removeUsFromParent()}},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),commonUtils.EventMananger.getIntance().removeEvent(e.AntFarmEvent.OpenSomeOneWorker,this.openSomeOneWorker,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.AntFarmBayPanelView=t,__reflect(t.prototype,"ant_farm.AntFarmBayPanelView")}(ant_farm||(ant_farm={}));var ant_farm;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="AntFarmBayPanelViewItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEvent()},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(this.infoConfig=this.data,this.initShow())},t.prototype.initShow=function(){this.infoConfig.isunlock?(this.yesImg.visible=this.yesMask.visible=!0,this.numShow.visible=!1,this.iconImg.source="ant_farm_renwu"+this.infoConfig.worker_index+"_1_png"):(this.yesImg.visible=this.yesMask.visible=!1,this.numShow.visible=!0,this.numShow.text=commonUtils.NumberTool.getThreeTypeNumberStr(this.infoConfig.workerinfo.unlock_barley),this.infoConfig.iscurr?this.iconImg.source="ant_farm_renwu"+this.infoConfig.worker_index+"_2_png":this.iconImg.source="ant_farm_renwu"+this.infoConfig.worker_index+"_0_png"),this.sendbtn.visible=this.infoConfig.iscurr},t.prototype.addEvent=function(){this.sendbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},t.prototype.touchHandle=function(e){switch(e.target){case this.sendbtn:game.GameRequestMgr.getIntance().PastureWorker_unlockWorker_C(this.infoConfig.workerinfo.worker_id)}},t.prototype.removeEvent=function(){this.sendbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},t}(eui.ItemRenderer);e.AntFarmBayPanelViewItem=t,__reflect(t.prototype,"ant_farm.AntFarmBayPanelViewItem")}(ant_farm||(ant_farm={}));var ant_farm;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.width=e.height=500,e.skinName="AntFarmDaoYuComViewSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},n.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.workers_=this.data.workers,this.nameStr_=this.data.nameStr,this.landId=this.data.id,this.init())},n.prototype.init=function(){var e=this;if(e.landId<=game.GameDatas.getIntance().user_info.pasture_id){e.daoyuAll.visible=e.kuanggonggrp.visible=!0,e.unOpen.visible=e.lockImg.visible=!1;var t="game_mainView_changjing_"+e.nameStr_+"_island_";e.shan.source=t+"fengjing5_png",e.men.source=t+"jianzhu5_png",e.zhuo.source=t+"fang5_png",viewTools.RESTools.setImgRes(e.chao,"game_caifuhao_land_"+e.nameStr_+"_png")}else e.daoyuAll.visible=e.kuanggonggrp.visible=!1,e.unOpen.visible=e.lockImg.visible=!0,viewTools.RESTools.setImgRes(e.unOpen,"ant_farm_land_"+e.nameStr_+"_png")},n.prototype.initWorkers=function(){for(var t=this,n=0,a=0,o=game.GameDatas.getIntance().mine_wokers_infos.mine_workers.length;o>a&&game.GameDatas.getIntance().mine_wokers_infos;a++)game.GameDatas.getIntance().mine_wokers_infos.mine_workers[a].pasture_id==t.landId&&(n=game.GameDatas.getIntance().mine_wokers_infos.mine_workers[a].unlock_workers_num);for(var r=e.AntFarmWorkerFactory.getInstance().getFiveAntWorkerByConfig(n),i=0,s=r.length;s>i;i++)if(!(i<this.kuanggonggrp.numChildren))switch(i){case 0:r[i].x=180,r[i].y=70,t.kuanggonggrp.addChildAt(r[i],0),r[i].scaleX=r[i].scaleY=0,egret.Tween.get(r[i]).to({scaleX:1,scaleY:1},200,egret.Ease.bounceInOut);break;case 1:r[i].x=40,r[i].y=70,t.kuanggonggrp.addChildAt(r[i],0),r[i].scaleX=r[i].scaleY=0,egret.Tween.get(r[i]).to({scaleX:-1,scaleY:1},200,egret.Ease.bounceInOut);break;case 2:r[i].x=250,r[i].y=110,t.kuanggonggrp.addChildAt(r[i],10),r[i].scaleX=r[i].scaleY=0,egret.Tween.get(r[i]).to({scaleX:1,scaleY:1},200,egret.Ease.bounceInOut);break;case 3:r[i].x=110,r[i].y=110,t.kuanggonggrp.addChildAt(r[i],10),r[i].scaleX=r[i].scaleY=0,egret.Tween.get(r[i]).to({scaleX:-1,scaleY:1},200,egret.Ease.bounceInOut);break;case 4:r[i].x=320,r[i].y=70,t.kuanggonggrp.addChildAt(r[i],0),r[i].scaleX=r[i].scaleY=0,egret.Tween.get(r[i]).to({scaleX:1,scaleY:1},200,egret.Ease.bounceInOut)}},n.prototype.removeWorkers=function(){this.kuanggonggrp.removeChildren()},n.prototype.changeSelect=function(e){this.landId==e&&this.landId<game.GameDatas.getIntance().user_info.pasture_id?this.initWorkers():this.removeWorkers()},n.prototype.addEvent=function(){commonUtils.EventMananger.getIntance().addEvent(e.AntFarmEvent.ChangeLandSelect,this.changeSelect,this)},n.prototype.removeEvent=function(){},n.prototype.destroy=function(){},n}(eui.ItemRenderer);e.AntFarmDaoYuComView=t,__reflect(t.prototype,"ant_farm.AntFarmDaoYuComView")}(ant_farm||(ant_farm={}));var ant_farm;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.width=700,e.height=210,e.skinName="AntFarmFlyComViewSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.addEvent()},n.prototype.initShowFlyInfo=function(e,t,n,a){if(this.landId=a,e)for(var o=0,r=this.lvGrp.numChildren;r>o;o++){var i=this.headGrp.getChildAt(o);o<e.unlock_workers_num?(this.lvGrp.getChildAt(o).visible=!0,i.getChildAt(i.numChildren-1).visible=!0):(this.lvGrp.getChildAt(o).visible=!1,i.getChildAt(i.numChildren-1).visible=!1)}else for(var o=0,r=this.lvGrp.numChildren;r>o;o++){var i=this.headGrp.getChildAt(o);this.lvGrp.getChildAt(o).visible=!1,i.getChildAt(i.numChildren-1).visible=!1}this.currNum.text=commonUtils.NumberTool.getThreeTypeNumberStr(t)+"/天",this.totelNum.text=commonUtils.NumberTool.getThreeTypeNumberStr(n)+"/天"},n.prototype.addEvent=function(){egret.Tween.get(this.flyYe,{loop:!0}).to({scaleY:0},50).to({scaleY:1},50),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.touchHandle=function(t){switch(t.target){case this.addBtn:commonUtils.EventMananger.getIntance().sendEvent(commonUtils.GlobalEvent.ClickButton);var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("AntFarmBayPanelView");n&&(n.landId=this.landId),baseContent.PanelManager.getIntance().openTypeIntance(e.AntFarmBayPanelView,this.landId)}},n}(eui.Component);e.AntFarmFlyComView=t,__reflect(t.prototype,"ant_farm.AntFarmFlyComView")}(ant_farm||(ant_farm={}));var ant_farm;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="AntFarmView",e.isCreate=!1,e.isChangeSrcEnd=!0,e.skinName="AntFarmViewSkin",e}return __extends(n,t),n.prototype.enable=function(){var n=this;t.prototype.enable.call(this),egret.setTimeout(function(){n.enterOrExitFlyCom("enter"),n.enterOrExitGlodGrp(!0),n.setGlodGrpInfo(),commonUtils.EventMananger.getIntance().sendEvent(e.AntFarmEvent.ChangeLandSelect,1001+n.selectId),commonUtils.EventMananger.getIntance().sendEvent(game.GameEvent.CloseShowChaoPing,!1),commonUtils.EventMananger.getIntance().sendEvent(game.GameEvent.CloseShowMainViewExitTopGrp,!1,!0),commonUtils.EventMananger.getIntance().sendEvent(game.GameEvent.MiwuZheDangEvent,!1);var t=game.GameDatas.getIntance().mine_wokers_infos,a=game.GameDatas.getIntance().getSomeOnePastureInfo(game.GameDatas.getIntance().user_info.pasture_id);t.barley_pool>=a.max_barley_pool?commonUtils.EventMananger.getIntance().sendEvent(e.AntFarmEvent.ChangeWorkerStatus,"sleep"):commonUtils.EventMananger.getIntance().sendEvent(e.AntFarmEvent.ChangeWorkerStatus,"bacao")},this,750),this.rectImg.visible=!1,this.initLandsInfo()},n.prototype.init=function(){var t=this;t.flyCom=new e.AntFarmFlyComView,t.flyCom.y=270,t.flyCom.horizontalCenter=720,t.selectId=0,t.addChild(t.flyCom),t.isCreate=!0,t.landArr=new eui.ArrayCollection,t.landList.itemRenderer=e.AntFarmDaoYuComView,t.landList.itemRendererSkinName="AntFarmDaoYuComViewSkin",t.landList.dataProvider=t.landArr,t.initLandsInfo(),egret.setTimeout(function(){t.landScr.viewport.scrollH=-110},t,200),t.initYunDisply()},n.prototype.initYunDisply=function(){var e=this;e.yunDisply||(e.yunDisply=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("yun_animation","MovieClip","yun_animation"),e.addChild(e.yunDisply),e.yunDisply.name="yun_animation",e.yunDisply.x=commonUtils.StageUtils.getIntance().getStageWidth()/2,e.yunDisply.y=commonUtils.StageUtils.getIntance().getStageHeight()/2-150),e.yunDisply.visible=!1},n.prototype.playYunEnter=function(){this.yunDisply.visible=!0,this.yunDisply.animation.play("newAnimation",1)},n.prototype.initLandsInfo=function(){if(this.isCreate||!game.GameDatas.getIntance().mine_wokers_infos){this.landArr.removeAll();for(var e in game.GameDatas.getIntance().pasture_infos){for(var t={workers:null,nameStr:"",id:parseInt(e)},n=0,a=game.GameDatas.getIntance().mine_wokers_infos.mine_workers.length;a>n;n++)if(game.GameDatas.getIntance().pasture_infos[e].id<=game.GameDatas.getIntance().user_info.pasture_id){t.workers=game.GameDatas.getIntance().mine_wokers_infos.mine_workers[n];break}t.nameStr=game.GameDatas.getIntance().getSomeOneLandDataById(game.GameDatas.getIntance().pasture_infos[e].id).nameStr,this.landArr.addItem(t)}console.log("配置岛屿个数:"+this.landArr.length),this.landName.text=""+game.GameDatas.getIntance().getSomeOneLandDataById(1001+this.selectId).info}},n.prototype.enterOrExitFlyCom=function(t){if(this.isCreate&&game.GameDatas.getIntance().mine_wokers_infos){if(this.selectId+1001>=game.GameDatas.getIntance().user_info.pasture_id)return this.yunDisply.visible=!1,void egret.Tween.get(this.flyCom).to({horizontalCenter:720},500,egret.Ease.sineOut);if("currOut"==t)return this.flyCom.horizontalCenter=0,egret.Tween.get(this.flyCom).to({horizontalCenter:720},500,egret.Ease.sineOut),void this.playYunEnter();for(var n=!1,a=0,o=game.GameDatas.getIntance().mine_wokers_infos.mine_workers.length;o>a;a++)if(game.GameDatas.getIntance().mine_wokers_infos.mine_workers[a].pasture_id==this.selectId+1001&&5==game.GameDatas.getIntance().mine_wokers_infos.mine_workers[a].unlock_workers_num){n=!0;break}if(this.yunDisply.visible=!1,"enter"==t)if(n)console.log("全部开启了！--"),this.playYunEnter();else{this.initFlyComInfo(),this.flyCom.horizontalCenter=-720,egret.Tween.get(this.flyCom).to({horizontalCenter:0},500,egret.Ease.sineIn);var r=egret.localStorage.getItem("ant_farm_control");r||commonUtils.EventMananger.getIntance().sendEvent(e.AntFarmEvent.NewOneControl)}else n||(this.flyCom.horizontalCenter=0,egret.Tween.get(this.flyCom).to({horizontalCenter:720},500,egret.Ease.sineOut))}},n.prototype.setBarInfo=function(t,n){var a=Math.floor(Math.floor(t)/n*346+39);a=a>385?385:a,this.barImg.visible=!(0==t),this.sendbtn.enabled=t>n/10,this.glodImg.bottom=Math.floor(t/n*130+25),this.barNum.barInfo={currNum:t,totelNum:n},egret.Tween.get(this.barImg).to({width:a},300),this.barNum.text=commonUtils.NumberTool.getThreeTypeNumberStr(Math.floor(t)),385==a&&(commonUtils.EventMananger.getIntance().sendEvent(e.AntFarmEvent.ChangeWorkerStatus,"sleep"),this.keyUpGoldTimer&&egret.clearInterval(this.keyUpGoldTimer))},n.prototype.getBarInfo=function(){return this.barNum.barInfo},n.prototype.clearGlodGrp=function(){var t=this;t.keyUpGoldTimer&&egret.clearInterval(t.keyUpGoldTimer);var n=game.GameDatas.getIntance().mine_wokers_infos,a=n.total_output/24/60/60;t.keyUpGoldTimer=egret.setInterval(t.upGlod,t,1e3,a),commonUtils.EventMananger.getIntance().sendEvent(e.AntFarmEvent.ChangeWorkerStatus,"bacao");var o=game.GameDatas.getIntance().getSomeOnePastureInfo(game.GameDatas.getIntance().user_info.pasture_id);t.flySomeGlodToHead(t.getBarInfo().currNum,t.getBarInfo().totelNum),t.setBarInfo(0,o.max_barley_pool)},n.prototype.flySomeGlodToHead=function(e,t){for(var n=Math.floor(e/t*40),a=function(e){var t=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("goldzhuan_animation","Armature","goldzhuan_animation");t.name="gold_fly_animation";var n=o.glodImg.parent,a=n.getChildIndex(o.glodImg);n.addChildAt(t,a),t.x=commonUtils.StageUtils.getIntance().stage.stageWidth/2,t.y=commonUtils.StageUtils.getIntance().stage.stageHeight-100,t.scaleX=t.scaleY=1.3,egret.Tween.get(t).wait(20*e).to({x:45,y:50,scaleX:.7,scaleY:.7},500).call(function(){t.parent&&t.parent.removeChild(t),egret.Tween.removeTweens(t),t=null},t),t.animation.play("newAnimation")},o=this,r=0;n>r;r++)a(r)},n.prototype.openSomeOneWorker=function(t,n){console.log("开启某个矿工->"+t+";pasture_id->"+n);var a=this;commonUtils.EventMananger.getIntance().sendEvent(e.AntFarmEvent.ChangeLandSelect,1001+a.selectId),a.initFlyComInfo(),a.setGlodGrpInfo();for(var o,r=0,i=game.GameDatas.getIntance().mine_wokers_infos.mine_workers.length;i>r;r++)if(game.GameDatas.getIntance().mine_wokers_infos.mine_workers[r].pasture_id==1001+a.selectId){o=game.GameDatas.getIntance().mine_wokers_infos.mine_workers[r];break}o&&5==o.unlock_workers_num&&(console.log("全部开启了！"),egret.setTimeout(function(){a.enterOrExitFlyCom("currOut")},a,500))},n.prototype.setGlodGrpInfo=function(){var e=this;if(e.isCreate||!game.GameDatas.getIntance().mine_wokers_infos){var t=game.GameDatas.getIntance().mine_wokers_infos,n=game.GameDatas.getIntance().getSomeOnePastureInfo(game.GameDatas.getIntance().user_info.pasture_id);if(e.maxNum.text=n.max_barley_pool+"",e.speedNum.text=commonUtils.NumberTool.getThreeTypeNumberStr(t.total_output)+"/天",e.setBarInfo(t.barley_pool,n.max_barley_pool),!(t.barley_pool>=n.max_barley_pool)){e.keyUpGoldTimer&&egret.clearInterval(e.keyUpGoldTimer);var a=t.total_output/24/60/60;e.keyUpGoldTimer=egret.setInterval(e.upGlod,e,1e3,a)}}},n.prototype.upGlod=function(e){console.log("增加金币数->"+e);var t=this.barNum.barInfo;t.currNum+=e,t.currNum=t.currNum>=t.totelNum?t.totelNum:t.currNum,this.setBarInfo(t.currNum,t.totelNum)},n.prototype.initFlyComInfo=function(){for(var e,t=this,n=1001+t.selectId,a=0,o=0,r=game.GameDatas.getIntance().getSomeOnePastureInfo(n),i=0,s=game.GameDatas.getIntance().mine_wokers_infos.mine_workers.length;s>i;i++)game.GameDatas.getIntance().mine_wokers_infos.mine_workers[i].pasture_id==n&&(e=game.GameDatas.getIntance().mine_wokers_infos.mine_workers[i]);for(var l=!1,i=0,s=r.workers.length;s>i;i++){e&&i<e.unlock_workers_num?a=r.workers[i].output:l||(l=!0,o=r.workers[i].output)}t.flyCom.initShowFlyInfo(e,a,o,1001+t.selectId)},n.prototype.productSomeGlodToFly=function(){var t=this;t.glodTimer&&egret.clearInterval(t.glodTimer),t.glodTimer=egret.setInterval(function(){new Promise(function(){if(!t.glodArr){t.glodArr=new Queue;for(var n=0;5>n;n++){var a=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("goldzhuan_animation","Armature","goldzhuan_animation");a.name="goldzhuan_animation",t.glodArr.put(a)}}for(var o=e.AntFarmWorkerFactory.getInstance().getFiveAntWorkerByConfig(5),n=0,r=o.length;r>n;n++){var i=o[n],a=t.glodArr.pull();i.parent&&"bacao"==i.Statues&&(a||(a=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("goldzhuan_animation","Armature","goldzhuan_animation"),a.name="goldzhuan_animation"),t.addOneGlodToFly(i,a,n))}})},t,5e3)},n.prototype.addOneGlodToFly=function(e,t,n){var a=this,o=new egret.Point;o=e.parent.localToGlobal(e.x,e.y,o);var r=this.glodImg.parent,i=r.getChildIndex(this.glodImg);r.addChildAt(t,i),t.x=o.x,t.y=o.y,t.animation.play("newAnimation");var s=new egret.Point;s.x=(commonUtils.StageUtils.getIntance().stage.stageWidth-200)*Math.random()+100,s.y=commonUtils.StageUtils.getIntance().stage.stageHeight-100,t.scaleX=t.scaleY=0,egret.Tween.get(t).to({scaleX:1,scaleY:1,y:o.y-150},150).wait(1600+100*n).to({scaleX:1.2,scaleY:1.2,x:s.x,y:s.y},500).call(function(){t.parent&&(t.parent.removeChild(t),a.glodArr.put(t),t.animation.stop())},this)},n.prototype.enterOrExitGlodGrp=function(e){var t=this;t.isCreate&&(e?(t.glodGrp.bottom=-240,egret.Tween.get(t.glodGrp).to({bottom:0},300,egret.Ease.sineIn)):(t.glodGrp.bottom=0,egret.Tween.get(t.glodGrp).to({bottom:-240},300,egret.Ease.sineOut)))},n.prototype.addEvent=function(){var t=this;t.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHandle,t),t.sendbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHandle,t),t.landScr.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.touchScr,t),t.landScr.addEventListener(egret.TouchEvent.TOUCH_MOVE,t.touchScr,t),t.landScr.addEventListener(egret.TouchEvent.TOUCH_END,t.touchScr,t),t.landScr.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.touchScr,t),commonUtils.EventMananger.getIntance().addEvent(e.AntFarmEvent.GetGlodGrpGoldSecc,t.clearGlodGrp,t),commonUtils.EventMananger.getIntance().addEvent(e.AntFarmEvent.OpenSomeOneWorker,t.openSomeOneWorker,t),commonUtils.EventMananger.getIntance().addEvent(e.AntFarmEvent.ChangeLandSelect,t.productSomeGlodToFly,t),commonUtils.EventMananger.getIntance().addEvent(e.AntFarmEvent.ChangeWorkerStatus,t.productSomeGlodToFly,t)},n.prototype.changeLandScrLeftOrRight=function(t){var n=this;if(n.isChangeSrcEnd){n.isChangeSrcEnd=!1;var a=n.selectId;"left"==t?(a-=1,0>=a&&(a=0)):(a+=1,a>=n.landArr.length-1&&(a=n.landArr.length-1)),console.log(t+"-->"+a+"||"+n.selectId),a!=n.selectId?(n.enterOrExitFlyCom("out"),n.selectId=a,egret.Tween.get(n.landList).to({scrollH:-110+540*a},300).call(function(){n.enterOrExitFlyCom("enter"),n.landName.text=""+game.GameDatas.getIntance().getSomeOneLandDataById(1001+n.selectId).info},n).wait(100).call(function(){n.isChangeSrcEnd=!0,commonUtils.EventMananger.getIntance().sendEvent(e.AntFarmEvent.ChangeLandSelect,1001+n.selectId)},n)):n.isChangeSrcEnd=!0}},n.prototype.touchScr=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:this.touchX=e.stageX;break;case egret.TouchEvent.TOUCH_MOVE:this.touchX&&(e.stageX-this.touchX>0?this.changeLandScrLeftOrRight("left"):this.changeLandScrLeftOrRight("right"),this.touchX=null);break;case egret.TouchEvent.TOUCH_END:case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:this.touchX=null}},n.prototype.touchHandle=function(e){var t=this;switch(e.target){case this.backBtn:this.enterOrExitFlyCom("out"),this.enterOrExitGlodGrp(!1),commonUtils.EventMananger.getIntance().sendEvent(game.GameEvent.MiwuZheDangEvent,!0),egret.setTimeout(function(){commonUtils.EventMananger.getIntance().sendEvent(game.GameEvent.CloseShowChaoPing,!0),commonUtils.EventMananger.getIntance().sendEvent(game.GameEvent.CloseShowMainViewExitTopGrp,!0,!0),commonUtils.EventMananger.getIntance().sendEvent(game.GameEvent.MiwuZheDangEvent,!1),t.removeUsFromParent(),t.keyUpGoldTimer&&egret.clearInterval(t.keyUpGoldTimer)},this,750);break;case this.sendbtn:game.GameRequestMgr.getIntance().PastureWorker_collectBarley_C()}},n.prototype.removeEvent=function(){var t=this;t.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHandle,t),t.sendbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHandle,t),t.landScr.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,t.touchScr,t),t.landScr.removeEventListener(egret.TouchEvent.TOUCH_MOVE,t.touchScr,t),t.landScr.removeEventListener(egret.TouchEvent.TOUCH_END,t.touchScr,t),t.landScr.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,t.touchScr,t),commonUtils.EventMananger.getIntance().removeEvent(e.AntFarmEvent.GetGlodGrpGoldSecc,t.clearGlodGrp,t),commonUtils.EventMananger.getIntance().removeEvent(e.AntFarmEvent.OpenSomeOneWorker,t.openSomeOneWorker,t),commonUtils.EventMananger.getIntance().removeEvent(e.AntFarmEvent.ChangeLandSelect,t.productSomeGlodToFly,t),commonUtils.EventMananger.getIntance().removeEvent(e.AntFarmEvent.ChangeWorkerStatus,t.productSomeGlodToFly,t)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.AntFarmView=t,__reflect(t.prototype,"ant_farm.AntFarmView")}(ant_farm||(ant_farm={}));var ant_farm;!function(e){var t=function(){function e(){}return e}();e.WorkerInfo=t,__reflect(t.prototype,"ant_farm.WorkerInfo");var n=function(){function e(){}return e}();e.MineWorkerInfo=n,__reflect(n.prototype,"ant_farm.MineWorkerInfo")}(ant_farm||(ant_farm={}));var ant_farm;!function(e){var t=function(){function e(){}return e.OpenSomeOneWorker="OpenSomeOneWorker",e.GetGlodGrpGoldSecc="GetGlodGrpGoldSecc",e.ChangeWorkerStatus="ChangeWorkerStatus",e.ChangeLandSelect="ChangeLandSelect",e.NewOneControl="NewOneControl",e}();e.AntFarmEvent=t,__reflect(t.prototype,"ant_farm.AntFarmEvent")}(ant_farm||(ant_farm={}));var ant_farm;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.statues="sleep",n.worker_index=e,n.init(),n.addEvent(),n}return __extends(n,t),Object.defineProperty(n.prototype,"Statues",{get:function(){return this.statues},set:function(e){this.statues=e},enumerable:!0,configurable:!0}),n.prototype.init=function(){var e=this;if(!e.displayDro){e.displayDro=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("bacao"+(e.worker_index+1)+"_animation","MovieClip","bacao"+(e.worker_index+1)+"_animation"),e.addChild(e.displayDro),e.displayDro.name="worker_"+e.worker_index,e.displayDro.addEventListener(egret.Event.COMPLETE,e.playEnd,e);var t=game.GameDatas.getIntance().mine_wokers_infos,n=game.GameDatas.getIntance().getSomeOnePastureInfo(game.GameDatas.getIntance().user_info.pasture_id);t.barley_pool>=n.max_barley_pool?e.displayDro.animation.play("sleep",1):e.displayDro.animation.play("bacao",1)}},n.prototype.addEvent=function(){commonUtils.EventMananger.getIntance().addEvent(e.AntFarmEvent.ChangeWorkerStatus,this.changeStates,this)},n.prototype.playEnd=function(){"sleep"==this.statues?this.displayDro.animation.play("sleep",1):this.displayDro.animation.play("bacao",1)},n.prototype.changeStates=function(e){this.statues=e},n}(egret.Sprite);e.AntFarmWorker=t,__reflect(t.prototype,"ant_farm.AntFarmWorker")}(ant_farm||(ant_farm={}));var ant_farm;!function(e){var t=function(){function t(){this.initFiveWorkers()}return t.getInstance=function(){return t.instance_||(t.instance_=new t),t.instance_},t.prototype.initFiveWorkers=function(){this.workers=[],this.workers.push(new e.AntFarmWorker(0)),this.workers.push(new e.AntFarmWorker(4)),this.workers.push(new e.AntFarmWorker(3)),this.workers.push(new e.AntFarmWorker(2)),this.workers.push(new e.AntFarmWorker(1))},t.prototype.getFiveAntWorkerByConfig=function(e){return this.workers.slice(0,e)},t}();e.AntFarmWorkerFactory=t,__reflect(t.prototype,"ant_farm.AntFarmWorkerFactory")}(ant_farm||(ant_farm={}));;window.ant_farm = ant_farm