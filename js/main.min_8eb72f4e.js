var egret=window.egret,__reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__awaiter=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))(function(i,o){function s(e){try{c(a.next(e))}catch(t){o(t)}}function r(e){try{c(a["throw"](e))}catch(t){o(t)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,r)}c((a=a.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return a([e,t])}}function a(n){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return c.label++,{value:n[1],done:!1};case 5:c.label++,o=n[1],n=[0];continue;case 7:n=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){c=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){c.label=n[1];break}if(6===n[0]&&c.label<s[1]){c.label=s[1],s=n;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(n);break}s[2]&&c.ops.pop(),c.trys.pop();continue}n=t.call(e,c)}catch(a){n=[6,a],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,r,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return r={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);n.prototype=t.prototype,e.prototype=new n},game;!function(e){var t=function(){function t(){this.isAutoRand=!1,this.notice_datas=[],this._tempIconsList=[],this._addIconList=[],this._is_new_user=0,this.loadResComplet=!1,this.currentMult=1,this.showAttackOrStolenNum=0,this.selectIndex=-1,this._redSpotInfo||(this._redSpotInfo=new e.RedSpotData),this.giftDataQueue=new Queue;var t=localStorage.getItem("stepUserHeadUrl");t?this.stepUserHeadUrl=t:(this.stepUserHeadUrl=romoteUrlHead+"/game/test_head/test_head_"+Math.floor(100*Math.random()+1)+".png",localStorage.setItem("stepUserHeadUrl",this.stepUserHeadUrl))}return t.getIntance=function(){return t.instance_||(t.instance_=new t),t.instance_},t.prototype.initData=function(){this.pasture_grpName=RES.getRes("landConfigInfo_json").data},t.prototype.getSomeOneLandDataById=function(e){return this.pasture_grpName[e]?this.pasture_grpName[e]:this.pasture_grpName[1001]},t.prototype.giftShowSomeData=function(t,n){if(void 0===n&&(n=!0),t){for(var a=0,i=t.length;i>a;a++)e.GameDatas.getIntance().giftDataQueue.put({showType:e.GiftShwoType.gitType,data:{type:t[a].type,num:t[a].num},nextEventStr:null,eventData:null});n&&t.length>0&&this.openGiftShow()}},t.prototype.openGiftShow=function(){var t=e.GameDatas.getIntance().giftDataQueue.pull();if(t)switch(t.showType){case e.GiftShwoType.sharType:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelFengxiangjinbi,t.data);break;default:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelGiftView,t)}},t.prototype.noticeDatasPush=function(e,t){void 0===t&&(t=!0);for(var n=0,a=e.length;a>n;n++)this.notice_datas.push(e[n]);t&&this.notice_datas.length>0&&this.noticeOpen()},t.prototype.getNoticeDatasLength=function(){return this.notice_datas.length},t.prototype.noticeOpen=function(){if(this.notice_datas.length>0){var t=this.notice_datas.shift();baseContent.PanelManager.getIntance().openTypeIntance(e.PanelYouXiGongGao,t)}},Object.defineProperty(t.prototype,"redSpotInfo",{get:function(){return this._redSpotInfo},set:function(e){for(var t in e)this._redSpotInfo[""+t]=e[""+t]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"user_info",{get:function(){return this._user_info},set:function(t){this._user_info=t,t.in_battle_pet_id&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.goToBattlSucc,t.in_battle_pet_id),this.checkIsCanBuild(),this.checkIsCanRand(),this.checkIsCanBuyOneWorker()},enumerable:!0,configurable:!0}),t.prototype.setIconListInfo=function(e,t){if(void 0===t&&(t=!1),t){for(var n=0,a=e.length;a>n;n++){for(var i=!0,o=0,s=this._tempIconsList.length;s>o;o++)if(this._tempIconsList[o]==e[n]){i=!1;break}i&&this._addIconList.push(e[n])}this.openOneNewFaclity()}else this._tempIconsList=e},t.prototype.openOneNewFaclity=function(){if(this._addIconList&&this._addIconList.length>0){var n=this._addIconList.shift();baseContent.SceneLayerMgr.getIntance().getCurrenScene().ShowOneIconAdd(n)}else t.getIntance().user_info.in_battle_pet_id>0&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.gamePetConstrolEvent,game_pet.GamePetStepType.haveOneEgg)},t.prototype.getIconIdByIconName=function(e){if(this.iconList)for(var t=0,n=this.iconList.length;n>t;t++)if(this.iconList[t].icon_name<=e)return this.iconList[t].icon_id;return null},t.prototype.getIconNameByIconId=function(e){if(this.iconList)for(var t=0,n=this.iconList.length;n>t;t++)if(this.iconList[t].icon_id==e)return this.iconList[t].icon_name;return null},t.prototype.getSomeIconListByStarNum=function(e){var t=[];if(this.iconList){for(var n=0,a=this.iconList.length;a>n;n++)this.iconList[n].enable_star_num<=e&&t.push(this.iconList[n]);return t}return t},Object.defineProperty(t.prototype,"is_new_user",{get:function(){return this._is_new_user},set:function(e){this._is_new_user=e,isNeedNewUserControl||(this._is_new_user=0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pasture_infos",{get:function(){return this.pasture_grpName},set:function(e){this.pasture_grpName=e},enumerable:!0,configurable:!0}),t.prototype.getSomeOnePastureInfo=function(e){for(var t=0,n=this.pasture_list.length;n>t;t++)if(this.pasture_list[t].pasture_id==e)return this.pasture_list[t];return null},t.prototype.getSomeObjByName=function(e){switch(e){case"obj_shan":case 0:return"山";case"obj_che":case 1:return"车子";case"obj_men":case 2:return"房子";case"obj_zhuo":case 3:return"建筑";case"obj_nv":case 4:return"人物"}return"建筑"},t.prototype.getSomeOneIconStrByType=function(e,t,n){switch(void 0===t&&(t=!1),void 0===n&&(n=1),e){case 2:case"2":return t?"panel_common_icons_json.game_icon_jinbi_0_png":"panel_common_icons_json.game_icon_jinbi_1_"+n+"_png";case 1:case"1":return t?"panel_common_icons_json.game_icon_nengliang_0_png":"panel_common_icons_json.game_icon_nengliang_1_"+n+"_png";case 3:case"3":return t?"panel_common_icons_json.game_icon_hudun_0_png":"panel_common_icons_json.game_icon_hudun_1_png";case 4:case"4":return t?"panel_common_icons_json.game_icon_zuanshi_0_png":"panel_common_icons_json.game_icon_zuanshi_1_"+n+"_png";case 5:case"5":return t?"panel_common_icons_json.game_icon_minidun_0_png":"panel_common_icons_json.game_icon_minidun_1_png";case 6:case"6":return t?"panel_common_icons_json.game_icon_tongjiling_0_png":"panel_common_icons_json.game_icon_tongjiling_1_png";case 7:case"7":return t?"panel_common_icons_json.game_icon_suipian_0_png":"panel_common_icons_json.game_icon_suipian_1_png";case 8:case"8":return t?"panel_common_icons_json.game_icon_laba_0_png":"panel_common_icons_json.game_icon_laba_1_png";case 9:case"9":return t?"panel_common_icons_json.game_icon_jinmeilingshi_0_png":"panel_common_icons_json.game_icon_jingmeilingshi_1_png";case 10:case"10":return t?"panel_common_icons_json.game_icon_yaoshui_0_png":"panel_common_icons_json.game_icon_yaoshui_1_png";case 11:case"11":return t?"panel_common_icons_json.game_icon_qingzi_0_png":"panel_common_icons_json.game_icon_qingzi_1_png";case 12:case"12":return t?"panel_common_icons_json.game_icon_jinmeilingshi_0_png":"panel_common_icons_json.game_icon_jingmeilingshi_1_png";case 13:case"13":return t?"panel_common_icons_json.panel_icon_yaoshi_0_png":"panel_common_icons_json.panel_icon_yaoshi_1_png";case 14:case"14":return t?"panel_common_icons_json.ant_coin_0_png":"panel_common_icons_json.ant_coin_1_png"}},t.prototype.getSomeOneTitleStrByType=function(e){switch(e){case 2:case"2":return"麦苗";case 1:case"1":return"能量";case 3:case"3":return"盾牌";case 4:case"4":return"钻石";case 5:case"5":return"迷你盾";case 6:case"6":return"通缉令";case 7:case"7":return"万能碎片";case 8:case"8":return"喇叭";case 9:case"9":return"宠物零食 ";case 10:case"10":return"经验药水";case 11:case"11":return"大麦青汁";case 12:case"12":return"甜甜圈";case 13:case"13":return"快跑钥匙";case 14:case"14":return"蚂蚁币"}},t.prototype.checkIsCanBuild=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return new Promise(function(t){var n=e.GameDatas.getIntance().pasture_;if(n&&e.GameDatas.getIntance().user_info){var a=!1,i=e.GameDatas.getIntance().getSomeOnePastureInfo(e.GameDatas.getIntance().user_info.pasture_id);if(i){for(var o=1,s=6;s>o;o++){var r=!1;1==n.buildings["build"+o].condition&&(r=!0);for(var c=0;5>c;c++)if(r){if(c==n.buildings["build"+o].level-1&&e.GameDatas.getIntance().user_info.barley_num-parseInt(i["build"+o][c])/2>-1){a=!0;break}}else c==n.buildings["build"+o].level&&e.GameDatas.getIntance().user_info.barley_num-parseInt(i["build"+o][c])>-1&&(a=!0);if(a)break}commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ChangeMainViewNewsIcon,{iconName:"eggBtn",isShow:a})}}}),[2]})})},t.prototype.checkIsCanRand=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return new Promise(function(t){return e.GameDatas.getIntance().user_info?e.GameDatas.getIntance().user_info.energy>0?void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ChangeMainViewNewsIcon,{iconName:"panBtn",isShow:!0}):void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ChangeMainViewNewsIcon,{iconName:"panBtn",isShow:!1}):void 0}),[2]})})},t.prototype.checkIsCanBuyOneWorker=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return new Promise(function(t){if(e.GameDatas.getIntance().user_info&&e.GameDatas.getIntance().pasture_list&&e.GameDatas.getIntance().mine_wokers_infos&&e.GameDatas.getIntance().iconList){var n=e.GameDatas.getIntance().user_info.pasture_id;if(!(1001>=n)){for(var a=0,i=e.GameDatas.getIntance().iconList.length;i>a;a++)if("antFarmBtn"==e.GameDatas.getIntance().iconList[a].icon_name&&e.GameDatas.getIntance().iconList[a].enable_star_num>e.GameDatas.getIntance().user_info.max_star_num)return;var o=e.GameDatas.getIntance().mine_wokers_infos.mine_workers;if(0==o.length&&e.GameDatas.getIntance().pasture_list[0].workers[0].unlock_barley<=e.GameDatas.getIntance().user_info.barley_num)return void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ChangeMainViewNewsIcon,{iconName:"antFarmBtn",isShow:!0});for(var s=!1,r=0,c=e.GameDatas.getIntance().pasture_list.length;c>r;r++){var l=e.GameDatas.getIntance().pasture_list[r];if(l.pasture_id>=e.GameDatas.getIntance().user_info.pasture_id)break;for(var g=void 0,a=0,i=o.length;i>a;a++)if(l.pasture_id==o[a].pasture_id){g=o[a];break}if(g){if(5==g.unlock_workers_num)continue;if(l.workers[g.unlock_workers_num].unlock_barley<=e.GameDatas.getIntance().user_info.barley_num){s=!0;break}}else if(l.workers[0].unlock_barley<=e.GameDatas.getIntance().user_info.barley_num){s=!0;break}}return s?void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ChangeMainViewNewsIcon,{iconName:"antFarmBtn",isShow:!0}):void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ChangeMainViewNewsIcon,{iconName:"antFarmBtn",isShow:!1})}}}),[2]})})},t.prototype.getResNameByPetId=function(e){switch(e){case 1:return"kuilin";case 2:return"hafei"}return"kuilin"},t.gameMainViewRes="game_main_view",t.gameLoadingViewRes="game_loading_view",t.panel_youxigonggao="panel_youxigonggao",t.gameFont="game_font",t.panel_common="panel_common",t.panel_dyjs="panel_dyjs",t.panel_signIn="panel_signIn",t.panel_ass="panel_ass",t.panel_shopgame="panel_shopgame",t.panel_left="panel_left",t.panel_xiaoxi="panel_xiaoxi",t.panel_paihang="panel_paihang",t.panel_maimiao="panel_maimiao",t.game_changjing="game_changjing",t.panel_erenbang="panel_erenbang",t.panel_setting="panel_setting",t.panel_haoyou="panel_haoyou",t.game_caifuhao_view="game_caifuhao_view",t.game_animation="game_animation",t.game_sound="game_sound",t.panel_other_active="panel_other_active",t.panel_chaoyuejiangli="panel_chaoyuejiangli",t.panel_xinshoumubiao="panel_xinshoumubiao",t.panel_xinjitehui="panel_xinjitehui",t.panel_pingtu="panel_pingtu",t.game_map="game_map",t.panel_fenxiangjinbi="panel_fenxiangjinbi",t.newControl="newControl",t.panel_huiguilibao="panel_huiguilibao",t.game_pet="game_pet",t.game_pet_animation="game_pet_animation",t.ant_farm="ant_farm",t.ant_grp="ant_grp",t.ant_run="ant_run",t}();e.GameDatas=t,__reflect(t.prototype,"game.GameDatas")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e.isUseNet=!1,e.sig="1234",e.urlNet="https://game.quansuwangluo.com/api/request/index",e}();e.GameNetUrlData=t,__reflect(t.prototype,"game.GameNetUrlData")}(game||(game={}));var resVersion="res_v_1_0_2",romoteUrlHead="https://cdngame.quansuwangluo.com",romoteUrl=romoteUrlHead+"/game/romote/AntGame_wxgame_remote/"+resVersion+"/",viewTools;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.gap_=18,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.y=this.index_*(this.height+this.gap_),this.addEventListener(egret.Event.ADDED_TO_STAGE,this.enable,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStageCall,this),this.init()},t.prototype.enable=function(){this.horizontalCenter=-commonUtils.StageUtils.getIntance().stage.stageWidth,egret.Tween.get(this).to({horizontalCenter:0},150*this.index_,egret.Ease.sineIn),this.addEvent()},t.prototype.removeStageCall=function(){this.removeEvent()},t}(eui.ItemRenderer);e.CustomPanelListItem=t,__reflect(t.prototype,"viewTools.CustomPanelListItem")}(viewTools||(viewTools={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="PanelSwapBtnViewSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.addEvent()},t.prototype.addEvent=function(){this.clickG.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},t.prototype.touchHanle=function(e){var t=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatShiLiaoXiangQingView");t.swapBtn.visible=!1},t.prototype.removeEvent=function(){this.swapBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},t}(eui.Component);e.PanelSwapBtnView=t,__reflect(t.prototype,"game.PanelSwapBtnView")}(game||(game={}));var game;!function(e){var t=function(){function t(){}return Object.defineProperty(t,"systemInfo",{get:function(){return e.WXTools.systemInfo_||platform.getSystemInfo({success:function(t){console.log(t),e.WXTools.systemInfo_=t},fail:function(e){},complete:function(e){}}),e.WXTools.systemInfo_},set:function(t){e.WXTools.systemInfo_=t},enumerable:!0,configurable:!0}),t.sharSomeMessage=function(e,t){return egret.Capabilities.runtimeType!=egret.RuntimeType.WXGAME?void viewTool.TipsUtil.getIntance().showTip("请在微信中打开!"):void t.shareAppMessage(e)},t.setShareQunShare=function(e,t,n,a,i){if(egret.Capabilities.runtimeType!=egret.RuntimeType.WXGAME)return void viewTool.TipsUtil.getIntance().showTip("请在微信中打开!");var o={title:e,imageUrl:t,success:function(e){i.getSystemInfo({success:function(t){console.log("d="),console.log(t),"android"==t.platform&&i.getShareInfo({shareTicket:e.shareTickets,success:function(e){console.log("分享到群里了"),console.log(JSON.stringify(e)),n(e)},fail:function(e){console.log("分享好友无效，请分享群"),a(e)}}),"ios"==t.platform&&(void 0!=e.shareTickets?(console.log("分享的是群"),i.getShareInfo({shareTicket:e.shareTickets,success:function(e){console.log("分享到群里了"),console.log(JSON.stringify(e)),n(e)}})):(console.log("分享的是个人"),a(e)))},fail:function(e){a(e)},complete:function(e){}})}};i.shareAppMessage(o)},t.setShowDefaultMessage=function(t){t.onShareAppMessage(function(t){return"button"===t.from?(console.log("来自页面内转发按钮"),console.log(t.target)):console.log("来自右上角转发菜单"),e.WXTools.shareObj[Math.floor(e.WXTools.shareObj.length*Math.random())]})},t.playSomeVideo=function(t,n){return void 0===n&&(n=""),__awaiter(this,void 0,void 0,function(){var a,i;return __generator(this,function(o){switch(o.label){case 0:return egret.Capabilities.runtimeType!=egret.RuntimeType.WXGAME?(viewTool.TipsUtil.getIntance().showTip("请在微信中打开!"),[2]):(a=new eui.Rect,a.fillColor=0,a.width=a.height=4e3,commonUtils.StageUtils.getIntance().stage.addChild(a),i=platform.createVideo({src:t,poster:n,objectFit:"contain",controls:!1}),i.x=(e.WXTools.systemInfo.windowWidth-i.width)/2,i.y=(e.WXTools.systemInfo.windowHeight-i.height)/2,[4,i.requestFullScreen()]);case 1:return o.sent(),i.play(),i.onEnded(function(){i.destroy(),i=null,commonUtils.StageUtils.getIntance().stage.removeChild(a),a=null}),[2]}})})},t.removeSomeLandImg=function(e,t){void 0===t&&(t="ant_game_image");var n=window.fileutil;if(!n)return void console.log("资源工具不存在!");var a=[];switch(e){case"Asia":a=["nameless_island","china_island","northkorea_island","korea_island","japan_island","philippines_island","indonesia_island","singapore_island","vietnam_island","cambodia_island","thailand_island","malaysia_island","burma_island","mengjiala_island","Sililanka_island","maldives_island","india_island","pakistan_island","iran_island","emirates_island","saudiArabia_island","israel_island","republic_island"];break;case"Europe":}for(var i=0,o=a.length;o>i;i++)n.fs.remove(t+"/assets/game/game_main_changjing/"+a[i])},t.shareObj=[{title:"平日老欺负我，这回看我怎么收拾你！",imageUrl:romoteUrlHead+"/game/romote/shareimg/share_img_1.jpg",query:""},{title:"可以榨出鲜嫩嫩的青汁，好好喝！",imageUrl:romoteUrlHead+"/game/romote/shareimg/share_img_2.jpg",query:""},{title:"要不要过来跟我们一起沐浴阳光？",imageUrl:romoteUrlHead+"/game/romote/shareimg/share_img_3.jpg",query:""},{title:"这个风景真好，好想把它踹下去！",imageUrl:romoteUrlHead+"/game/romote/shareimg/share_img_4.jpg",query:""}],t}();e.WXTools=t,__reflect(t.prototype,"game.WXTools");var n=function(){function e(){}return e.prototype.requestFullScreen=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.play=function(){},e.prototype.onEnded=function(e){},e.prototype.destroy=function(){},e}();e.wxVideo=n,__reflect(n.prototype,"game.wxVideo")}(game||(game={}));var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function a(a){t.call(n,a,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?a(i):RES.getResAsync(e,a,this)}else egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME&&(e=romoteUrl+e),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var game;!function(e){var t=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.gamePetConstrolEvent="gamePetConstrolEvent",t.gamePetViewUpOnePet="gamePetViewUpOnePet",t.goToBattlSucc="goToBattlSucc",t.gamePetLvUpAnimation="gamePetLvUpAnimation",t.gamePetViewIconNumChange="gamePetViewIconNumChange",t.gamePetViewEatingSucc="gamePetViewEatingSucc",t.gamePetDaliyOrSeep="gamePetDaliyOrSeep",t.petUpgradeEvent="petUpgradeEvent",t.petFuHuaEvent="petFuHuaEvent",t.petFuHuaEndEvent="petFuHuaEndEvent",t.enterPetView="enterPetView",t.newConstrolEvent="newConstrolEvent",t.SelectSomeOneCaiFuHao="SelectSomeOneCaiFuHao",t.CaiFuHaoReturn="CaiFuHaoReturn",t.CaiFuHaoEnd="CaiFuHaoEnd",t.AttackEvent="AttackEvent",t.EnterAttackView="EnterAttackView",t.EnterSeallView="EnterSeallView",t.EnterRandViewFormAttackView="EnterRandViewFormAttackView",t.EnterRandViewOrNongChangViewEvent="EnterRandViewOrNongChangViewEvent",t.ChangeBtnGrp="ChangeBtnGrp",t.ShowCaiFuHaoEnd="ShowCaiFuHaoEnd",t.ShowConstrolPingTu="ShowConstrolPingTu",t.ShowSomeSuiPianCom="ShowSomeSuiPianCom",t.CourenDataChange="CourenDataChange",t.ChangeBeAttackUserInfo="ChangeBeAttackUserInfo",t.AttackHyListDataChange="AttackHyListDataChange",t.UpdataUsNongChangInfo="UpdataUsNongChangInfo",t.ChangeMainViewNewsIcon="ChangeMainViewNewsIcon",t.ChangeMainViewRedSpotInfo="ChangeMainViewRedSpotInfo",t.MiwuZheDangEvent="MiwuZheDangEvent",t.ShiLiaoJuBaoChangColour="ShiLiaoJuBaoChangColour",t.ShiJieJuBaoChangColour="ShiJieJuBaoChangColour",t.CloseShowChaoPing="CloseShowChaoPing",t.CloseShowMainView="CloseShowMainView",t.CloseShowMainViewExitTopGrp="CloseShowMainViewExitTopGrp",t.refreshUserInfo="refreshUserInfo",t.showUserInfoLand="showUserInfoLand",t.openSomePanelKey="openSomePanelKey",t}(egret.Event);e.GameEvent=t,__reflect(t.prototype,"game.GameEvent")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e}();e.LandConfigInfo=t,__reflect(t.prototype,"game.LandConfigInfo");var n=function(){function e(){}return e}();e.task=n,__reflect(n.prototype,"game.task");var a=function(){function e(){}return e}();e.pasture=a,__reflect(a.prototype,"game.pasture");var i=function(){function e(){}return e}();e.user_info=i,__reflect(i.prototype,"game.user_info");var o=function(){function e(){}return e}();e.IconListConfig=o,__reflect(o.prototype,"game.IconListConfig");var s=function(){function e(){}return e}();e.AttackInfo=s,__reflect(s.prototype,"game.AttackInfo");var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s);e.erenbang_info=r,__reflect(r.prototype,"game.erenbang_info");var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s);e.AttackFriendInfo=c,__reflect(c.prototype,"game.AttackFriendInfo");var l=function(){function e(){}return e}();e.wxUserInfo=l,__reflect(l.prototype,"game.wxUserInfo");var g=function(){function e(){}return e}();e.friendInfo=g,__reflect(g.prototype,"game.friendInfo");var h=function(){function e(){}return e}();e.friendShiLiaoInfo=h,__reflect(h.prototype,"game.friendShiLiaoInfo");var u=function(){function e(){}return e}();e.pullShiLiaoMsgInfo=u,__reflect(u.prototype,"game.pullShiLiaoMsgInfo");var p=function(){function e(){}return e}();e.swapInfo=p,__reflect(p.prototype,"game.swapInfo");var m=function(){function e(){}return e}();e.swapListData=m,__reflect(m.prototype,"game.swapListData");var d=function(){function e(){}return e}();e.swapChangData=d,__reflect(d.prototype,"game.swapChangData");var _=function(){function e(){}return e}();e.swapRequsMsgData=_,__reflect(_.prototype,"game.swapRequsMsgData");var f=function(){function e(){}return e}();e.friend_info=f,__reflect(f.prototype,"game.friend_info");var v=function(){function e(){}return e}();e.swap=v,__reflect(v.prototype,"game.swap");var y=function(){function e(){}return e}();e.message=y,__reflect(y.prototype,"game.message");var w=function(){function e(){}return e}();e.detailInfo=w,__reflect(w.prototype,"game.detailInfo");var I=function(){function e(){}return e}();e.siftInfoData=I,__reflect(I.prototype,"game.siftInfoData");var C=function(){function e(){}return e}();e.siftMsgInfoData=C,__reflect(C.prototype,"game.siftMsgInfoData");var T=function(){function e(){}return e}();e.jubaoInfoData=T,__reflect(T.prototype,"game.jubaoInfoData");var S=function(){function e(){}return e}();e.friendMsgInfo=S,__reflect(S.prototype,"game.friendMsgInfo");var b=function(){function e(){}return e}();e.awards=b,__reflect(b.prototype,"game.awards");var E=function(){function e(){}return e}();e.rank=E,__reflect(E.prototype,"game.rank");var G=function(){function e(){}return e}();e.siginInfo=G,__reflect(G.prototype,"game.siginInfo");var P=function(){function e(){}return e}();e.msgInfo=P,__reflect(P.prototype,"game.msgInfo");var D=function(){function e(){}return e}();e.mailInfo=D,__reflect(D.prototype,"game.mailInfo");var M=function(){function e(){}return e}();e.RichManInfo=M,__reflect(M.prototype,"game.RichManInfo");var B=function(){function e(){}return e}();e.pastureInfo=B,__reflect(B.prototype,"game.pastureInfo");var U=function(){function e(){}return e}();e.beStolenUsersInfo=U,__reflect(U.prototype,"game.beStolenUsersInfo");var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(s);e.beAttackInfoUser=x,__reflect(x.prototype,"game.beAttackInfoUser");var H=function(){function e(){}return e}();e.DaoInfo=H,__reflect(H.prototype,"game.DaoInfo");var k=function(){function e(){}return e}();e.DaoInfoItem=k,__reflect(k.prototype,"game.DaoInfoItem");var L=function(){function e(){}return e}();e.ShopItemInfo=L,__reflect(L.prototype,"game.ShopItemInfo");var A=function(){function e(){}return e}();e.NoviceGoal=A,__reflect(A.prototype,"game.NoviceGoal");var O=function(){function e(){}return e}();e.NoviceGoalTaget=O,__reflect(O.prototype,"game.NoviceGoalTaget");var V=function(){function e(){}return e}();e.JigsawData=V,__reflect(V.prototype,"game.JigsawData");var R=function(){function e(){}return e}();e.OverStepInfoData=R,__reflect(R.prototype,"game.OverStepInfoData");var N=function(){function e(){}return e}();e.StarAwardData=N,__reflect(N.prototype,"game.StarAwardData");var j=function(){function e(){}return e}();e.GiftShowConfig=j,__reflect(j.prototype,"game.GiftShowConfig");var F;!function(e){e[e.gitType=0]="gitType",e[e.suiPianType=1]="suiPianType",e[e.sharType=2]="sharType"}(F=e.GiftShwoType||(e.GiftShwoType={}));var X=function(){function e(){}return e}();e.Youxigonggao=X,__reflect(X.prototype,"game.Youxigonggao");var q=function(){function e(){}return e}();e.Fenxiangjinbi=q,__reflect(q.prototype,"game.Fenxiangjinbi");var Y=function(){function e(){}return e}();e.BarleygiftBag=Y,__reflect(Y.prototype,"game.BarleygiftBag");var J=function(){function e(){}return e}();e.MapInfo=J,__reflect(J.prototype,"game.MapInfo");var W=function(){function e(){}return e}();e.NoticeDataInfo=W,__reflect(W.prototype,"game.NoticeDataInfo");var z=function(){function e(){this.signBtn=0,this.assBtn=0,this.xinshouBtn=0,this.xinjitehuiBtn=0,this.mianfeiBtn=0,this.chaoyueBtn=0,this.huoBtn={jigsawBtn:0,antrunBtn:0,ptxiaoxiBtn:0},this.addFriendBtn=0,this.antGrpBtn=new ant_grp.AntGrpRedConfig}return e}();e.RedSpotData=z,__reflect(z.prototype,"game.RedSpotData");var Q=function(){function e(){}return e}();e.Ant_RunData=Q,__reflect(Q.prototype,"game.Ant_RunData");var K=function(){function e(){}return e}();e.AntRunPetInfo=K,__reflect(K.prototype,"game.AntRunPetInfo")}(game||(game={}));var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.createUserInfoButton=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getSystemInfo=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.setPreferredFramesPerSecond=function(e){},e.prototype.setKeepScreenOn=function(){},e.prototype.onMemoryWarning=function(e){},e.prototype.setEnableDebug=function(e){void 0===e&&(e=!0)},e.prototype.triggerGC=function(){},e.prototype.onHide=function(e){},e.prototype.offHide=function(e){},e.prototype.onShow=function(e){},e.prototype.showShareMenu=function(e){},e.prototype.getLaunchOptionsSync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.offShow=function(e){},e.prototype.onShareAppMessage=function(e){},e.prototype.getShareInfo=function(e){},e.prototype.shareAppMessage=function(e){},e.prototype.showModal=function(e){},e.prototype.setClipboardData=function(e){},e.prototype.connectSocket=function(e){},e.prototype.onSocketOpen=function(e){},e.prototype.sendSocketMessage=function(e){},e.prototype.onSocketMessage=function(e){},e.prototype.createInnerAudioContext=function(){},e.prototype.createVideo=function(e){},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]);var styleObj=function(){function e(){}return e}();__reflect(styleObj.prototype,"styleObj"),window.platform||(window.platform=new DebugPlatform);var game;!function(e){var t=function(){function t(){}return t.getIntance=function(){return t.instance_||(t.instance_=new t),t.instance_},t.prototype.Share_sharedSuccess_C=function(t,n){void 0===n&&(n=null);var a={share_type:t,share_id:n};e.GameServerMgr.getIntance().sendMsg("Share_sharedSuccess_C",a)},t.prototype.Activity_gameNotice_Brd=function(t,n){var a={image:t,explain:n};e.GameServerMgr.getIntance().sendMsg("Activity_gameNotice_Brd",a)},t.prototype.User_getRdsession_C=function(t){void 0===t&&(t=e.GameDatas.getIntance().code_wx);var n={code:t};t&&e.GameServerMgr.getIntance().sendMsg("User_getRdsession_C",n)},t.prototype.User_getToken_C=function(t,n,a,i){void 0===t&&(t=null),void 0===n&&(n=null),void 0===a&&(a=null),void 0===i&&(i=null);var o={rd_session:t,iv:n,encryptedData:a,share_id:e.GameDatas.getIntance().share_query?e.GameDatas.getIntance().share_query.user_id:null};e.GameServerMgr.getIntance().sendMsg("User_getToken_C",o)},t.prototype.User_getUserinfo_C=function(t){void 0===t&&(t=e.GameDatas.getIntance().token);var n={token:t};t&&e.GameServerMgr.getIntance().sendMsg("User_getUserinfo_C",n)},t.prototype.Shop_buyShield_C=function(t){var n={num:t};e.GameServerMgr.getIntance().sendMsg("Shop_buyShield_C",n)},t.prototype.Luckydraw_clickLuckyDraw_C=function(){var t={user_id:e.GameDatas.getIntance().user_info.id,mult:e.GameDatas.getIntance().currentMult};return e.GameDatas.getIntance().is_new_user?void e.GameServerMgr.getIntance().sendMsg("NoviceGuidance_clickLuckyDraw_C",t):void e.GameServerMgr.getIntance().sendMsg("Luckydraw_clickLuckyDraw_C",t)},t.prototype.NoviceGuidance_setSteps_C=function(t){var n={step:t};e.GameServerMgr.getIntance().sendMsg("NoviceGuidance_setSteps_C",n)},t.prototype.Luckydraw_getSteal_C=function(){return e.GameDatas.getIntance().is_new_user?void e.GameServerMgr.getIntance().sendMsg("NoviceGuidance_getSteal_C"):void e.GameServerMgr.getIntance().sendMsg("Luckydraw_getSteal_C")},t.prototype.Luckydraw_toSteal_C=function(t){var n={user_id:t};return e.GameDatas.getIntance().is_new_user?void e.GameServerMgr.getIntance().sendMsg("NoviceGuidance_toSteal_C",n):void e.GameServerMgr.getIntance().sendMsg("Luckydraw_toSteal_C",n)},t.prototype.Signin_getSignInfo_C=function(t){void 0===t&&(t=1);var n={user_id:e.GameDatas.getIntance().user_info.id};e.GameServerMgr.getIntance().sendMsg("Signin_getSignInfo_C",n)},t.prototype.Signin_signIn_C=function(){e.GameServerMgr.getIntance().sendMsg("Signin_signIn_C")},t.prototype.Shop_getShopInfo_C=function(t){void 0===t&&(t=1);var n={user_id:e.GameDatas.getIntance().user_info.id};e.GameServerMgr.getIntance().sendMsg("Shop_getShopInfo_C",n)},t.prototype.Shop_barleyGiftBag_C=function(){e.GameServerMgr.getIntance().sendMsg("Shop_barleyGiftBag_C")},t.prototype.Shop_buyBarleyGiftBag_C=function(t){var n={id:t};e.GameServerMgr.getIntance().sendMsg("Shop_buyBarleyGiftBag_C",n)},t.prototype.Map_getFriendsLocation_C=function(){e.GameServerMgr.getIntance().sendMsg("Map_getFriendsLocation_C")},t.prototype.Activity_specialGiftBag_C=function(){e.GameServerMgr.getIntance().sendMsg("Activity_specialGiftBag_C")},t.prototype.Activity_getEnergyConfig_C=function(){e.GameServerMgr.getIntance().sendMsg("Activity_getEnergyConfig_C")},t.prototype.Shop_buyCommodity_C=function(t,n){void 0===n&&(n=1);var a={commodity_id:t,user_id:e.GameDatas.getIntance().user_info.id};e.GameServerMgr.getIntance().sendMsg("Shop_buyCommodity_C",a)},t.prototype.Task_getTaskList_C=function(t){void 0===t&&(t=1);var n={user_id:e.GameDatas.getIntance().user_info.id};e.GameServerMgr.getIntance().sendMsg("Task_getTaskList_C",n)},t.prototype.Task_getAward_C=function(t,n){void 0===n&&(n=1);var a={task_id:t,user_id:e.GameDatas.getIntance().user_info.id};e.GameServerMgr.getIntance().sendMsg("Task_getAward_C",a)
},t.prototype.Task_receiveStageReward_C=function(){e.GameServerMgr.getIntance().sendMsg("Task_receiveStageReward_C")},t.prototype.Pasture_getPastureInfo_C=function(t){void 0===t&&(t=1);var n={user_id:e.GameDatas.getIntance().user_info.id};e.GameServerMgr.getIntance().sendMsg("Pasture_getPastureInfo_C",n)},t.prototype.Pasture_gotoNextPasture_C=function(){e.GameServerMgr.getIntance().sendMsg("Pasture_gotoNextPasture_C")},t.prototype.Pasture_building_C=function(t){var n={build_id:t};e.GameServerMgr.getIntance().sendMsg("Pasture_building_C",n)},t.prototype.Luckydraw_getAttact_C=function(t){void 0===t&&(t=null);var n={attact_id:t};return e.GameDatas.getIntance().is_new_user?void e.GameServerMgr.getIntance().sendMsg("NoviceGuidance_getAttact_C",n):void e.GameServerMgr.getIntance().sendMsg("Luckydraw_getAttact_C",n)},t.prototype.Luckydraw_getFriendRelations_C=function(){e.GameServerMgr.getIntance().sendMsg("Luckydraw_getFriendRelations_C")},t.prototype.Luckydraw_toAttact_C=function(t,n){void 0===n&&(n=1);var a={build_id:n+1,user_id:t};return e.GameDatas.getIntance().is_new_user?void e.GameServerMgr.getIntance().sendMsg("NoviceGuidance_toAttact_C",a):void e.GameServerMgr.getIntance().sendMsg("Luckydraw_toAttact_C",a)},t.prototype.Enemy_getEnemys_C=function(){return e.GameDatas.getIntance().is_new_user?void e.GameServerMgr.getIntance().sendMsg("NoviceGuidance_getEnemys_C"):void e.GameServerMgr.getIntance().sendMsg("Enemy_getEnemys_C")},t.prototype.Enemy_asWanted_C=function(t){var n={enemy_id:t};e.GameServerMgr.getIntance().sendMsg("Enemy_asWanted_C",n)},t.prototype.Shop_buyWantedToken_C=function(t){var n={num:t};e.GameServerMgr.getIntance().sendMsg("Shop_buyWantedToken_C",n)},t.prototype.Pasture_loadMiniShield_C=function(t){var n={build_id:t};e.GameServerMgr.getIntance().sendMsg("Pasture_loadMiniShield_C",n)},t.prototype.User_steal_C=function(t,n){var a={house_id:t,steal_barley:n,user_id:e.GameDatas.getIntance().user_info.id};e.GameServerMgr.getIntance().sendMsg("User_steal_C",a)},t.prototype.User_searchUser_C=function(t){var n={user_id:t};e.GameServerMgr.getIntance().sendMsg("User_searchUser_C",n)},t.prototype.User_addFriend_C=function(t,n){var a={by_user_id:t,applyInfo:n};e.GameServerMgr.getIntance().sendMsg("User_addFriend_C",a)},t.prototype.User_lookFriends_C=function(){var t={user_id:e.GameDatas.getIntance().user_info.id};e.GameServerMgr.getIntance().sendMsg("User_lookFriends_C",t)},t.prototype.User_giveEnergy_C=function(t){var n={user_id:e.GameDatas.getIntance().user_info.id,by_user_id:t};e.GameServerMgr.getIntance().sendMsg("User_giveEnergy_C",n)},t.prototype.User_doApplyMessage_C=function(t,n){var a={id:t,type:n};e.GameServerMgr.getIntance().sendMsg("User_doApplyMessage_C",a)},t.prototype.User_getApplyMessage_C=function(){e.GameServerMgr.getIntance().sendMsg("User_getApplyMessage_C")},t.prototype.User_invitingAwards_C=function(){e.GameServerMgr.getIntance().sendMsg("User_invitingAwards_C")},t.prototype.User_reciveInvitingAwards_C=function(t){var n={id:t};e.GameServerMgr.getIntance().sendMsg("User_reciveInvitingAwards_C",n)},t.prototype.User_getRankingList_C=function(){e.GameServerMgr.getIntance().sendMsg("User_getRankingList_C")},t.prototype.News_getMessage_C=function(){e.GameServerMgr.getIntance().sendMsg("News_getMessage_C")},t.prototype.News_getMail_C=function(){e.GameServerMgr.getIntance().sendMsg("News_getMail_C")},t.prototype.News_handleMail_C=function(t,n){var a={id:t,type:n};e.GameServerMgr.getIntance().sendMsg("News_handleMail_C",a)},t.prototype.User_energy_C=function(t,n){void 0===t&&(t=null),void 0===n&&(n=null);var a={fid:n,type:t};e.GameServerMgr.getIntance().sendMsg("User_energy_C",a)},t.prototype.doSubmitFeedback_C=function(t){var n={message:t};e.GameServerMgr.getIntance().sendMsg("User_doSubmitFeedback_C",n)},t.prototype.User_doConversionAward_C=function(t){var n={conversion_code:t};e.GameServerMgr.getIntance().sendMsg("User_doConversionAward_C",n)},t.prototype.Activity_getEnergy_C=function(){e.GameServerMgr.getIntance().sendMsg("Activity_getEnergy_C")},t.prototype.Task_noviceGoal_C=function(){e.GameServerMgr.getIntance().sendMsg("Task_noviceGoal_C")},t.prototype.Task_receiveTaskReward_C=function(t){var n={task_id:t};e.GameServerMgr.getIntance().sendMsg("Task_receiveTaskReward_C",n)},t.prototype.Jigsaw_getJigsawInfo_C=function(){e.GameServerMgr.getIntance().sendMsg("Jigsaw_getJigsawInfo_C")},t.prototype.Jigsaw_loadPiece_C=function(t,n){var a={type:t,is_omnipotent:n};e.GameServerMgr.getIntance().sendMsg("Jigsaw_loadPiece_C",a)},t.prototype.Jigsaw_unloadPiece_C=function(t){var n={type:t};e.GameServerMgr.getIntance().sendMsg("Jigsaw_unloadPiece_C",n)},t.prototype.Jigsaw_completeJigsaw_C=function(){e.GameServerMgr.getIntance().sendMsg("Jigsaw_completeJigsaw_C")},t.prototype.Activity_overstep_C=function(){e.GameServerMgr.getIntance().sendMsg("Activity_overstep_C")},t.prototype.Activity_overstepAward_C=function(){e.GameServerMgr.getIntance().sendMsg("Activity_overstepAward_C")},t.prototype.Activity_starAward_C=function(){e.GameServerMgr.getIntance().sendMsg("Activity_starAward_C")},t.prototype.Activity_getStarAward_C=function(t){var n={award_id:t};e.GameServerMgr.getIntance().sendMsg("Activity_getStarAward_C",n)},t.prototype.Chat_sendPrivateMsg_C=function(t,n){var a={fid:t,message:n};e.GameServerMgr.getIntance().sendMsg("Chat_sendPrivateMsg_C",a)},t.prototype.Chat_getPrivateList_C=function(){var t={};e.GameServerMgr.getIntance().sendMsg("Chat_getPrivateList_C",t)},t.prototype.Chat_getPrivateDetail_C=function(t){var n={fid:t};e.GameServerMgr.getIntance().sendMsg("Chat_getPrivateDetail_C",n)},t.prototype.Chat_delPrivateMsg_C=function(t){var n={fid:t};e.GameServerMgr.getIntance().sendMsg("Chat_delPrivateMsg_C",n)},t.prototype.Chat_sendWorldMsg_C=function(t){var n={message:t};e.GameServerMgr.getIntance().sendMsg("Chat_sendWorldMsg_C",n)},t.prototype.Chat_getSwappableList_C=function(){var t={};e.GameServerMgr.getIntance().sendMsg("Chat_getSwappableList_C",t)},t.prototype.Chat_sendSwapRequest_C=function(t,n){var a={fid:t,used_type:n.used_type,used_num:n.used_num,need_type:n.need_type,need_num:n.need_num};e.GameServerMgr.getIntance().sendMsg("Chat_sendSwapRequest_C",a)},t.prototype.Chat_getSwapDetail_C=function(t){var n={fid:t};e.GameServerMgr.getIntance().sendMsg("Chat_getSwapDetail_C",n)},t.prototype.Chat_delSwapRequest_C=function(t){var n={fid:t};e.GameServerMgr.getIntance().sendMsg("Chat_delSwapRequest_C",n)},t.prototype.Chat_refuseSwapRequest_C=function(t){var n={fid:t};e.GameServerMgr.getIntance().sendMsg("Chat_refuseSwapRequest_C",n)},t.prototype.Chat_completeSwapRequest_C=function(t){var n={fid:t};e.GameServerMgr.getIntance().sendMsg("Chat_completeSwapRequest_C",n)},t.prototype.Shop_buyTrumpet_C=function(t){var n={num:t};e.GameServerMgr.getIntance().sendMsg("Shop_buyTrumpet_C",n)},t.prototype.Chat_reportingUser_C=function(t){var n={report_id:t};e.GameServerMgr.getIntance().sendMsg("Chat_reportingUser_C",n)},t.prototype.User_delFriends_C=function(t){var n={fid:t};e.GameServerMgr.getIntance().sendMsg("User_delFriends_C",n)},t.prototype.Jigsaw_givePiece_C=function(t,n){var a={fid:t,piece_id:n};e.GameServerMgr.getIntance().sendMsg("Jigsaw_givePiece_C",a)},t.prototype.Jigsaw_getJigsawMessage_C=function(){var t={};e.GameServerMgr.getIntance().sendMsg("Jigsaw_getJigsawMessage_C",t)},t.prototype.Activity_reciveComeBackGift_C=function(){e.GameServerMgr.getIntance().sendMsg("Activity_reciveComeBackGift_C")},t.prototype.Pet_petInit_C=function(){e.GameServerMgr.getIntance().sendMsg("Pet_petInit_C")},t.prototype.Pet_petLists_C=function(){e.GameServerMgr.getIntance().sendMsg("Pet_petLists_C")},t.prototype.Pet_petHatch_C=function(t,n){var a={pet_id:t,hatch_type:n};e.GameServerMgr.getIntance().sendMsg("Pet_petHatch_C",a)},t.prototype.Pet_petCookie_C=function(t){var n={pet_id:t};e.GameServerMgr.getIntance().sendMsg("Pet_petCookie_C",n)},t.prototype.Pet_petWater_C=function(t){var n={pet_id:t};e.GameServerMgr.getIntance().sendMsg("Pet_petWater_C",n)},t.prototype.Pet_goToBattle_C=function(t){var n={pet_id:t};e.GameServerMgr.getIntance().sendMsg("Pet_goToBattle_C",n)},t.prototype.Pet_buyFoods_C=function(t,n){var a={food_type:t,num:n};e.GameServerMgr.getIntance().sendMsg("Pet_buyFoods_C",a)},t.prototype.PastureWorker_getWorkerList_C=function(){e.GameServerMgr.getIntance().sendMsg("PastureWorker_getWorkerList_C")},t.prototype.PastureWorker_unlockWorker_C=function(t){e.GameDatas.getIntance().openGiftShow();var n={worker_id:t};e.GameServerMgr.getIntance().sendMsg("PastureWorker_unlockWorker_C",n)},t.prototype.PastureWorker_collectBarley_C=function(){e.GameServerMgr.getIntance().sendMsg("PastureWorker_collectBarley_C")},t.prototype.AntRun_init_C=function(){e.GameServerMgr.getIntance().sendMsg("AntRun_init_C")},t.prototype.AntRun_enterGame_C=function(t){var n={pet_id:t};e.GameServerMgr.getIntance().sendMsg("AntRun_enterGame_C",n)},t.prototype.AntRun_skipBlock_C=function(t,n,a){var i={pet_id:t,box_type:n,max_continue_step:a};e.GameServerMgr.getIntance().sendMsg("AntRun_skipBlock_C",i)},t.prototype.AntRun_gameOver_C=function(){e.GameServerMgr.getIntance().sendMsg("AntRun_gameOver_C")},t.prototype.AntRun_reconnect_C=function(){e.GameServerMgr.getIntance().sendMsg("AntRun_reconnect_C")},t}();e.GameRequestMgr=t,__reflect(t.prototype,"game.GameRequestMgr")}(game||(game={}));var game;!function(e){var t=function(){function t(){}return t.getIntance=function(){return t.instance_||(t.instance_=new t),t.instance_},t.prototype.handleMsg=function(n){var a;if(n&&(a=JSON.parse(n)),a&&a.type)switch(a.type){case"ping":return void e.GameServerMgr.getIntance().sendMsg("pang")}if(a&&a.cmd){var i=void 0;return a.cmd.indexOf("AntGroup")>-1?(i=ant_grp.AntGrpResponseMgr.getIntance()[a.cmd],void("function"==typeof i&&i(a))):(i=t.instance_[a.cmd],void("function"==typeof i&&i(a)))}},t.prototype.Share_sharedSuccess_S=function(t){t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow(),viewTool.TipsUtil.getIntance().showTip("分享成功！"))},t.prototype.Activity_gameNotice_Brd=function(t){200==t.code&&t.data.notice&&e.GameDatas.getIntance().noticeDatasPush(t.data.notice,!1)},t.prototype.User_getRdsession_S=function(t){return 200==t.code?(console.log(t.data.rd_session),e.GameDatas.getIntance().rd_session=t.data.rd_session,void e.GameRequestMgr.getIntance().User_getToken_C(e.GameDatas.getIntance().rd_session,e.GameDatas.getIntance().wx_auth_msg.iv,e.GameDatas.getIntance().wx_auth_msg.encryptedData)):void 0},t.prototype.User_getToken_S=function(t){if(200==t.code){console.log(t),e.GameDatas.getIntance().token=t.data.token;var n=commonUtils.VersionUtils.getIntance().Version;return egret.Capabilities.runtimeType==egret.RuntimeType.WEB?(n+="_"+window.location.href,localStorage.setItem("wx_token_"+n,t.data.token)):localStorage.setItem("wx_token",t.data.token),!e.GameDatas.getIntance().user_info&&e.GameDatas.getIntance().loadResComplet&&e.GameRequestMgr.getIntance().User_getUserinfo_C(e.GameDatas.getIntance().token),void(e.GameDatas.getIntance().is_new_user=t.data.is_new_user)}},t.prototype.User_getUserinfo_S=function(t){if(200!=t.code);else{e.GameDatas.getIntance().msgListInfo||e.GameRequestMgr.getIntance().News_getMessage_C(),baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),e.GameDatas.getIntance().user_info=t.data.user_info,e.GameDatas.getIntance().is_new_user=t.data.is_new_user;try{baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()}catch(n){baseContent.SceneLayerMgr.getIntance().addScene(e.GameMainView)}}},t.prototype.Shop_buyShield_S=function(t){200==t.code?(t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()),e.GameRequestMgr.getIntance().Pasture_getPastureInfo_C(),viewTool.TipsUtil.getIntance().showTip(t.info+"购买成功!")):viewTool.TipsUtil.getIntance().showTip(t.info+"")},t.prototype.Luckydraw_clickLuckyDraw_S=function(t){if(200==t.code){switch(commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.gamePetLvUpAnimation),t.data.type){case 1:t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info);break;case 2:console.log("攻击"),e.GameDatas.getIntance().showAttackOrStolenNum=t.data.mult,e.GameRequestMgr.getIntance().Luckydraw_getAttact_C();break;case 3:console.log("偷取"),e.GameDatas.getIntance().showAttackOrStolenNum=t.data.mult,e.GameRequestMgr.getIntance().Luckydraw_getSteal_C();break;case 4:t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info),console.log("能量");break;case 5:t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info),console.log("护盾")}return baseContent.SceneLayerMgr.getIntance().getCurrenScene().showRandPan(t.data.lucky_draw_res,t.data,t.data.barley_type),void e.GameSoundMgr.playStartWheel()}baseContent.SceneLayerMgr.getIntance().getCurrenScene().randPanel.isEnd=!0,viewTool.TipsUtil.getIntance().showTip(t.info+"")},t.prototype.NoviceGuidance_setSteps_S=function(e){200==e.code},t.prototype.NoviceGuidance_clickLuckyDraw_S=function(t){if(200==t.code){switch(t.data.type){case 1:t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info);break;case 2:console.log("攻击"),e.GameDatas.getIntance().showAttackOrStolenNum=t.data.mult,e.GameRequestMgr.getIntance().Luckydraw_getAttact_C();break;case 3:console.log("偷取"),e.GameDatas.getIntance().showAttackOrStolenNum=t.data.mult,e.GameRequestMgr.getIntance().Luckydraw_getSteal_C();break;case 4:t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info),console.log("能量");break;case 5:t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info),console.log("护盾")}return baseContent.SceneLayerMgr.getIntance().getCurrenScene().showRandPan(t.data.lucky_draw_res,t.data),void e.GameSoundMgr.playStartWheel()}baseContent.SceneLayerMgr.getIntance().getCurrenScene().randPanel.isEnd=!0,viewTool.TipsUtil.getIntance().showTip(t.info+"")},t.prototype.Luckydraw_toSteal_S=function(t){200==t.code&&(e.GameDatas.getIntance().showAttackOrStolenNum-=1,e.GameDatas.getIntance().caiFuHaoReturnData=t.data,t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.CaiFuHaoReturn))},t.prototype.NoviceGuidance_toSteal_S=function(t){200==t.code&&(e.GameDatas.getIntance().showAttackOrStolenNum-=1,e.GameDatas.getIntance().caiFuHaoReturnData=t.data,t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.CaiFuHaoReturn))},t.prototype.Signin_getSignInfo_S=function(t){200==t.code&&(e.GameDatas.getIntance().sigin_infos=t.data),console.log(t.info)},t.prototype.Signin_signIn_S=function(t){if(200==t.code){var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelSignInView");n&&n.showYesSigin(t.data.sign_num),t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()),e.GameDatas.getIntance().giftShowSomeData(t.data.appenddix)}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Shop_getShopInfo_S=function(t){if(200==t.code){e.GameDatas.getIntance().commodity_list=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("GameShop");return void(n&&n.parent&&n.initShow().then())}console.log(t.info)},t.prototype.Shop_barleyGiftBag_S=function(e){if(200==e.code){var t=baseContent.PanelManager.getIntance().getPenelByPanelKey("MaiMiaoBuZhuView");return void(t&&t.initShow(e.data))}console.log(e.info)},t.prototype.Shop_buyBarleyGiftBag_S=function(t){if(200==t.code){t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow());var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("MaiMiaoBuZhuView");return n.parent&&n.removeUs(),void viewTool.TipsUtil.getIntance().showTip("购买成功！")}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Map_getFriendsLocation_S=function(e){if(200==e.code){var t=baseContent.PanelManager.getIntance().getPenelByPanelKey("GameMapView");return void(t&&t.parent&&t.initShow(e.data).then())}viewTool.TipsUtil.getIntance().showTip(""+e.info)},t.prototype.Activity_specialGiftBag_S=function(e){if(200==e.code){var t=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelTeHuiLIBao");return void(t&&t.initShow(e.data))}viewTool.TipsUtil.getIntance().showTip(""+e.info)},t.prototype.Activity_getEnergyConfig_S=function(e){if(200==e.code){var t=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelJinMeiXiaoShi");return void(t&&t.initShow(e.data))}viewTool.TipsUtil.getIntance().showTip(""+e.info)},t.prototype.Shop_buyCommodity_S=function(t){return 200==t.code?(viewTool.TipsUtil.getIntance().showTip("购买成功"),void e.GameRequestMgr.getIntance().User_getUserinfo_C()):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Task_getTaskList_S=function(t){if(200==t.code){e.GameDatas.getIntance().task_list=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelAssignmCenter");return void(n&&n.parent&&n.initShow().then())}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Task_getAward_S=function(t){200==t.code&&(e.GameRequestMgr.getIntance().Task_getTaskList_C(),e.GameDatas.getIntance().giftShowSomeData(t.data.appenddix),t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow())),viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Pasture_getPastureInfo_S=function(t){if(200==t.code){e.GameDatas.getIntance().pasture_=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelDyjs");return n&&n.parent&&n.initShow().then(),e.GameDatas.getIntance().checkIsCanBuild(),void(baseContent.SceneLayerMgr.getIntance().getCurrenScene()&&baseContent.SceneLayerMgr.getIntance().getCurrenScene().setNongChangTileInfo())}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Pasture_gotoNextPasture_S=function(t){return 200==t.code?(t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()),e.GameDatas.getIntance().awrad=t.data.appenddix,void egret.setTimeout(function(){baseContent.SceneLayerMgr.getIntance().getCurrenScene().showNextPasture()},this,1e3)):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Pasture_building_S=function(t){if(200==t.code){if(e.GameDatas.getIntance().isShowBuildAnimation=!0,setTimeout(function(){e.GameDatas.getIntance().isShowBuildAnimation=!1},1900),t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()),t.data.rank&&t.data.rank.ranking&&(e.GameDatas.getIntance().rank=t.data.rank),t.data.pasture){e.GameDatas.getIntance().pasture_=t.data.pasture,baseContent.SceneLayerMgr.getIntance().getCurrenScene()&&baseContent.SceneLayerMgr.getIntance().getCurrenScene().setNongChangTileInfo();var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelDyjs");n&&n.initShow().then(),e.GameDatas.getIntance().pasture_.current_level==e.GameDatas.getIntance().pasture_.total_level&&setTimeout(function(){e.GameRequestMgr.getIntance().Pasture_gotoNextPasture_C(),console.log("进入下个岛屿了")},2900)}var a=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelDyjs");return a&&a.removeUs(),void e.GameDatas.getIntance().checkIsCanBuild()}return 400==t.code?void baseContent.PanelManager.getIntance().openTypeIntance(e.MaiMiaoBuZhuView):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Luckydraw_getAttact_S=function(t){return 200==t.code?(e.GameDatas.getIntance().beAttackInfo&&e.GameDatas.getIntance().beAttackInfo.id!=t.data.be_attacted_user.id?(e.GameDatas.getIntance().beAttackInfo=t.data.be_attacted_user,commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ChangeBeAttackUserInfo)):e.GameDatas.getIntance().beAttackInfo=t.data.be_attacted_user,void(e.GameDatas.getIntance().randomAttackInfo||(e.GameDatas.getIntance().randomAttackInfo=t.data.be_attacted_user))):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.NoviceGuidance_getAttact_S=function(t){return 200==t.code?(e.GameDatas.getIntance().beAttackInfo&&e.GameDatas.getIntance().beAttackInfo.id!=t.data.be_attacted_user.id?(e.GameDatas.getIntance().beAttackInfo=t.data.be_attacted_user,commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ChangeBeAttackUserInfo)):e.GameDatas.getIntance().beAttackInfo=t.data.be_attacted_user,void(e.GameDatas.getIntance().randomAttackInfo||(e.GameDatas.getIntance().randomAttackInfo=t.data.be_attacted_user))):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Luckydraw_getFriendRelations_S=function(t){return 200==t.code?void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.AttackHyListDataChange,t.data):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Luckydraw_toAttact_S=function(t){return 200==t.code?(e.GameDatas.getIntance().attackResData=t.data,commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.AttackEvent),t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info),void(e.GameDatas.getIntance().showAttackOrStolenNum-=1)):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.NoviceGuidance_toAttact_S=function(t){return 200==t.code?(e.GameDatas.getIntance().attackResData=t.data,commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.AttackEvent),t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info),void(e.GameDatas.getIntance().showAttackOrStolenNum-=1)):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Enemy_getEnemys_S=function(t){if(200==t.code){e.GameDatas.getIntance().erenBangList_=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelErenBangView");return n&&n.parent&&n.initShow().then(),void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.CourenDataChange)}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.NoviceGuidance_getEnemys_S=function(t){if(200==t.code){e.GameDatas.getIntance().erenBangList_=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelErenBangView");return n&&n.parent&&n.initShow().then(),void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.CourenDataChange)}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Enemy_asWanted_S=function(t){return 200==t.code?void(t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow(),e.GameRequestMgr.getIntance().Enemy_getEnemys_C())):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Shop_buyWantedToken_S=function(t){200==t.code&&t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow(),baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelErenBangView")&&baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelErenBangView").initShow()),viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.User_lookFriends_S=function(t){if(200==t.code){e.GameDatas.getIntance().friendList=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatView");return n&&n.initShow().then(),void commonUtils.EventMananger.getIntance().sendEvent("friends_have")}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.User_energy_S=function(t){return 200==t.code?(e.GameRequestMgr.getIntance().User_lookFriends_C(),void(t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()))):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.User_getApplyMessage_S=function(t){if(200==t.code){e.GameDatas.getIntance().friendMsgList=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatView");n&&(e.GameDatas.getIntance().friendMsgList.length>0?n.showRedIcon(!0):n.showRedIcon(!1));var a=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelHaoYouAddView");return void(a&&a.parent&&a.initShow().then())}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.News_getMail_S=function(t){if(200==t.code){e.GameDatas.getIntance().mailMsgList=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelXiaoXiView");return void(n&&n.parent&&n.initShow().then())}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.User_invitingAwards_S=function(t){if(200==t.code){e.GameDatas.getIntance().awardsList=t.data.awards;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelYaoQingJiangLiView");return void(n&&n.parent&&n.initShow().then())}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.User_reciveInvitingAwards_S=function(t){return 200==t.code?(t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()),viewTool.TipsUtil.getIntance().showTip("领取成功"),void e.GameDatas.getIntance().giftShowSomeData(t.data.appenddix)):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.User_visitUser_S=function(t){commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.showUserInfoLand,t.data.user_info,t.data.pasture),egret.setTimeout(function(){commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!1)},this,750)},t.prototype.User_doApplyMessage_S=function(t){e.GameRequestMgr.getIntance().User_getApplyMessage_C()},t.prototype.User_giveEnergy_S=function(t){return 200==t.code?(console.log("赠送成功！"),viewTool.TipsUtil.getIntance().showTip(""+t.info),void e.GameRequestMgr.getIntance().User_lookFriends_C()):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.User_getEnergy_S=function(t){return 200==t.code?(console.log("领取成功！"),viewTool.TipsUtil.getIntance().showTip(""+t.info),void e.GameRequestMgr.getIntance().User_lookFriends_C()):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Pasture_loadMiniShield_S=function(t){200==t.code&&(t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()),e.GameRequestMgr.getIntance().Pasture_getPastureInfo_C()),viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Luckydraw_getSteal_S=function(t){return 200==t.code?void(e.GameDatas.getIntance().beStolenInfo=t.data.be_stolen_users):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.NoviceGuidance_getSteal_S=function(t){return 200==t.code?void(e.GameDatas.getIntance().beStolenInfo=t.data.be_stolen_users):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.User_steal_S=function(e){200!=e.code&&viewTool.TipsUtil.getIntance().showTip(""+e.info)},t.prototype.User_searchUser_S=function(t){if(200!=t.code)viewTool.TipsUtil.getIntance().showTip(""+t.info);else{var n=t.data;if(n&&n.id){if(baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelHaoYouYanZhengView"))return baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelHaoYouYanZhengView").addUid_=n.id,void baseContent.PanelManager.getIntance().openTypeIntance(e.PanelHaoYouYanZhengView);baseContent.PanelManager.getIntance().openTypeIntance(e.PanelHaoYouYanZhengView,n.id)}}},t.prototype.User_getRankingList_S=function(t){return 200==t.code?(e.GameDatas.getIntance().rankList={friends:t.data.friends,world:t.data.world},void(baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelPaiHangBangView")&&baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelPaiHangBangView").initShow())):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.News_getMessage_S=function(t){return 200==t.code?(e.GameDatas.getIntance().msgListInfo=t.data,baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelXiaoXiView")&&baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelXiaoXiView").initShow(),void e.GameRequestMgr.getIntance().News_getMail_C()):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.News_handleMail_S=function(t){return 200==t.code?(e.GameRequestMgr.getIntance().News_getMail_C(),t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()),void e.GameDatas.getIntance().giftShowSomeData(t.data.appenddix)):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.User_addFriend_S=function(e){200==e.code,viewTool.TipsUtil.getIntance().showTip(""+e.info)},t.prototype.User_doSubmitFeedback_S=function(e){viewTool.TipsUtil.getIntance().showTip(""+e.info)},t.prototype.User_doConversionAward_S=function(t){e.GameDatas.getIntance().giftShowSomeData(t.data.appenddix),viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Activity_getEnergy_S=function(t){if(200==t.code){t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow());var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelJinMeiXiaoShi");n&&n.parent&&n.removeUs(),e.GameDatas.getIntance().giftShowSomeData(t.data.appenddix)}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Task_noviceGoal_S=function(t){if(200==t.code){e.GameDatas.getIntance().noviceGoalInfo=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelXinShouMuBiao");return void(n&&n.parent&&n.initShow().then())}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Task_receiveStageReward_S=function(t){200==t.code&&t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow(),e.GameRequestMgr.getIntance().Task_noviceGoal_C()),viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Task_receiveTaskReward_S=function(t){return 200==t.code?void(t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow(),e.GameRequestMgr.getIntance().Task_noviceGoal_C(),e.GameDatas.getIntance().giftShowSomeData(t.data.appenddix))):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Jigsaw_getJigsawInfo_S=function(t){if(200==t.code){e.GameDatas.getIntance().JigsawInfo=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelPingTuView");return n&&n.parent&&n.initShow().then(),baseContent.PanelManager.getIntance().removeSomeOnePanel("PanelHuoDongView"),void baseContent.PanelManager.getIntance().openTypeIntance(e.PanelPingTuView)}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Jigsaw_loadPiece_S=function(t){if(200==t.code){var n=window.localHere;return void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ShowSomeSuiPianCom,!0,t.data,n)}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Jigsaw_unloadPiece_S=function(t){200==t.code&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ShowSomeSuiPianCom,!1,t.data)},t.prototype.Jigsaw_completeJigsaw_S=function(t){if(200!=t.code)viewTool.TipsUtil.getIntance().showTip(""+t.info);else if(t.data.user_info){e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow();for(var n=0,a=t.data.appenddix.length;a>n;n++)e.GameDatas.getIntance().giftDataQueue.put({showType:e.GiftShwoType.gitType,data:{type:t.data.appenddix[n].type,num:t.data.appenddix[n].num},nextEventStr:n==a-1?"nextPingtu":null,eventData:null});e.GameDatas.getIntance().openGiftShow()}},t.prototype.Activity_overstep_S=function(t){if(200==t.code){e.GameDatas.getIntance().overStepInfo=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChaoYueJiangLi");return void(n&&n.parent&&n.initShow().then())}viewTool.TipsUtil.getIntance().showTip(""+t.info)
},t.prototype.Activity_overstepAward_S=function(t){return 200==t.code?(t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()),viewTool.TipsUtil.getIntance().showTip("领取成功"),void e.GameDatas.getIntance().giftShowSomeData(t.data.appenddix)):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Activity_starAward_S=function(t){if(200==t.code){e.GameDatas.getIntance().starAwardInfo=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelXinJiTeHui");return void(n&&n.parent&&n.initShow().then())}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Activity_getStarAward_S=function(t){return 200==t.code&&t.data.user_info?(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow(),e.GameRequestMgr.getIntance().Activity_starAward_C(),viewTool.TipsUtil.getIntance().showTip("领取成功！"),void e.GameDatas.getIntance().giftShowSomeData(t.data.appenddix)):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Activity_reciveComeBackGift_S=function(t){return 200==t.code&&t.data.user_info?(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow(),e.GameDatas.getIntance().huiGuiLibaoData_=t.data.appenddix,void e.GameDatas.getIntance().giftShowSomeData(t.data.appenddix)):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.redSpot_Brd=function(t){if(200==t.code){if(e.GameDatas.getIntance().redSpotInfo){t.data.affect_red_spot.antGrpBtn&&(ant_grp.AntGrpDatas.getIntance().redConfig=t.data.affect_red_spot.antGrpBtn);var n=function(e,t){for(var a in t)t[""+a]instanceof Object?n(e[""+a],t[""+a]):e[""+a]=t[""+a]};n(e.GameDatas.getIntance().redSpotInfo,t.data.affect_red_spot)}else e.GameDatas.getIntance().redSpotInfo=t.data.affect_red_spot,ant_grp.AntGrpDatas.getIntance().redConfig=t.data.affect_red_spot.antGrpBtn;commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ChangeMainViewRedSpotInfo);var a=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelPingTuView");a&&a.showMsgRedPoint(1==t.data.affect_red_spot.ptxiaoxiBtn),a=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelHuoDongView"),a&&a.initShowList()}},t.prototype.Activity_comeBackGift_Brd=function(t){200==t.code&&(console.log("-->"+t),t.data.appenddix&&(e.GameDatas.getIntance().huiGuiLibaoData_=t.data.appenddix,e.GameDatas.getIntance().huiGuiLibaoData_&&commonUtils.ResUtils.getInstance().loadGroupByGrpArr([e.GameDatas.panel_huiguilibao],null,function(){baseContent.PanelManager.getIntance().openTypeIntance(e.PanelHuiGuiLiBaoView)},self)))},t.prototype.beAttack_Brd=function(t){if(200==t.code){console.log("-->"+t),t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info);var n="";switch(t.data.attact_info.attact_status){case 0:case 1:return n="你防御了",void(baseContent.SceneLayerMgr.getIntance().getCurrenScene()&&baseContent.SceneLayerMgr.getIntance().getCurrenScene().showSomeOneMsg([{infoStr:n,typeColor:0},{infoStr:""+t.data.attact_info.name,typeColor:1},{infoStr:"的攻击。",typeColor:0}],e.MsgType.beAttackMsg));case 2:n="损坏了";break;case 3:n="摧毁了";break;case 3:n="被宠物格挡"}return void(baseContent.SceneLayerMgr.getIntance().getCurrenScene()&&baseContent.SceneLayerMgr.getIntance().getCurrenScene().showSomeOneMsg([{infoStr:""+t.data.attact_info.name,typeColor:1},{infoStr:"攻击了你的",typeColor:0},{infoStr:""+e.GameDatas.getIntance().getSomeObjByName(t.data.attact_info.build_id),typeColor:1}],e.MsgType.beAttackMsg))}viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.apply_Friend_Brd=function(e){commonUtils.EventMananger.getIntance().sendEvent("add_news_of_friends",!0)},t.prototype.beSteal_Brd=function(t){return 200==t.code?(console.log("-->"+t),t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info),void(baseContent.SceneLayerMgr.getIntance().getCurrenScene()&&baseContent.SceneLayerMgr.getIntance().getCurrenScene().showSomeOneMsg([{infoStr:t.data.steal_info.name,typeColor:1},{infoStr:"偷走了你的",typeColor:0},{infoStr:""+t.data.steal_info.barley,typeColor:1},{infoStr:"麦苗！",typeColor:0}],e.MsgType.beTouQuMsg))):void viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.systemMsg_Brd=function(e){return 200==e.code?void console.log("-->"+e):void viewTool.TipsUtil.getIntance().showTip(""+e.info)},t.prototype.system_Brd=function(e){return 200==e.code?void console.log("-->"+e):void viewTool.TipsUtil.getIntance().showTip(""+e.info)},t.prototype.giveEnergy_Brd=function(e){viewTool.TipsUtil.getIntance().showTip(""+e.info)},t.prototype.Luckydraw_getLuckyDraw_Brd=function(t){if(200!=t.code)console.log(t.info);else{e.GameDatas.getIntance().luckydraw_info=t.data;try{baseContent.SceneLayerMgr.getIntance().getCurrenScene().randPanel.setRandInfo()}catch(n){}}},t.prototype.Luckydraw_getRichMan_Brd=function(t){if(200!=t.code)console.log(t.info);else{e.GameDatas.getIntance().richManInfo=t.data;try{baseContent.SceneLayerMgr.getIntance().getCurrenScene().randPanel.setRandHeadInfo()}catch(n){}}},t.prototype.pasture_Brd=function(t){200==t.code&&(e.GameDatas.getIntance().pasture_list=t.data.pasture_list)},t.prototype.propsDrop_Brd=function(t){200==t.code&&(console.log("道具掉落-->"+JSON.stringify(t.data)),t.data.type=parseInt(t.data.type+""),t.data.type<10&&t.data.type>=0?e.GameDatas.getIntance().giftDataQueue.put({showType:e.GiftShwoType.suiPianType,data:t.data,nextEventStr:null,eventData:null}):t.data.type>=10&&t.data.type<=12&&(t.data.type+=1,e.GameDatas.getIntance().giftDataQueue.put({showType:e.GiftShwoType.gitType,data:t.data,nextEventStr:null,eventData:null})))},t.prototype.extraBarley_Brd=function(t){t.data.extra&&e.GameDatas.getIntance().giftDataQueue.put({showType:e.GiftShwoType.sharType,data:t.data.extra,nextEventStr:null,eventData:null})},t.prototype.icon_setting_Brd=function(t){t.data.icon_list&&(e.GameDatas.getIntance().iconList=t.data.icon_list)},t.prototype.PrivateMsg_Brd=function(t){if(200==t.code){e.GameDatas.getIntance().shiliaoPullMsg=t.data,e.GameDatas.getIntance().shiliaoRedPointList||(e.GameDatas.getIntance().shiliaoRedPointList=[]);var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatShiLiaoXiangQingView");if(n&&n.parent&&n.init(),e.GameDatas.getIntance().shiliaoPullMsg.from_uid!=e.GameDatas.getIntance().user_info.id){if(n&&n.parent&&e.GameDatas.getIntance().shiliaoPullMsg.from_uid==n.friendData.friend_info.id)return;commonUtils.EventMananger.getIntance().sendEvent("brd_show_red_point",t.data.from_uid)}}},t.prototype.Chat_sendPrivateMsg_S=function(e){200==e.code&&e.data.user_info},t.prototype.Chat_getPrivateList_S=function(t){if(200==t.code){e.GameDatas.getIntance().shiliaoHaoYouMsgList=t.data.chat_list;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatView");n&&n.addHaoYouChatItem()}},t.prototype.Chat_getPrivateDetail_S=function(t){if(200==t.code){e.GameDatas.getIntance().liaotianDetailInfo=t.data;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatShiLiaoXiangQingView");n?(n.recoverShow(e.GameDatas.getIntance().liaotianDetailInfo),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelChatShiLiaoXiangQingView)):baseContent.PanelManager.getIntance().openTypeIntance(e.PanelChatShiLiaoXiangQingView,e.GameDatas.getIntance().liaotianDetailInfo)}},t.prototype.Chat_delPrivateMsg_S=function(e){200==e.code},t.prototype.Chat_sendWorldMsg_S=function(t){200==t.code&&(e.GameDatas.getIntance().user_info=t.data.user_info),viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.WorldMsg_Brd=function(t){e.GameDatas.getIntance().worldInfoList||(e.GameDatas.getIntance().worldInfoList=[]),e.GameDatas.getIntance().worldInfoList.push(t.data);var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatView");n&&n.worldTalkShow().then();var a=!0;n=baseContent.PanelManager.getIntance().getPenelByPanelKey("AntFarmView"),n&&n.parent&&(a=!1),n=baseContent.PanelManager.getIntance().getPenelByPanelKey("AntRunView"),n&&n.parent&&(a=!1),n=baseContent.PanelManager.getIntance().getPenelByPanelKey("AntGrpView"),n&&n.parent&&(a=!1),n=baseContent.PanelManager.getIntance().getPenelByPanelKey("GamePetView"),n&&n.parent&&(a=!1),a&&e.GameRunHorseView.getIntance().showSomeMessage(t.data)},t.prototype.Chat_getSwappableList_S=function(t){if(200==t.code){if(e.GameDatas.getIntance().today_complete_times=t.data.today_complete_times,e.GameDatas.getIntance().swapListInfo=t.data.prop,e.GameDatas.getIntance().swapChangInfo&&2==e.GameDatas.getIntance().swapChangInfo.swapChangFrom){e.GameDatas.getIntance().swapChangInfo.swapChangFrom=-1;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatFaQiJiaoHuan");return n&&n.initShow(e.GameDatas.getIntance().swapChangInfo),void baseContent.PanelManager.getIntance().openTypeIntance(e.PanelChatFaQiJiaoHuan,e.GameDatas.getIntance().swapChangInfo)}var a=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatShiLiaoXiangQingView");a&&a.showSwapProp()}},t.prototype.Chat_sendSwapRequest_S=function(t){if(200==t.code){var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelPingTuGiveSiftView");n&&n.parent&&n.removeUs();baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelPingTuView");n&&n.parent&&e.GameRequestMgr.getIntance().Jigsaw_getJigsawInfo_C()}else viewTool.TipsUtil.getIntance().showTip(""+t.info)},t.prototype.Chat_getSwapDetail_S=function(e){},t.prototype.Chat_delSwapRequest_S=function(e){},t.prototype.Chat_refuseSwapRequest_S=function(e){if(200==e.code){var t=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatShiLiaoXiangQingView");t&&t.recoverScoller()}},t.prototype.Chat_completeSwapRequest_S=function(e){200!=e.code&&viewTool.TipsUtil.getIntance().showTip(""+e.info)},t.prototype.Shop_buyTrumpet_S=function(t){if(200!=t.code)viewTool.TipsUtil.getIntance().showTip(""+t.info);else{e.GameDatas.getIntance().user_info=t.data.user_info,viewTool.TipsUtil.getIntance().showTip("购买成功");var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatView");n&&n.labaRealTimeNum(),baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()}},t.prototype.Chat_reportingUser_S=function(e){200==e.code&&(e.data.report_id&&ant_grp.AntGrpDatas.getIntance().reportingUserIdS.set(e.data.report_id,!0),viewTool.TipsUtil.getIntance().showTip("举报成功"))},t.prototype.User_delFriends_S=function(e){200==e.code},t.prototype.Jigsaw_givePiece_S=function(t){200==t.code?(commonUtils.EventMananger.getIntance().sendEvent("Jigsaw_givePiece_S_200"),viewTool.TipsUtil.getIntance().showTip("赠送成功！"),e.GameRequestMgr.getIntance().Jigsaw_getJigsawInfo_C()):viewTool.TipsUtil.getIntance().showTip(t.msg)},t.prototype.Jigsaw_getJigsawMessage_S=function(t){if(200==t.code){e.GameDatas.getIntance().siftMsgInfoList=t.data.messages;var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelPingTuMsgView");n&&n.initShow().then(),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelPingTuMsgView)}else viewTool.TipsUtil.getIntance().showTip(t.msg)},t.prototype.newFriend_Brd=function(t){200==t.code&&e.GameRequestMgr.getIntance().User_lookFriends_C()},t.prototype.Pet_petInit_S=function(t){200==t.code&&(e.GameDatas.getIntance().user_info=t.data.user_info,commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.gamePetConstrolEvent,game_pet.GamePetStepType.haFeiViewInfo))},t.prototype.Pet_petLists_S=function(t){200==t.code&&(e.GameDatas.getIntance().pet_infos=t.data,baseContent.SceneLayerMgr.getIntance().getCurrenScene()&&baseContent.SceneLayerMgr.getIntance().getCurrenScene().petBtn&&baseContent.SceneLayerMgr.getIntance().getCurrenScene().petBtn.initShow())},t.prototype.Pet_petHatch_S=function(t){if(200==t.code){e.GameDatas.getIntance().pet_infos.pet_list=t.data.pet_list,console.log(e.GameDatas.getIntance().pet_infos.pet_list);for(var n=0,a=e.GameDatas.getIntance().pet_infos.pet_list.length;a>n;n++)e.GameDatas.getIntance().pet_infos.pet_list[n].pet_id==t.data.change_pet_id&&(e.GameDatas.getIntance().fuhuaPetInfo=e.GameDatas.getIntance().pet_infos.pet_list[n]);return void(t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info))}viewTool.TipsUtil.getIntance().showTip(t.info)},t.prototype.Pet_petCookie_S=function(t){if(200==t.code){e.GameDatas.getIntance().pet_infos.pet_snacks=t.data.pet_snacks;for(var n=0,a=e.GameDatas.getIntance().pet_infos.pet_list.length;a>n;n++)e.GameDatas.getIntance().pet_infos.pet_list[n].pet_id==t.data.change_pet_id&&(e.GameDatas.getIntance().pet_infos.pet_list[n]=t.data.change_pet_info,commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.gamePetViewEatingSucc,t.data.change_pet_id,e.GameDatas.getIntance().pet_infos.pet_list[n],2));return commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.gamePetViewIconNumChange),viewTool.TipsUtil.getIntance().showTip("喂食成功！"),void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.gamePetConstrolEvent,game_pet.GamePetStepType.endViewInfo)}viewTool.TipsUtil.getIntance().showTip(t.info)},t.prototype.Pet_petWater_S=function(t){if(200==t.code){e.GameDatas.getIntance().pet_infos.pet_pnvu=t.data.pet_pnvu;for(var n=0,a=e.GameDatas.getIntance().pet_infos.pet_list.length;a>n;n++)e.GameDatas.getIntance().pet_infos.pet_list[n].pet_id==t.data.change_pet_id&&(e.GameDatas.getIntance().pet_infos.pet_list[n]=t.data.change_pet_info,commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.gamePetViewEatingSucc,t.data.change_pet_id,e.GameDatas.getIntance().pet_infos.pet_list[n],1));return commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.gamePetViewIconNumChange),viewTool.TipsUtil.getIntance().showTip("喂食成功！"),void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.gamePetConstrolEvent,game_pet.GamePetStepType.chongWuUpInfo)}viewTool.TipsUtil.getIntance().showTip(t.info)},t.prototype.petUpgrade_Brd=function(t){200==t.code&&(console.log("宠物升级-->"+t.data.upgrade_pet_id),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.petUpgradeEvent,t.data.upgrade_pet_id))},t.prototype.Pet_goToBattle_S=function(t){return 200==t.code?(e.GameDatas.getIntance().pet_infos.pet_list=t.data.pet_list,commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.goToBattlSucc,t.data.change_pet_id),viewTool.TipsUtil.getIntance().showTip("上阵成功！"),void(t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info))):void viewTool.TipsUtil.getIntance().showTip(t.info)},t.prototype.Pet_buyFoods_S=function(t){return 200==t.code?(e.GameDatas.getIntance().pet_infos.pet_pnvu=t.data.pet_pnvu,e.GameDatas.getIntance().pet_infos.pet_snacks=t.data.pet_snacks,commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.gamePetViewIconNumChange),viewTool.TipsUtil.getIntance().showTip("购买成功！"),void(t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()))):void viewTool.TipsUtil.getIntance().showTip(t.info)},t.prototype.PastureWorker_getWorkerList_S=function(t){200==t.code&&(e.GameDatas.getIntance().mine_wokers_infos=t.data,egret.setTimeout(function(){commonUtils.ResUtils.getInstance().isGroupLoaded(e.GameDatas.ant_farm)&&baseContent.PanelManager.getIntance().openTypeIntance(ant_farm.AntFarmView)},this,500),e.GameDatas.getIntance().checkIsCanBuyOneWorker())},t.prototype.PastureWorker_unlockWorker_S=function(t){if(200==t.code){t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()),e.GameDatas.getIntance().mine_wokers_infos.total_output=t.data.total_output,e.GameDatas.getIntance().mine_wokers_infos.barley_pool=t.data.barley_pool;for(var n=void 0,a=0,i=e.GameDatas.getIntance().mine_wokers_infos.mine_workers.length;i>a;a++)if(e.GameDatas.getIntance().mine_wokers_infos.mine_workers[a].pasture_id==t.data.pasture_id){n=e.GameDatas.getIntance().mine_wokers_infos.mine_workers[a],e.GameDatas.getIntance().mine_wokers_infos.mine_workers[a].unlock_workers_num+=1;break}return n||(n={pasture_id:t.data.pasture_id,output:t.data.worker_info.output,next_output:0,unlock_workers_num:1},e.GameDatas.getIntance().mine_wokers_infos.mine_workers.push(n)),console.log(JSON.stringify(e.GameDatas.getIntance().mine_wokers_infos.mine_workers)),commonUtils.EventMananger.getIntance().sendEvent(ant_farm.AntFarmEvent.OpenSomeOneWorker,t.data.worker_info,t.data.pasture_id),void e.GameDatas.getIntance().openGiftShow()}viewTool.TipsUtil.getIntance().showTip(t.info)},t.prototype.PastureWorker_collectBarley_S=function(t){200==t.code&&t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow(),commonUtils.EventMananger.getIntance().sendEvent(ant_farm.AntFarmEvent.GetGlodGrpGoldSecc))},t.prototype.AntRun_init_S=function(t){var n=this;if(200==t.code){e.GameDatas.getIntance().Ant_RunInfo=t.data;var a=baseContent.PanelManager.getIntance().getPenelByPanelKey("AntRunPetListView");if(a&&a.parent)return void a.initShowSomePet();ant_run.AntRunView.block_setting=t.data.block_setting;var i=void 0,o=ant_run.AntRunView.gameIsFirstCompelet;i=o?[e.GameDatas.ant_run]:[e.GameDatas.ant_run,e.GameDatas.newControl],baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr(i,null,function(){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),egret.setTimeout(function(){baseContent.PanelManager.getIntance().openTypeIntance(ant_run.AntRunPetListView),baseContent.PanelManager.getIntance().removeSomeOnePanel("PanelHuoDongView"),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.CloseShowChaoPing,!1),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.CloseShowMainView,!1),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!1)},n,750)},{})}else viewTool.TipsUtil.getIntance().showTip(t.info)},t.prototype.AntRun_enterGame_S=function(t){if(200==t.code){t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow());var n=new ant_run.AntRunView;n.pet_id=t.data.pet_id,n.gameTimeNum=t.data.left_time,baseContent.PanelManager.getIntance().openPanelInstance(n)}else viewTool.TipsUtil.getIntance().showTip(t.info)},t.prototype.AntRun_skipBlock_S=function(e){var t=baseContent.PanelManager.getIntance().getPenelByPanelKey("AntRunView");200==e.code?t&&t.HeadView&&(t.HeadView.gold=e.data.award_barley,t.HeadView.mi=e.data.distance):t&&t.HeadView&&(t.gameTimeNum=0)},t.prototype.AntRun_gameOver_S=function(t){if(200==t.code){t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow());var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("AntRunView"),a=new ant_run.AntRunEndView({gold:n.HeadView.gold,mi:n.HeadView.mi,mxContinueStep:n.MaxContinueStep});egret.setTimeout(function(){baseContent.PanelManager.getIntance().openPanelInstance(a)},this,1e3)}else viewTool.TipsUtil.getIntance().showTip(t.info)},t.prototype.AntRun_reconnect_S=function(t){if(200==t.code){t.data.user_info&&(e.GameDatas.getIntance().user_info=t.data.user_info,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow());var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("AntRunView");if(n&&n.HeadView&&(n.HeadView.gold=t.data.award_barley,n.HeadView.mi=t.data.distance,n.gameTimeNum=t.data.left_time,n.MaxContinueStep=t.data.max_continue_step),t.data.left_time<=0){var a=new ant_run.AntRunEndView({gold:n.HeadView.gold,mi:n.HeadView.mi,mxContinueStep:n.MaxContinueStep});egret.setTimeout(function(){baseContent.PanelManager.getIntance().openPanelInstance(a)},this,1e3)}}else viewTool.TipsUtil.getIntance().showTip(t.info)},t}();e.GameResponseMgr=t,__reflect(t.prototype,"game.GameResponseMgr",["net.ResponseMgrInterface"])}(game||(game={}));var game;!function(e){var t=function(){function t(){this.requestPools=commonUtils.ObjectPool.getPool("egret.HttpRequest"),this.dateD_=new Date}return t.getIntance=function(){return t.instance_||(t.instance_=new t),t.instance_},t.prototype.init=function(){},t.prototype.registRevMsgHandle=function(e){this.rev=e},t.prototype.getTimeStr=function(){var e=this;e.dateD_=new Date;var t=commonUtils.DateTool.zeroShow(e.dateD_.getHours())+":"+commonUtils.DateTool.zeroShow(e.dateD_.getMinutes())+":"+commonUtils.DateTool.zeroShow(e.dateD_.getSeconds())+"-["+e.dateD_.getTime()+"]";return t},t.prototype.get=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var a=this;console.log("get url["+a.getTimeStr()+"]:"+e);var i=a.requestPools.getOneObj();i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.open(e,egret.HttpMethod.GET);var o=function(e){var t=e.currentTarget;console.log("requet.response["+a.getTimeStr()+"]:"+t.response);var i=JSON.parse(t.response);n?n(i):i.code?a.rev[i.cmd].call(a.rev,i):i.info?viewTool.TipsUtil.getIntance().showTip(i.info):viewTool.TipsUtil.getIntance().showTip("error"),t.removeEventListener(egret.Event.COMPLETE,o,a),a.requestPools.recoveryObj(t)};i.addEventListener(egret.Event.COMPLETE,o,a),i.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){console.log("error : event="+e),viewTool.TipsUtil.getIntance().showTip("error")},this),i.send()},t.prototype.post=function(e,t){void 0===t&&(t=null);var n=this;console.log("post url["+n.getTimeStr()+"]:"+e);var a=new egret.HttpRequest;a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.open(e,egret.HttpMethod.POST);var i=function(e){var t=e.currentTarget;console.log("requet.response["+n.getTimeStr()+"]:"+t.response);var a=JSON.parse(t.response);console.log(a),a.code?n.rev[a.cmd].call(n.rev,a):a.info?viewTool.TipsUtil.getIntance().showTip(a.info):viewTool.TipsUtil.getIntance().showTip("error"),t.removeEventListener(egret.Event.COMPLETE,i,n),n.requestPools.recoveryObj(t)};a.addEventListener(egret.Event.COMPLETE,i,n),a.once(egret.IOErrorEvent.IO_ERROR,function(e){console.log("error : event="+e),viewTool.TipsUtil.getIntance().showTip("error")},this),a.send()},t.prototype.sendMsg=function(t,n,a){void 0===a&&(a=0);var i={cmd:t,sig:e.GameNetUrlData.sig,data:n},o=commonUtils.ObjTool.objectToParams(i);switch(a){case 0:this.post(e.GameNetUrlData.urlNet+"?"+o);break;case 1:this.get(e.GameNetUrlData.urlNet+"?"+o)}},t}();e.GameServerHttpMgr=t,__reflect(t.prototype,"game.GameServerHttpMgr",["net.ServerMgrInterface"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.top=t.left=t.bottom=t.right=0,t.init(),t}return __extends(t,e),t.prototype.init=function(){var e=this;e.rect=new eui.Rect,e.rect.fillColor=0,e.rect.fillAlpha=.3,e.rect.top=e.rect.bottom=e.rect.left=e.rect.right=0,e.addChild(e.rect),e.loading_animationDisply||(e.loading_animationDisply=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("loading_animation","MovieClip","loading_animation"),e.loading_animationDisply.name="loading_animation",e.loading_animationDisply.x=commonUtils.StageUtils.getIntance().stage.stageWidth/2,e.loading_animationDisply.y=commonUtils.StageUtils.getIntance().stage.stageHeight/2+50,e.loading_animationDisply.animation.play("newAnimation",0),e.loading_animationDisply.scaleX=e.loading_animationDisply.scaleY=1.2),e.addChild(e.loading_animationDisply)},t.prototype.enable=function(e){e.type==egret.Event.ADDED_TO_STAGE&&egret.setTimeout(function(){console.log("最大保持30s时间！"),baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView")},this,3e4)},t}(eui.Component);e.GameServerLoadingView=t,__reflect(t.prototype,"game.GameServerLoadingView")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.url="ws://211.149.164.135:8282",e.isOpen=!1,e}return __extends(n,t),n.getIntance=function(){return n.instance_||(n.instance_=new n),n.instance_},n.prototype.start=function(e,t){void 0===e&&(e=null),void 0===t&&(t=null),this.onOpenCall=e,this.openObj=t,this.init()},n.prototype.init=function(){this.registRevMsgHandle(e.GameResponseMgr.getIntance()),this.startWebSocketServerByUrl(this.url,egret.WebSocket.TYPE_STRING,platform)},n.prototype.onWXReceiveMessage=function(e){var t=n.getIntance();console.log("ws rec:["+t.getTimeStr()+"]:"+e.data),t.revMsgHandle&&t.revMsgHandle.handleMsg(e.data)},n.prototype.getTimeStr=function(){var e=new Date,t=commonUtils.DateTool.zeroShow(e.getHours())+":"+commonUtils.DateTool.zeroShow(e.getMinutes())+":"+commonUtils.DateTool.zeroShow(e.getSeconds())+"-["+e.getTime()+"]";return t},n.prototype.onSocketOpen=function(){t.prototype.onSocketOpen.call(this),commonUtils.EventMananger.getIntance().sendEvent(e.GameServerMgr.serverOpenEvent);var n=e.GameServerMgr.getIntance();e.GameDatas.getIntance().code_wx&&e.GameDatas.getIntance().wx_auth_msg&&egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME&&e.GameRequestMgr.getIntance().User_getRdsession_C(),egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME||e.GameDatas.getIntance().token||e.GameRequestMgr.getIntance().User_getToken_C(),n.isOpen=!0;try{n.onOpenCall&&n.openObj&&(n.onOpenCall.apply(n.onOpenCall,n.openObj),n.openObj=null,n.onOpenCall=null),egret.Tween.removeTweens(n)}catch(a){}n.reconnecttime&&(n.reconnecttime=null,baseContent.SceneLayerMgr.getIntance().getCurrenScene()&&(baseContent.SceneLayerMgr.getIntance().getCurrenScene().randPanel.isEnd=!0)),baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView")},n.prototype.onSocketClose=function(){t.prototype.onSocketClose.call(this);var n=e.GameServerMgr.getIntance();n.isOpen=!1,viewTool.TipsUtil.getIntance().showTip("网络异常"),baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),e.GameDatas.getIntance().user_info&&(n.onOpenCall=e.GameRequestMgr.getIntance().User_getUserinfo_C,n.openObj=e.GameRequestMgr.getIntance());try{egret.Tween.removeTweens(n)}catch(a){}egret.Tween.get(n,{loop:!0}).wait(5e3).call(n.restart,n)},n.prototype.onSocketError=function(){t.prototype.onSocketError.call(this),this.isOpen=!1,viewTool.TipsUtil.getIntance().showTip("网络异常")},n.prototype.reLoadGame=function(){egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME?e.GameServerMgr.getIntance().socketTast?e.GameRequestMgr.getIntance().User_getUserinfo_C():e.GameServerMgr.getIntance().startWebSocketServerByUrl(e.GameServerMgr.getIntance().url,egret.WebSocket.TYPE_STRING,platform):e.GameServerMgr.getIntance().socket?e.GameRequestMgr.getIntance().User_getUserinfo_C():e.GameServerMgr.getIntance().startWebSocketServerByUrl(e.GameServerMgr.getIntance().url,egret.WebSocket.TYPE_STRING,platform)},n.prototype.restart=function(){return this.reconnecttime||(this.reconnecttime=0),this.reconnecttime>=30?(egret.Tween.removeTweens(this),void console.error("restart fail")):(this.startWebSocketServerByUrl(this.url,egret.WebSocket.TYPE_STRING,platform),void this.reconnecttime++)},n.prototype.sendMsg=function(n,a){void 0===a&&(a=null);var i={cmd:n,sig:e.GameNetUrlData.sig,data:a};t.prototype.sendDataStr.call(this,i)},n.prototype.stopWebSocketServer=function(){egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME?e.GameServerMgr.getIntance().socketTast&&(e.GameServerMgr.getIntance().socketTast.close(),e.GameServerMgr.getIntance().socketTast=null):(this.socket.close(),this.socket=null)},n.prototype.registRevMsgHandle=function(e){this.revMsgHandle=e},n.serverOpenEvent="serverOpenEvent",n}(net.MyWebSocket);e.GameServerMgr=t,__reflect(t.prototype,"game.GameServerMgr",["net.ServerMgrInterface"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.getInstance=function(){return t.instance_||(t.instance_=new t),t.instance_},t.playBgMusic=function(e,n){function a(e){t.getInstance()._bgSound=e,t.getInstance()._bgSoundChanel=t.getInstance()._bgSound.play(0,-1),t.getInstance()._bgSoundChanel.volume=t.getInstance().bgVolume}function i(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t){var n=RES.getRes(e);t(n)})]})})}var o=this;if(void 0===n&&(n="antGame_bgMusic_mp3"),t.getInstance()._musicSelect)if(t.getInstance().resName!=n&&(t.getInstance()._bgSound&&(t.getInstance()._bgSoundChanel&&(t.getInstance()._bgSoundChanel.stop(),t.getInstance()._bgSoundChanel=null),t.getInstance()._bgSound=null),t.getInstance().resName=n),t.getInstance()._bgSound)if(1==e){if(t.getInstance()._bgSoundChanel)return;t.getInstance()._bgSoundChanel=t.getInstance()._bgSound.play(0,-1),t.getInstance()._bgSoundChanel.volume=t.getInstance().bgVolume}else t.getInstance()._bgSoundChanel&&(t.getInstance()._bgSoundChanel.stop(),t.getInstance()._bgSoundChanel=null);else RES.hasRes(n)?i(n).then(function(e){var t;t=e,t?a(t):RES.getResAsync(n,a,o)}):(egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME&&(n=romoteUrl+n),RES.getResByUrl(n,a,this,RES.ResourceItem.TYPE_SOUND))},t.prototype.playPanelOpen=function(e){void 0===e&&(e="panel_open_mp3"),t.playSomeSound(e)},t.prototype.playPanelClose=function(e){void 0===e&&(e="panel_close_mp3"),t.playSomeSound(e)},t.playBuild=function(e){void 0===e&&(e="upgrade_build_mp3"),t.playSomeSound(e)},t.playBuildComplet=function(e){void 0===e&&(e="upgrade_build_done_3_mp3"),t.playSomeSound(e)},t.playWheelButtonDown=function(e){void 0===e&&(e="wheel_button_down_mp3"),t.playSomeSound(e)},t.playStartWheel=function(e){void 0===e&&(e="wheel_rot_end_mp3"),t.playSomeSound(e)},t.playOpenOrCloseLeftPanel=function(e){e?t.playSomeSound("open_left_panel_mp3",.7):t.playSomeSound("close_left_panel_mp3",.7)},t.playWheelAttack=function(e){void 0===e&&(e="wheel_attack_prepare_mp3"),t.playSomeSound(e)},t.clickTargetCenter=function(e){void 0===e&&(e="click_target_center_mp3"),t.playSomeSound(e)},t.playWheelSteal=function(e){void 0===e&&(e="wheel_steal_mp3"),t.playSomeSound(e)},t.playToStealView=function(e){void 0===e&&(e="wheel_steal_gone_mp3"),t.playSomeSound(e)},t.playStealResult=function(e){e?t.playSomeSound("steal_result_mp3"):t.playSomeSound("steal_miss_king_mp3")},t.playWheelShieldGot=function(e){void 0===e&&(e="wheel_shield_got_mp3"),t.playSomeSound(e)},t.playWheeEngry=function(e){void 0===e&&(e="wheel_got_item_mp3"),t.playSomeSound(e)},t.playWheelGlod=function(e){void 0===e&&(e="wheel_gold_med_mp3"),t.playSomeSound(e)},t.playEnterAttackView=function(e){void 0===e&&(e="attack_aim_at_target_mp3"),t.playSomeSound(e)},t.playAttackShoot=function(e){void 0===e&&(e="cannon_shoot_mp3"),t.playSomeSound(e)},t.playBomeFly=function(e){void 0===e&&(e="bomb_flying_mp3"),t.playSomeSound(e)},t.playBomeExplode=function(e){void 0===e&&(e="bomb_explode_mp3"),t.playSomeSound(e)},t.playBomeSheild=function(e){void 0===e&&(e="cannon_hit_sheild_mp3"),t.playSomeSound(e)},t.playSomeSound=function(e,n){function a(a){t.getInstance().soundPools[e]=a;var i=t.getInstance().soundPools[e].play(0,1);i.volume=n}function i(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t){var n=RES.getRes(e);t(n)})]})})}var o=this;if(void 0===n&&(n=1),t.getInstance()._soundSelect){if(egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME){var s=RES,r=s.config.getResource(e),c=romoteUrl+r.url,l=platform.createInnerAudioContext();return l.onStop(function(){l=null}),l.volume=n,l.src=c,void l.play()}if(t.getInstance().soundPools[e]){var g=t.getInstance().soundPools[e].play(0,1);return void(g.volume=n)}RES.hasRes(e)?i(e).then(function(t){var n;n=t,n?a(n):RES.getResAsync(e,a,o)}):(egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME&&(e=romoteUrl+e),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_SOUND))}},t}(soundCom.BaseGameSoundMgr);e.GameSoundMgr=t,__reflect(t.prototype,"game.GameSoundMgr")}(game||(game={}));var game;!function(e){var t=function(){function t(){}return t.toForworadTaskTypeByView=function(t,n){var a=this,i=baseContent.PanelManager.getIntance().getPenelByPanelKey(n);
switch(i&&i.removeUs(),t){case 1:commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.EnterRandViewOrNongChangViewEvent,"nongchang");break;case 2:case 3:case 4:break;case 5:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelYaoQingJiangLiView);break;case 6:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelSignInView);break;case 7:break;case 8:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelHaoYouAddView);break;case 9:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelHaoYouView);break;case 10:case 11:e.GameRequestMgr.getIntance().Jigsaw_getJigsawInfo_C();break;case 12:e.GameRequestMgr.getIntance().PastureWorker_getWorkerList_C(),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!0),baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView");var o=[e.GameDatas.ant_farm],s=egret.localStorage.getItem("ant_farm_control");s||o.push(e.GameDatas.newControl),commonUtils.ResUtils.getInstance().loadGroupByGrpArr(o,null,function(){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),e.NewControlViewMgr.getIntance().init(),egret.setTimeout(function(){e.GameDatas.getIntance().mine_wokers_infos&&baseContent.PanelManager.getIntance().openTypeIntance(ant_farm.AntFarmView)},a,500)},this);break;case 13:ant_grp.AntGrpRequestMgr.getIntance().AntGroup_mineGroup_C(),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!0),baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr([e.GameDatas.ant_grp],null,function(){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),egret.setTimeout(function(){baseContent.PanelManager.getIntance().openTypeIntance(ant_grp.AntGrpView,"open")},a,500)},this);break;case 22:case 23:case 14:e.GameRequestMgr.getIntance().Pet_petLists_C(),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!0),baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr([e.GameDatas.game_pet],null,function(){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),egret.setTimeout(function(){e.GameDatas.getIntance().pet_infos&&baseContent.PanelManager.getIntance().openTypeIntance(game_pet.GamePetView),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.CloseShowChaoPing,!1),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.CloseShowMainView,!1),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!1)},a,750)},this);break;case 15:ant_grp.AntGrpRequestMgr.getIntance().AntGroup_mineGroup_C(),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!0),baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr([e.GameDatas.ant_grp],null,function(){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),egret.setTimeout(function(){baseContent.PanelManager.getIntance().openTypeIntance(ant_grp.AntGrpView,{type:"open",showIndex:1})},a,500)},this);break;case 16:ant_grp.AntGrpRequestMgr.getIntance().AntGroup_dailyBenefits_C();break;case 17:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelJinMeiXiaoShi);break;case 18:ant_grp.AntGrpRequestMgr.getIntance().AntGroup_shopList_C();break;case 19:break;case 20:e.GameDatas.getIntance().user_info.in_battle_pet_id&&e.GameRequestMgr.getIntance().AntRun_init_C();break;case 21:e.GameNetUrlData.isUseNet&&e.GameRequestMgr.getIntance().Enemy_getEnemys_C(),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelErenBangView)}},t}();e.GameViewMgr=t,__reflect(t.prototype,"game.GameViewMgr")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameMainHeadDaimedViewSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.addEvent()},t.prototype.setGDaimedTextNum=function(e){commonUtils.NumberTool.showSomeLableAddNumberAnimation(this.showDaimedText,parseInt(this.showDaimedText.text),e,500,0)},t.prototype.addEvent=function(){this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},t.prototype.touchHanle=function(e){switch(e.target){case this.addBtn:viewTool.TipsUtil.getIntance().showTip("暂未开启")}},t}(eui.Component);e.GameMainHeadDaimedView=t,__reflect(t.prototype,"game.GameMainHeadDaimedView")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameMainHeadGlodViewSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.addEvent()},t.prototype.addEvent=function(){this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},t.prototype.touchHanle=function(e){switch(e.target){case this.addBtn:viewTool.TipsUtil.getIntance().showTip("暂未开启")}},t.prototype.setGlodTextNum=function(e){commonUtils.NumberTool.showSomeLableAddNumberAnimation(this.showGlodText,parseInt(this.showGlodText.text),e,500)},t.prototype.setStartNum=function(e){e>99?this.startNumS.size=16:e>999?this.startNumS.size=10:this.startNumS.size=24,this.startNumS.text=e+""},t.prototype.setPaiInfo=function(e){this.paiGrp.removeChildren(),e=e>3?3:e;for(var t=1;4>t;t++){var n=new eui.Image;e>=t?n.source="antGame_mainView_icon_hudun0_png":n.source="antGame_mainView_icon_hudun1_png",this.paiGrp.addChild(n)}},t.prototype.getSomeOnePaiOfGlobelPoint=function(e){if(e>this.paiGrp.numChildren-1||0>e)return null;var t=new egret.Point,n=e>0?40*(e-1)+36:36;return t=this.paiGrp.localToGlobal(n,0,t)},t}(eui.Component);e.GameMainHeadGlodView=t,__reflect(t.prototype,"game.GameMainHeadGlodView")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.touchEnabled=!0,e.touchChildren=!1,e.skinName="GameStratButtonSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){var e=this;if(!e.animat){e.animat=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("button_animation","MovieClip","button_animation"),e.addChild(e.animat),e.animat.name="button_animation",e.animat.x=140.5,e.animat.y=106,e.animat.scaleX=e.animat.scaleY=1/.75;var t=function(){egret.Tween.get(e.animat).wait(2e3).call(function(){e.animat.animation.play("newAnimation",1),egret.Tween.removeTweens(e.animat)},e)};e.animat.addEventListener(egret.Event.COMPLETE,t,e)}e.animat.animation.play("newAnimation",1),e.animat.visible=!0,e.btn.visible=!1,this.addEvent()},n.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.startBtn,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.startBtn,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.startBtn,this)},n.prototype.startBtn=function(t){e.GameSoundMgr.playWheelButtonDown();var n=this;switch(commonUtils.EventMananger.getIntance().sendEvent(commonUtils.GlobalEvent.ClickButton),t.type){case egret.TouchEvent.TOUCH_BEGIN:n.clickTime||(n.clickTime=(new Date).getTime(),egret.Tween.removeTweens(n.btn),egret.Tween.get(n.btn).wait(3e3).call(function(){n.clickTime&&(e.GameDatas.getIntance().isAutoRand=!0),egret.Tween.removeTweens(n.btn)},n)),n.animat.visible=!1,n.endImg.visible=!0,e.GameNetUrlData.isUseNet?baseContent.SceneLayerMgr.getIntance().getCurrenScene().randPanel.isEnd&&(baseContent.SceneLayerMgr.getIntance().getCurrenScene().randPanel.isEnd=!1,e.GameRequestMgr.getIntance().Luckydraw_clickLuckyDraw_C()):baseContent.SceneLayerMgr.getIntance().getCurrenScene().showRandPan(Math.floor(10*Math.random())+1,"恭喜你");break;case egret.TouchEvent.TOUCH_END:n.animat.visible=!0,n.endImg.visible=!1,n.clickTime=null,e.GameDatas.getIntance().isAutoRand=!1;break;case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:n.animat.visible=!0,n.endImg.visible=!1,n.clickTime=null,e.GameDatas.getIntance().isAutoRand=!1}},n.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.startBtn,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.startBtn,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.startBtn,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.startBtn,this)},n.prototype.destroy=function(){this.removeEvent()},n}(eui.Component);e.GameStratButton=t,__reflect(t.prototype,"game.GameStratButton")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="PanelBarSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.initDataShow=function(e){if(this.config=e,this.config){if(0==e.per)return this.barImg.visible=!1,this.textShow.text=this.config.texts,void(this.cacheAsBitmap=!0);this.barImg.visible=!0,e.per=e.per>1?1:e.per,this.barImg.width=Math.floor(252*this.config.per),this.barImg.width=this.barImg.width<22?22:this.barImg.width,this.textShow.text=this.config.texts}this.cacheAsBitmap=!0},t}(eui.Component);e.PanelBar=t,__reflect(t.prototype,"game.PanelBar")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.initSize(),t.init(),t.addEventListener(egret.Event.ADDED_TO_STAGE,function(){egret.Tween.removeTweens(t.paoDan),egret.Tween.get(t.paoDan,{loop:!0}).to({rotation:360},2e3,egret.Ease.sineIn)},t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,function(){egret.Tween.removeTweens(t.paoDan)},t),t}return __extends(t,e),t.prototype.initSize=function(){var e=this;e.width=100,e.height=100,e.name="GameAttackBullet"},t.prototype.init=function(){this.paoDan=new eui.Image,this.paoDan.source="game_mainView_gognjijiemian_paodan_png",this.paoDan.horizontalCenter=this.paoDan.verticalCenter=0,this.paoDan.anchorOffsetX=this.paoDan.anchorOffsetY=50,this.addChild(this.paoDan)},t.prototype.showBeiSaiErMove=function(e,t,n,a){var i=this;i.startPoint_=e,i.centerPoint_=t,i.endPoint_=n,egret.Tween.get(i).to({factor:1},a,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(i)},i)},Object.defineProperty(t.prototype,"factor",{get:function(){return 0},set:function(e){var t=this;t.x=(1-e)*(1-e)*t.startPoint_.x+2*e*(1-e)*t.centerPoint_.x+e*e*t.endPoint_.x,t.y=(1-e)*(1-e)*t.startPoint_.y+2*e*(1-e)*t.centerPoint_.y+e*e*t.endPoint_.y},enumerable:!0,configurable:!0}),t}(egret.DisplayObjectContainer);e.GameAttackBullet=t,__reflect(t.prototype,"game.GameAttackBullet")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.width=400,e.height=700,e.skinName="GameCaiFuHaoDaoYuSkin",e}return __extends(n,t),n.prototype.setData=function(t){var n=this;n.cacheAsBitmap=!1,n.daoyuAll.scaleX=n.daoyuAll.scaleY=.5,n.head_icon.isSelect=!1,n.head_icon.touchEnabled=!0,n.stolenInfo_=t.stolenInfo,e.GameDatas.getIntance().is_new_user?n.head_icon.setData({headUrl:t.stolenInfo.avatar,nickName:t.stolenInfo.name,num:t.num,isShowRich:!1}):n.head_icon.setData({headUrl:t.stolenInfo.avatar,nickName:t.stolenInfo.name,num:t.num,isShowRich:t.isShowRich});var a=commonUtils.NumberTool.getThreeTypeNumberStr(t.stolenInfo.steal_barley);n.glodNum.text=a,n.glodNum.visible=!1,n.setNongChangeInfoAndDaoInfo({id:t.stolenInfo.pasture.id,buildings:t.stolenInfo.pasture.buildings}),viewTools.RESTools.setImgRes(n.chao,"game_caifuhao_land_"+e.GameDatas.getIntance().getSomeOneLandDataById(t.stolenInfo.pasture.id).nameStr+"_png"),n.cacheAsBitmap=!0},n.prototype.showCaiAnimation=function(){this.head_icon.showHeadAnimation()},n.prototype.showGlod=function(){this.glodNum.visible=!0},n.prototype.setNongChangeInfoAndDaoInfo=function(e){this.head_icon.touchEnabled=!0;for(var t=0,n=5;n>t;t++)this.showSomeOne(t,e.buildings["build"+(t+1)].level,e.id)},n.prototype.showSomeOne=function(t,n,a){var i=this,o=e.GameDatas.getIntance().getSomeOneLandDataById(a).nameStr,s="game_mainView_changjing_"+o+"_island_";switch(t){case 0:case 5:if(0==n){i.shan.visible=!1;break}i.shan.visible=!0,i.shan.source=s+"fengjing"+n+"_png";break;case 1:if(0==n){i.che.visible=!1;break}i.che.visible=!0,i.che.source=s+"che"+n+"_png";break;case 2:if(0==n){i.men.visible=!1;break}i.men.visible=!0,i.men.source=s+"jianzhu"+n+"_png";break;case 3:if(0==n){i.zhuo.visible=!1;break}i.zhuo.visible=!0,i.zhuo.source=s+"fang"+n+"_png";break;case 4:if(0==n){i.nv.visible=!1;break}i.nv.visible=!0,i.nv.source=s+"nv"+n+"_png"}},n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init(),this.addEvent()},n.prototype.init=function(){this.head_icon.touchEnabled=!0,this.head_icon.touchChildren=!1},n.prototype.showDaoYuScale=function(e,t){egret.Tween.get(this.daoyuAll).to({scaleX:.75,scaleY:.75},1e3)},n.prototype.addEvent=function(){commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.SelectSomeOneCaiFuHao,this.selectSomeOneCaiFuHaoFunc,this),this.head_icon.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.selectSomeOneCaiFuHaoFunc=function(){this.head_icon.touchEnabled=!1},n.prototype.touchHanle=function(t){switch(t.target){case this.head_icon:if(e.GameNetUrlData.isUseNet&&this.stolenInfo_&&e.GameRequestMgr.getIntance().Luckydraw_toSteal_C(this.stolenInfo_.id),this.head_icon.isSelect=!0,e.GameDatas.getIntance().selectIndex=this.parent.getChildIndex(this),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.SelectSomeOneCaiFuHao),e.GameDatas.getIntance().is_new_user){for(var n=this.head_icon.info_data,a=e.GameDatas.getIntance().beStolenInfo,i=-1,o=-1,s=0,r=a.length;r>s;s++)a[s].is_richer&&(i=s),a[s].name==n.nickName&&(o=s);baseContent.SceneLayerMgr.getIntance().getCurrenScene().game_scene.gameCaiFuHao.changeUserInfoShow({headUrl:a[i].avatar,nickName:a[i].name,num:-1,isShowRich:!1},{headUrl:a[o].avatar,nickName:a[o].name,num:-1,isShowRich:!1}),this.head_icon.headTypeOne.visible=!1,this.head_icon.headTypeTwo.visible=!0}}},n.prototype.removeEvent=function(){commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.SelectSomeOneCaiFuHao,this.selectSomeOneCaiFuHaoFunc,this),this.head_icon.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){},n}(eui.Component);e.GameCaiFuHaoDaoYu=t,__reflect(t.prototype,"game.GameCaiFuHaoDaoYu",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.isSelect=!1,e.width=200,e.height=200,e.touchEnabled=!0,e.touchChildren=!1,e.skinName="GameCaiFuHaoHeadSkin",e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.removeEvent,e),e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.imgShow.mask=this.imgShowMask,this.addEvent()},n.prototype.setData=function(e){var t=this,n={num:e.num};t.data=n,t.info_data=e,-1!=e.num&&(t.numImg.source="game_caifuhao_view_tex_json.antGanme_mainView_xuanze"+n.num+"_png"),t.nickName.text=commonUtils.StringTool.formatStrLen(e.nickName),e.headUrl&&e.headUrl.length>0?commonUtils.ImageTools.loadImage(e.headUrl,function(e){t.imgShow.source=e},t):viewTools.RESTools.setImgRes(t.imgShow,"game_main_view_tex_json.game_main_view_default_headimg_jpg"),-1!=e.num?(t.numGrp.visible=!0,t.numGrp.alpha=1,t.numGrp.scaleX=1,t.headGrp.alpha=0,t.headTypeOne.visible=!0,t.headTypeTwo.visible=!1,e.isShowRich&&(t.headTypeOne.visible=!1,t.headTypeTwo.visible=!0)):(t.numGrp.visible=!1,t.headGrp.visible=!0,t.headTypeOne.visible=!0,t.headTypeTwo.visible=!1)},n.prototype.showHeadAnimation=function(){this.showHead.play(1)},n.prototype.addEvent=function(){this.showHead.addEventListener(egret.Event.COMPLETE,this.showCaiEnd,this)},n.prototype.showCaiEnd=function(){var t=this;t.isSelect&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.CaiFuHaoEnd,t.data.num-1)},n.prototype.touchHanle=function(e){},n.prototype.removeEvent=function(){this.showHead.removeEventListener(egret.Event.COMPLETE,this.showCaiEnd,this)},n.prototype.destroy=function(){},n}(eui.Component);e.GameCaiFuHaoHead=t,__reflect(t.prototype,"game.GameCaiFuHaoHead",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.touchEnabled=!1,e.touchChildren=!0,e.skinName="GameCaiFuHaoViewSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.headInfoGrp.top=-this.headInfoGrp.height,this.addEvent()},n.prototype.setData=function(){var t=this;t.showCaiImg.visible=!0,t.seccGrp.visible=!1;var n=e.GameDatas.getIntance().beStolenInfo;if(n){for(var a=[0,1,2],i=0,o=a.length;o>i;i++){var s=a.splice(Math.floor(Math.random()*o),1);a=a.concat(s)}console.log(a);for(var i=0,o=t.showdaoGrp.numChildren;o>i;i++){var r=n[a[i]],c=t.showdaoGrp.getChildAt(i);c.scaleX=c.scaleY=.8,c.alpha=1,0==i?c.horizontalCenter=0:1==i?c.horizontalCenter=-190:c.horizontalCenter=190,c.y=1500;var l=!1;r.is_richer&&(t.headView.setData({headUrl:r.avatar,nickName:r.name,num:-1,isShowRich:!0}),t.nameHead.text="土豪不差这个钱",t.glodNum.text=""+commonUtils.NumberTool.getThreeTypeNumberStr(r.steal_barley),l=!0),c.setData({stolenInfo:r,num:i+1,isShowRich:l})}}},n.prototype.showSomeClickOne=function(t){var n=this;egret.setTimeout(function(){e.GameSoundMgr.playStealResult(e.GameDatas.getIntance().caiFuHaoReturnData.is_rich_man)},n,1e3);for(var a=function(a,i){var o=n.showdaoGrp.getChildAt(a);a==t?(o.showDaoYuScale(.75,1e3),egret.Tween.get(o).to({horizontalCenter:0,y:290},1e3,egret.Ease.sineIn).call(function(){n.showEnd(),o.showGlod(),egret.Tween.removeTweens(o)},o).call(function(){e.GameDatas.getIntance().caiFuHaoReturnData.is_rich_man?(n.seccGrp.visible=!0,n.seccGrp.visible&&(egret.Tween.removeTweens(n.guangImg),egret.Tween.get(n.guangImg,{loop:!0}).to({rotation:360},3e3))):n.seccGrp.visible=!1,e.GameDatas.getIntance().beStolenInfo=null,e.GameDatas.getIntance().showAttackOrStolenNum>0&&e.GameRequestMgr.getIntance().Luckydraw_getSteal_C()},n)):egret.Tween.get(o).to({scaleX:.5,scaleY:.5,alpha:0},1e3,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(o)},o)},i=0,o=n.showdaoGrp.numChildren;o>i;i++)a(i,o)},n.prototype.changeUserInfoShow=function(e,t){for(var n=this,a=0,i=n.showdaoGrp.numChildren;i>a;a++){var o=n.showdaoGrp.getChildAt(a);o.head_icon.info_data.nickName==e.nickName?o.head_icon.setData({headUrl:t.headUrl,nickName:t.nickName,num:o.head_icon.info_data.num,isShowRich:t.isShowRich}):o.head_icon.info_data.nickName==t.nickName&&o.head_icon.setData({headUrl:e.headUrl,nickName:e.nickName,num:o.head_icon.info_data.num,isShowRich:e.isShowRich})}},n.prototype.showEnterDaoYu=function(){var e=this;this.setData(),egret.Tween.get(this.headInfoGrp).to({top:0},500).call(function(){egret.Tween.removeTweens(e.headInfoGrp)}),this.showEnter.play(1)},n.prototype.addEvent=function(){commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.CaiFuHaoReturn,this.caiFuHaoReturnFunc,this),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.CaiFuHaoEnd,this.showCaiEnd,this)},n.prototype.caiFuHaoReturnFunc=function(){var t=this;t.showCaiImg.visible=!1,egret.Tween.get(t.headInfoGrp).to({top:-t.headInfoGrp.height},500).call(function(){egret.Tween.removeTweens(t.headInfoGrp)});for(var n=(e.GameDatas.getIntance().selectIndex,0),a=t.showdaoGrp.numChildren;a>n;n++){var i=t.showdaoGrp.getChildAt(n);i.showCaiAnimation()}},n.prototype.showEnd=function(){commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ShowCaiFuHaoEnd)},n.prototype.showCaiEnd=function(e){this.showSomeClickOne(e)},n.prototype.removeEvent=function(){commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.CaiFuHaoReturn,this.caiFuHaoReturnFunc,this),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.CaiFuHaoEnd,this.showCaiEnd,this)},n.prototype.destroy=function(){},n}(eui.Component);e.GameCaiFuHaoView=t,__reflect(t.prototype,"game.GameCaiFuHaoView",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelXiaoXiTiXingCaiEnd",e.skinName="PanelXiaoXiTiXingCaiEndSkin",e}return __extends(n,t),n.prototype.init=function(){},n.prototype.initShow=function(e,t,n){this.contentText.text=e,this.glodNum.text=""+commonUtils.NumberTool.getThreeTypeNumberStr(t)},n.prototype.enable=function(){t.prototype.enable.call(this),this.rectImg.visible=!1,t.prototype.showEnter.call(this,baseContent.PanelMoveType.msgType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(e){switch(e.target){case this.closeBtn:this.removeUs()}},n.prototype.removeUs=function(){return t.prototype.removeUs.call(this,baseContent.PanelMoveType.msgType),e.GameDatas.getIntance().beStolenInfo?void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.EnterSeallView,!0):void baseContent.SceneLayerMgr.getIntance().getCurrenScene().enterRandByDao()},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},n}(baseContent.BasePanel);e.PanelXiaoXiTiXingCaiEnd=t,__reflect(t.prototype,"game.PanelXiaoXiTiXingCaiEnd",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameLoadingViewSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.addEvent()},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(){},t.prototype.setProgress=function(e,t){this.proGrp.visible||(this.proGrp.visible=!0);var n=e/t*390;n=42>n?42:n,this.perLoadingbar.width=n,this.caoImg.x=this.perLoadingbar.x+this.perLoadingbar.width-40},t.prototype.destroy=function(){this.removeEvent(),this.removeUs(),this.caoImg=null,RES.destroyRes("preload"),platform.triggerGC()},t}(baseContent.BaseScene);e.GameLoadingView=t,__reflect(t.prototype,"game.GameLoadingView",["baseContent.IScene","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameMainChangJingBarViewSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.addEvent()},t.prototype.setInfo=function(e,t,n){if(this.titleText.text=n,0==e)return void(this.bar.visible=!1);this.bar.visible=!0;var a=e/t,i=305*a;i=30>i?30:i,i=i>305?305:i,this.bar.width=i},t.prototype.addEvent=function(){},t}(eui.Component);e.GameMainChangJingBarView=t,__reflect(t.prototype,"game.GameMainChangJingBarView")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.touchEnabled=!0,e.touchChildren=!1,e.skinName="GameMainChangJingChuiViewSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){var e=this;egret.Tween.get(this,{loop:!0}).wait(3e3).call(function(){e.chuigrp.play(1)},this),this.addEvent()},n.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(e){this.showChui()},n.prototype.showChui=function(){return this.chuigrp.play(1),e.GameDatas.getIntance().isShowBuildAnimation?void 0:(commonUtils.EventMananger.getIntance().sendEvent(commonUtils.GlobalEvent.ClickButton),void baseContent.PanelManager.getIntance().openTypeIntance(e.PanelDyjs))},n}(eui.Component);e.GameMainChangJingChuiView=t,__reflect(t.prototype,"game.GameMainChangJingChuiView")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.top=e.bottom=e.left=e.right=0,e.skinName="GameMainChangJingCommemorativeViewSkin",e.touchEnabled=!1,e.touchChildren=!0,e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init(),this.addEvent()},n.prototype.downBoxSomeOne=function(t){var n=this;this.downSomeBoxGrp.visible=!0,this.boxImg.source="game_mainView_changjing_commemorative_box_png";var a=e.GameDatas.getIntance().awrad;e.GameDatas.getIntance().giftShowSomeData(e.GameDatas.getIntance().awrad,!1),this.grpAwrad.removeChildren();for(var i=0,o=a.length;o>i;i++){var s=new eui.Image,r=new eui.Label;r.text="X"+a[i].num;var c=new eui.Group;c.width=c.height=40,s.source=e.GameDatas.getIntance().getSomeOneIconStrByType(parseInt(a[i].type)),s.scaleX=s.scaleY=.3,this.grpAwrad.addChild(s),this.grpAwrad.addChild(r),this.grpAwrad.addChild(c)}egret.Tween.get(this.boxImg).to({y:800},500,egret.Ease.backOut).to({rotation:-15},50).to({rotation:15},100).to({rotation:0},50).to({rotation:-15},50).to({rotation:15},100).to({rotation:0},50).to({rotation:-15},50).to({rotation:15},100).to({rotation:0},50).call(function(){n.boxImg.source="game_mainView_changjing_commemorative_box_open_png";for(var e=0,t=a.length;t>e;e++){var i=n.getOneAwradObj(parseInt(a[e].type));i.scaleX=i.scaleY=0,n.boxImg.parent.addChild(i),i.x=n.boxImg.x,i.y=n.boxImg.y,i.name="aGrp"+e,egret.Tween.get(i).to({x:i.x+300*(e-.5),y:i.y-200,scaleX:1,scaleY:1},1e3,egret.Ease.backOut).wait(2e3)}},this).wait(200).call(function(){egret.Tween.removeTweens(n.boxImg),egret.Tween.get(n.sendGrp).to({bottom:0},500).call(function(){egret.Tween.removeTweens(n.sendGrp)})},this)},n.prototype.getOneAwradObj=function(t){var n=new eui.Group;n.width=n.height=200,n.anchorOffsetX=n.anchorOffsetY=n.width/2;var a=new eui.Image;a.source="game_mainView_changjing_complete_guangquan_png",a.width=a.height=200,a.anchorOffsetX=a.anchorOffsetY=100,a.x=a.y=100,n.addChild(a),egret.Tween.get(a,{loop:!0}).to({rotation:360},3e3);var i=new eui.Image;return i.horizontalCenter=i.verticalCenter=0,i.source=e.GameDatas.getIntance().getSomeOneIconStrByType(t),n.addChild(i),n},n.prototype.showCamerAnimation=function(t){var n=this;n.gameMainView=t,n.showSomeCarmeGrp.visible=!0;var a;n.gameMainView.game_scene.cameraOnePhoto().then(function(e){a=e,a.width=540,a.height=588,a.x=20,a.y=25,a.name="photo_par",n.photoGrp.addChildAt(a,1)});var i=e.GameDatas.getIntance().getSomeOnePastureInfo(e.GameDatas.getIntance().user_info.pasture_id).state;switch(i){case 1:n.iconState.source="game_mainView_changjing_commemorative_Asia_png";break;case 2:n.iconState.source="game_mainView_changjing_commemorative_Europe_png";break;case 3:case 4:n.iconState.source="game_mainView_changjing_commemorative_America_png";break;case 5:n.iconState.source="game_mainView_changjing_commemorative_Africa_png";break;default:n.iconState.source="game_mainView_changjing_commemorative_Asia_png"}egret.Tween.get(n).call(function(){n.gameMainView.game_scene.showSkyBalckAnimation()},n).wait(500).call(function(){n.showYanHua()},n).wait(5e3).call(function(){n.gameMainView.game_scene.showSkyLightAnimation(),egret.Tween.get(n.carmeImg).to({top:0},300,egret.Ease.sineIn).wait(1e3).call(function(){n.shanRect.visible=!0},n).wait(100).call(function(){n.shanRect.visible=!1},n).wait(500).call(function(){n.bgRect.visible=!0,egret.Tween.removeTweens(n.carmeImg),egret.Tween.get(n.photoGrp).to({y:300},3e3).call(function(){egret.Tween.removeTweens(n.photoGrp),n.someBtnGrp.visible=!0},n)},n)},n)},n.prototype.init=function(){this.initSomeLocal()},n.prototype.initSomeLocal=function(){this.carmeImg.top=-this.carmeImg.height,this.shanRect.visible=!1,this.photoGrp.mask=this.photoGrpMask,this.photoGrp.y-=this.photoGrp.height,this.bgRect.visible=!1,this.someBtnGrp.visible=!1,this.showSomeCarmeGrp.visible=!1,this.downSomeBoxGrp.visible=!1,this.boxImg.y=-this.boxImg.height,this.sendGrp.bottom=-this.sendGrp.height;for(var e=0,t=this.boxImg.parent.numChildren;t>e;e++){var n=this.boxImg.parent.getChildAt(e);n.name&&-1!=n.name.indexOf("aGrp")&&(egret.Tween.removeTweens(n),n.parent.removeChild(n),e--,t--,n=null)}var a=this.photoGrp.getChildByName("photo_par");a&&this.photoGrp.removeChild(a)},n.prototype.showYanHua=function(){this.yanHuaAnimaiton||this.initYanHuaAnimaiton(),this.yanHuaAnimaiton.visible=!0,this.yanHuaAnimaiton.animation.play("newAnimation",1)},n.prototype.initYanHuaAnimaiton=function(){var e=this;e.yanHuaAnimaiton=e.getChildByName("congratulations_animation"),e.yanHuaAnimaiton||(e.yanHuaAnimaiton=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("congratulations_animation","MovieClip","congratulations_animation"),e.addChild(e.yanHuaAnimaiton),e.yanHuaAnimaiton.name="congratulations_animation",e.yanHuaAnimaiton.x=commonUtils.StageUtils.getIntance().getStageWidth()/2,e.yanHuaAnimaiton.y=commonUtils.StageUtils.getIntance().getStageHeight()-80),e.yanHuaAnimaiton.visible=!1},n.prototype.addEvent=function(){this.continueBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanlde,this),this.shareBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanlde,this),this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanlde,this)},n.prototype.continueViewInfo=function(){var t=this;this.showSomeCarmeGrp.visible=!1,this.bgRect.visible=!1,this.gameMainView.game_scene.gameNCView.closeView(),egret.Tween.get(this).wait(900).call(function(){e.GameRequestMgr.getIntance().Pasture_getPastureInfo_C(),t.gameMainView.game_scene.gameNCView.openView()},this).wait(500).call(function(){t.downBoxSomeOne(t.gameMainView)},this)},n.prototype.touchHanlde=function(t){switch(t.target){case this.continueBtn:var n=this,a=e.GameDatas.getIntance().getSomeOneLandDataById(e.GameDatas.getIntance().user_info.pasture_id);if(e.GameDatas.getIntance().us_pastureRes_name==a.grpName)return void n.continueViewInfo();e.GameDatas.getIntance().us_pastureRes_name&&viewTools.RESTools.destroySomeOneGrp(e.GameDatas.getIntance().us_pastureRes_name),baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr([a.grpName],null,n.continueViewInfo,n,2);break;case this.shareBtn:e.GameRequestMgr.getIntance().Share_sharedSuccess_C("dao_yu_jian_zao_wan_cheng"),e.WXTools.sharSomeMessage({title:"可以榨出鲜嫩嫩的青汁，好好喝！",imageUrl:romoteUrlHead+"/game/romote/shareimg/share_img_2.jpg",query:"user_id="+e.GameDatas.getIntance().user_info.id+"&share_type=dao_yu_jian_zao_wan_cheng",success:function(t){console.log("建造成功 分享成功！"),e.GameRequestMgr.getIntance().Share_sharedSuccess_C("dao_yu_jian_zao_wan_cheng")}},platform);break;case this.sendBtn:this.downSomeBoxGrp.visible=!1,this.initSomeLocal(),e.GameDatas.getIntance().openGiftShow(),this.gameMainView.enterRandByNextPasture(),baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow(),this.gameMainView.removeGameMC()}},n.prototype.removeEvent=function(){this.continueBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanlde,this),this.shareBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanlde,this),this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanlde,this)},n.prototype.destroy=function(){this.removeEvent(),this.yanHuaAnimaiton=null,this.shareBtn.destroy(),this.shareBtn=null,this.continueBtn.destroy(),this.continueBtn=null,this.sendBtn.destroy(),this.sendBtn=null},n}(eui.Component);e.GameMainChangJingCommemorativeView=t,__reflect(t.prototype,"game.GameMainChangJingCommemorativeView",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.className_key="GameMainChangJingCompletOneTypeView",t.skinName="GameMainChangJingCompletOneTypeViewSkin",t}return __extends(t,e),t.prototype.init=function(){},t.prototype.enable=function(){e.prototype.enable.call(this);var t=this;t.rectImg.visible=!1,commonUtils.AnimationUtil.showSomeOneScaleAnimation(t.grpCenter,0,1,500,egret.Ease.backOut),egret.Tween.get(t.guangRond,{loop:!0}).to({rotation:360},1500),egret.setTimeout(function(){this.destroy()
},t,1500)},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(){},t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(baseContent.BasePanel);e.GameMainChangJingCompletOneTypeView=t,__reflect(t.prototype,"game.GameMainChangJingCompletOneTypeView",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="GameMainChangJingViewSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.addEvent()},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(){},t.prototype.destroy=function(){},t}(eui.Component);e.GameMainChangJingView=t,__reflect(t.prototype,"game.GameMainChangJingView",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.top=e.bottom=e.left=e.right=0,e.skinName="GameAttackViewHeadViewSkin",e.addEventListener(egret.Event.ADDED_TO_STAGE,e.enabel,e),e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME&&(this.btnGrp.x-=100),this.grpTitle.top=-this.grpTitle.height,this.imgShow.mask=this.imgMask,this.showList.itemRenderer=e.GameAttackViewHeadViewCouRenItem,this.showList.itemRendererSkinName="GameAttackViewHeadViewCouRenItemSkin"},n.prototype.enabel=function(){var t=this;e.GameDatas.getIntance().is_new_user&&e.NewControlViewMgr.getIntance().currentStepType<e.StepType.attackMsg?(this.btnGrp.visible=!1,this.showTitleLable.visible=!0):(this.btnGrp.visible=!0,this.showTitleLable.visible=!1),t.couBtn.selected=t.hyBtn.selected=!1,t.rectShow.visible=!1,t.showGrp.top=-t.showGrp.height,t.userName.text=commonUtils.StringTool.formatStrLen(e.GameDatas.getIntance().beAttackInfo.user_name),t.starNum.text=""+e.GameDatas.getIntance().beAttackInfo.star_num,e.GameDatas.getIntance().beAttackInfo.avatar&&e.GameDatas.getIntance().beAttackInfo.avatar.length>0?commonUtils.ImageTools.loadImage(e.GameDatas.getIntance().beAttackInfo.avatar,function(e){t.imgShow.source=e},t):viewTools.RESTools.setImgRes(t.imgShow,"game_main_view_tex_json.game_main_view_default_headimg_jpg"),t.grpTitle.top=-t.grpTitle.height,egret.Tween.get(t.grpTitle).to({top:0},500,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(t.grpTitle)},t),t.addEvent()},n.prototype.close=function(){var e=this;e.parent&&egret.Tween.get(e.grpTitle).to({top:-e.grpTitle.height},500,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(e.grpTitle),e.parent&&e.parent.removeChild(e)},e),this.removeEvent()},n.prototype.addEvent=function(){this.couBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.hyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.closeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.ChangeBeAttackUserInfo,this.changeBeAttackUserInfo,this),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.CourenDataChange,this.changeCouRenListData,this),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.AttackHyListDataChange,this.chaneAttackHyListData,this)},n.prototype.changeBeAttackUserInfo=function(){},n.prototype.changeCouRenListData=function(){console.log("仇人数据列表更改");var t=e.GameDatas.getIntance().erenBangList_.enemy;this.couRenArr?this.couRenArr.removeAll():this.couRenArr=new eui.ArrayCollection,this.showList.visible=!0;var n=e.GameDatas.getIntance().beAttackInfo;e.GameDatas.getIntance().randomAttackInfo.id==n.id?this.couRenArr.addItem({type:1,btnType:3,attackInfo:e.GameDatas.getIntance().randomAttackInfo}):this.couRenArr.addItem({type:1,btnType:2,attackInfo:e.GameDatas.getIntance().randomAttackInfo});for(var a=0,i=t.length;i>a;a++)n.id!=t[a].id?0==t[a].pasture_attacted?this.couRenArr.addItem({type:1,btnType:0,attackInfo:t[a]}):this.couRenArr.addItem({type:1,btnType:1,attackInfo:t[a]}):this.couRenArr.addItem({type:1,btnType:5,attackInfo:t[a]});this.showList.dataProvider=this.couRenArr,this.couRenArr.refresh()},n.prototype.chaneAttackHyListData=function(t){if(console.log("好友数据列表更改"),this.hyArr?this.hyArr.removeAll():this.hyArr=new eui.ArrayCollection,!(t.friends.length>0||t.friends_of_friends.length>0))return void(this.showList.visible=!1);this.showList.visible=!0;for(var n=e.GameDatas.getIntance().beAttackInfo,a=0,i=t.friends.length;i>a;a++)n.id!=t.friends[a].id?0==t.friends[a].pasture_attacted?this.hyArr.addItem({type:1,btnType:0,attackInfo:t.friends[a]}):this.hyArr.addItem({type:1,btnType:1,attackInfo:t.friends[a]}):this.hyArr.addItem({type:1,btnType:5,attackInfo:t.friends[a]});this.hyArr.addItem({type:0,btnType:0,attackInfo:null});for(var a=0,i=t.friends_of_friends.length;i>a;a++)n.id!=t.friends_of_friends[a].id?0==t.friends_of_friends[a].pasture_attacted?this.hyArr.addItem({type:1,btnType:0,attackInfo:t.friends_of_friends[a]}):this.hyArr.addItem({type:1,btnType:1,attackInfo:t.friends_of_friends[a]}):this.hyArr.addItem({type:1,btnType:5,attackInfo:t.friends_of_friends[a]});this.showList.dataProvider=this.hyArr,this.hyArr.refresh()},n.prototype.touchHandle=function(t){switch(commonUtils.EventMananger.getIntance().sendEvent(commonUtils.GlobalEvent.ClickButton),t.target){case this.couBtn:e.GameRequestMgr.getIntance().Enemy_getEnemys_C(),this.openListView();break;case this.hyBtn:e.GameRequestMgr.getIntance().Luckydraw_getFriendRelations_C(),this.openListView();break;case this.closeImg:this.closeListView()}},n.prototype.openListView=function(){this.rectShow.visible?egret.Tween.get(this.showGrp).to({top:-this.showGrp.height},500,egret.Ease.sineIn).to({top:0},750,egret.Ease.sineIn):(this.rectShow.visible=!0,egret.Tween.removeTweens(this.closeImg),viewTools.GameSomeAnimationUitl.addCloseAnimation(this.closeImg),egret.Tween.get(this.showGrp).to({top:0},500,egret.Ease.sineIn).call(function(){e.GameDatas.getIntance().is_new_user&&e.NewControlViewMgr.getIntance().currentStepType>=e.StepType.attackViewChouRenBtn&&e.NewControlViewMgr.getIntance().currentStepType<e.StepType.attackViewAttackBtn&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.attackViewAttackBtn)}))},n.prototype.closeListView=function(){var e=this;this.rectShow.visible&&(this.couBtn.selected=this.hyBtn.selected=!1,egret.Tween.removeTweens(this.closeImg),egret.Tween.get(this.showGrp).to({top:-this.showGrp.height},500,egret.Ease.sineIn).call(function(){e.rectShow.visible=!1},this))},n.prototype.removeEvent=function(){this.couBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.hyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.closeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.ChangeBeAttackUserInfo,this.changeBeAttackUserInfo,this),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.CourenDataChange,this.changeCouRenListData,this),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.AttackHyListDataChange,this.chaneAttackHyListData,this)},n}(eui.Component);e.GameAttackViewHeadView=t,__reflect(t.prototype,"game.GameAttackViewHeadView")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="GameAttackViewHeadViewCouRenItemSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.showImg.mask=this.showImgMask,this.addEvent()},n.prototype.dataChanged=function(){if(this.infoData=this.data,0==this.infoData.type)return this.showNull.visible=!0,this.showInfo.visible=!1,void(this.height=74);switch(1==this.infoData.type?(this.showNull.visible=!1,this.showInfo.visible=!0):(this.showNull.visible=!1,this.showInfo.visible=!0),this.width=580,this.height=124,this.nickName.text=commonUtils.StringTool.formatStrLen(this.infoData.attackInfo.user_name),this.infoData.attackInfo.avatar&&this.infoData.attackInfo.avatar.length>0&&commonUtils.ImageTools.loadImage(this.infoData.attackInfo.avatar,function(e){this.showImg.source=e},this),"1"==this.infoData.attackInfo.sex?this.sexImg.source="panel_common_context_json.panel_common_touxiang_name_sex_png":this.sexImg.source="panel_common_context_json.panel_common_touxiang_name_sex1_png",this.startNum.text=this.infoData.attackInfo.star_num+"",this.attNum.text=this.infoData.attackInfo.be_attacks_times+"",this.infoData.btnType){case 0:this.kongBtn.visible=!0,this.attackBtn.visible=this.attackBtn.enabled=this.yaoqingBtn.visible=this.suijiBtn.visible=!1;break;case 1:this.attackBtn.visible=this.attackBtn.enabled=!0,this.kongBtn.visible=this.yaoqingBtn.visible=this.suijiBtn.visible=!1;break;case 2:this.suijiBtn.visible=this.suijiBtn.enabled=!0,this.kongBtn.visible=this.attackBtn.visible=this.yaoqingBtn.visible=!1;break;case 3:this.suijiBtn.visible=!0,this.kongBtn.visible=this.suijiBtn.enabled=this.attackBtn.visible=this.yaoqingBtn.visible=!1;break;case 4:this.yaoqingBtn.visible=this.yaoqingBtn.enabled=!0,this.kongBtn.visible=this.attackBtn.visible=this.suijiBtn.visible=!1;break;case 5:this.attackBtn.visible=!0,this.kongBtn.visible=this.attackBtn.enabled=this.yaoqingBtn.visible=this.suijiBtn.visible=!1}},n.prototype.addEvent=function(){this.attackBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.suijiBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.touchHandle=function(t){switch(t.target){case this.attackBtn:case this.suijiBtn:var n=baseContent.SceneLayerMgr.getIntance().getCurrenScene();n.game_scene.attackHeadInfoView.closeListView(),n.game_scene.attackHeadInfoView.close(),e.GameRequestMgr.getIntance().Luckydraw_getAttact_C(this.infoData.attackInfo.id)}},n}(eui.ItemRenderer);e.GameAttackViewHeadViewCouRenItem=t,__reflect(t.prototype,"game.GameAttackViewHeadViewCouRenItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.width=400,e.height=190,e.anchorOffsetY=190,e.anchorOffsetX=200,e.touchEnabled=!1,e.touchChildren=!0,e.skinName="GameMainPaiBeiViewComponetSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.beilvNum.text=e.GameDatas.getIntance().currentMult+"",this.currentMult=e.GameDatas.getIntance().currentMult,this.showGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeMultHandle,this)},n.prototype.changeMultHandle=function(){console.log("修改倍数----");var t=e.GameDatas.getIntance().getSomeOnePastureInfo(e.GameDatas.getIntance().user_info.pasture_id).max_mult;if(e.GameDatas.getIntance().currentMult+=1,!this.towPerStr)for(var n=0,a=e.GameDatas.getIntance().pasture_list.length;a>n;n++)if(2==e.GameDatas.getIntance().pasture_list[n].max_mult&&!this.towPerStr){this.towPerStr=e.GameDatas.getIntance().pasture_list[n].pasture_name;break}1==t&&viewTool.TipsUtil.getIntance().showTip("当达到"+this.towPerStr+"农场即可开启2倍！"),e.GameDatas.getIntance().currentMult>t&&(e.GameDatas.getIntance().currentMult=1),this.currentMult!=e.GameDatas.getIntance().currentMult&&(this.changeBeiLvNum(e.GameDatas.getIntance().currentMult),this.showRand(),this.currentMult=e.GameDatas.getIntance().currentMult)},n.prototype.showRand=function(){var e=this;egret.Tween.get(this.showGrp).to({scaleX:0},50).call(function(){e.numGrp.visible=!1}).to({scaleX:-1},50).to({scaleX:0},50).call(function(){e.numGrp.visible=!0}).to({scaleX:1},50).to({scaleX:0},50).call(function(){e.numGrp.visible=!1}).to({scaleX:-1},50).to({scaleX:0},50).call(function(){e.numGrp.visible=!0}).to({scaleX:1},50)},n.prototype.changeBeiLvNum=function(e){this.beilvNum.text=e+""},n}(eui.Component);e.GameMainPaiBeiViewComponet=t,__reflect(t.prototype,"game.GameMainPaiBeiViewComponet")}(game||(game={}));var game;!function(e){var t=function(t){function a(){var n=t.call(this)||this;return n.touchEnabled=!1,n.once(egret.Event.ADDED_TO_STAGE,n.cacheBitMapView,n),n.skinName="GameMainViewSkin",baseContent.BufferLayerMgr.getIntance().addChild(new e.GameMiWuViewMgr),e.GameDatas.getIntance().user_info&&e.GameDatas.getIntance().user_info.pasture_id>1023&&e.WXTools.removeSomeLandImg("Asia"),n}return __extends(a,t),a.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},a.prototype.init=function(){platform.triggerGC();var t=this;t.infoGrp.visible=!1,e.GameDatas.getIntance().huiGuiLibaoData_&&commonUtils.ResUtils.getInstance().loadGroupByGrpArr([e.GameDatas.panel_huiguilibao],null,function(){baseContent.PanelManager.getIntance().openTypeIntance(e.PanelHuiGuiLiBaoView)},t),e.GameDatas.getIntance().is_new_user||egret.setTimeout(function(){e.GameDatas.getIntance().getNoticeDatasLength()>0&&e.GameDatas.getIntance().noticeOpen()},t,1e3),e.GameSoundMgr.playBgMusic(!0),commonUtils.DeviceUtils.getInstance().getIsIPhoneX()&&(t.topGrp.top+=60,t.leftBtnGrp.y+=60,t.rightGrp.top+=60,t.muchanginfo.y+=60),t.game_scene=new e.GameSenceView,t.parent.addChildAt(t.game_scene,0),t.goldShow.setStartNum(e.GameDatas.getIntance().user_info.star_num),t.initShow();for(var a=0,i=t.leftBtnGrp.numChildren;i>a;a++)t.leftBtnGrp.getChildAt(a).visible=!1;for(var a=0,i=t.rightGrp.numChildren;i>a;a++)t.rightGrp.getChildAt(a).visible=!1;t.showSomeButtonByIconList(),t.muchanginfo.visible=!1,t.panBtn.left=-300;var o=new eui.Group;o.width=o.height=125;var s=new eui.Image,r=new eui.Image;if(r.width=r.height=s.width=s.height=70,r.horizontalCenter=s.horizontalCenter=0,r.verticalCenter=s.verticalCenter=3,r.mask=s,s.source="antGame_panel_icon_headSculpturepng_png",viewTools.RESTools.setHeadImg(r,e.GameDatas.getIntance().stepUserHeadUrl),o.addChild(r),o.addChild(s),t.chaoyueBtn.addChildAt(o,0),t.setStartButtonView(),t.paiBeiLvView=new e.GameMainPaiBeiViewComponet,t.addChildAt(t.paiBeiLvView,1),t.paiBeiLvView.x=130,t.paiBeiLvView.y=commonUtils.StageUtils.getIntance().stage.stageHeight-230,t.addEvent(),t.leftBtnGrp.cacheAsBitmap=!0,t.rightGrp.cacheAsBitmap=!0,t.eggBtn.newsIconLocal={x:126,y:10},e.GameRequestMgr.getIntance().Pasture_getPastureInfo_C(),t.panBtn.newsIconLocal={x:130,y:10},e.GameDatas.getIntance().checkIsCanRand(),egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME&&(t.daimedHead.right=180),e.GameDatas.getIntance().is_new_user){if(this.petBtn.visible=!1,this.paiBeiLvView.visible=!1,0!=e.NewControlViewMgr.getIntance().getCurrentSenceType())return t.leftBtn.left=-t.leftBtn.width,t.eggBtn.right=-300,t.setStartButtonView(n.muchangView),t.leftBtnGrp.left=-300,t.rightGrp.right=-300,t.randPanel.alpha=.3,t.randPanel.rotation=-60,t.paiBeiLvView.scaleY=0,void(t.paiBeiLvView.touchChildren=!1);t.leftBtnGrp.left=-300,t.rightGrp.right=-300,t.leftBtn.left=-t.leftBtn.width}},a.prototype.openOrClosePiaView=function(e){e?(this.paiBeiLvView.touchChildren=!0,egret.Tween.get(this.paiBeiLvView).to({scaleY:1},200,egret.Ease.bounceOut)):(this.paiBeiLvView.touchChildren=!1,egret.Tween.get(this.paiBeiLvView).to({scaleY:0},200))},a.prototype.setStartButtonView=function(e){void 0===e&&(e=null);var t=this;e==n.muchangView?(t.startBtn.visible=!1,t.chuiView.visible=!0):(t.startBtn.visible=!0,t.chuiView.visible=!1)},a.prototype.showStartOrCreate=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!0);var a=this;egret.Tween.removeTweens(a.btnGrp),e==n.startView&&(a.muchanginfo.visible=!1),egret.Tween.get(a.btnGrp).to({bottom:-300},350,egret.Ease.sineIn).call(function(){a.setStartButtonView(e),egret.Tween.get(a.btnGrp).to({bottom:20},350,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(a.btnGrp),e==n.muchangView&&(a.muchanginfo.visible=t)},a)},a)},a.prototype.showUserInfoLand=function(e,t){var n=this;n.topGrp.visible=n.btnGrp.visible=!1,this.headUIEnterOrOut("out"),this.showDaoAnimation(!1),n.someBtnOut(),n.eggBtnEnterOrOut("out"),this.game_scene.toNChangAnimation(),this.infoGrp.visible=!0,this.infoGrp.getChildByName("head").setHEHead(e.avatar),this.infoGrp.getChildByName("starNum").text=""+e.star_num,this.infoGrp.getChildByName("userName").text=""+commonUtils.StringTool.formatStrLen(e.user_name),this.game_scene.setNongChangeInfo(t)},a.prototype.openSomePanelKey=function(t){switch(t){case"PanelErenBangView":e.GameRequestMgr.getIntance().Enemy_getEnemys_C(),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelErenBangView)}},a.prototype.initShow=function(t){if(void 0===t&&(t=null),e.GameDatas.getIntance().user_info){t&&(e.GameDatas.getIntance().user_info=t);var n=e.GameDatas.getIntance().user_info,a=this;a.randPanel.setInfo(),a.goldShow.setGlodTextNum(n.barley_num),a.goldShow.setPaiInfo(n.shield_num),a.daimedHead.setGDaimedTextNum(n.diamond)}},a.prototype.setNongChangTileInfo=function(){var t=this;t.muchanginfo.cacheAsBitmap=!1;var n=e.GameDatas.getIntance().pasture_;t.titleinfo.text=e.GameDatas.getIntance().getSomeOnePastureInfo(n.id).pasture_name+"",t.showBar.setInfo(n.current_level,n.total_level,n.current_level+"/"+n.total_level),t.muchanginfo.cacheAsBitmap=!0,t.game_scene.setNongChangeInfo(e.GameDatas.getIntance().pasture_)},a.prototype.showRandEnd=function(t,n){void 0===n&&(n=-1);var a;e.GameDatas.getIntance().openGiftShow();var i=this;switch(t.type){case 1:i.showJinBiAnimation(n),egret.Tween.removeTweens(i.startBtn),egret.Tween.get(i.startBtn).call(function(){i.initShow()},i).wait(1e3).call(function(){i.randPanel.isEnd=!0,!a&&e.GameDatas.getIntance().isAutoRand&&e.GameRequestMgr.getIntance().Luckydraw_clickLuckyDraw_C()},i),e.GameSoundMgr.playWheelGlod();break;case 2:if(console.log("攻击"),e.GameDatas.getIntance().isAutoRand=!1,e.GameSoundMgr.playWheelAttack(),e.GameDatas.getIntance().is_new_user&&e.NewControlViewMgr.getIntance().currentStepType>e.StepType.attackHuInfo&&e.NewControlViewMgr.getIntance().currentStepType<e.StepType.attackInfo){commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.attackInfo);break}if(a){a.nextEventStr=e.GameEvent.EnterAttackView;break}i.showAttack();break;case 3:if(console.log("偷取"),e.GameDatas.getIntance().isAutoRand=!1,e.GameSoundMgr.playWheelSteal(),e.GameDatas.getIntance().is_new_user){commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.touQuInfo);break}if(a){a.nextEventStr=e.GameEvent.EnterSeallView;break}i.showTouQu();break;case 4:i.showEnergyAnimation(),e.GameSoundMgr.playWheeEngry(),egret.Tween.removeTweens(i.startBtn),egret.Tween.get(i.startBtn).wait(4e3).call(function(){i.randPanel.isEnd=!0,i.initShow(),!a&&e.GameDatas.getIntance().isAutoRand&&e.GameRequestMgr.getIntance().Luckydraw_clickLuckyDraw_C()},i),console.log("能量");break;case 5:i.showShieldAnimation(),e.GameSoundMgr.playWheelShieldGot(),egret.Tween.removeTweens(i.startBtn),egret.Tween.get(i.startBtn).wait(2500).call(function(){i.randPanel.isEnd=!0,i.initShow(),!a&&e.GameDatas.getIntance().isAutoRand&&e.GameRequestMgr.getIntance().Luckydraw_clickLuckyDraw_C()},i),console.log("护盾"),e.GameDatas.getIntance().is_new_user&&egret.setTimeout(function(){commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.engryInfo)},this,500)}a&&baseContent.PanelManager.getIntance().openTypeIntance(e.PanelGiftView,a)},a.prototype.showJinBiAnimation=function(e){var t=this,n=t.getChildByName("glod_animation");n||(n=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("glod_animation","MovieClip","glod_animation"),t.addChild(n),n.name="glod_animation",n.x=commonUtils.StageUtils.getIntance().getStageWidth()/2,n.y=commonUtils.StageUtils.getIntance().getStageHeight()/2),n.animation.play("gold_lv"+e,1)},a.prototype.showEnergyAnimation=function(){var e=this,t=e.getChildByName("energy_animation");t||(t=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("energy_animation","MovieClip","energy_animation"),e.addChild(t),t.name="energy_animation",t.x=commonUtils.StageUtils.getIntance().getStageWidth()/2,t.y=commonUtils.StageUtils.getIntance().getStageHeight()/2),t.animation.play("newAnimation",1),egret.Tween.removeTweens(t),egret.Tween.get(t).wait(2600).call(function(){e.showEngAdd.play(1)},e)},a.prototype.showShieldAnimation=function(){var t=this;t.shield_animation||(t.shield_animation=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("shield_animation","MovieClip","shield_animation"),t.shield_animation.name="shield_animation"),t.shield_animation.parent||t.addChild(t.shield_animation),t.shield_animation.visible=!0,t.shield_animation.x=commonUtils.StageUtils.getIntance().getStageWidth()/2,t.shield_animation.y=commonUtils.StageUtils.getIntance().getStageHeight()/2,t.shield_animation.animation.play("newAnimation",1),egret.Tween.removeTweens(t.shield_animation);var n=new egret.Point;n=t.goldShow.getSomeOnePaiOfGlobelPoint(e.GameDatas.getIntance().user_info.shield_num-1),n.x+=16,n.y+=20,egret.Tween.get(t.shield_animation).wait(1150).to({x:n.x,y:n.y},1e3,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(t.shield_animation),t.shield_animation.parent&&t.shield_animation.parent.removeChild(t.shield_animation)},t.shield_animation)},a.prototype.addStageCall=function(){t.prototype.addStageCall.call(this)},a.prototype.cacheBitMapView=function(){this.goldShow.cacheAsBitmap=!0,this.daimedHead.cacheAsBitmap=!0},a.prototype.showCaiEnd=function(){this.headUIEnterOrOut("enter")},a.prototype.addEvent=function(){var t=this;t.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.eggBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.panBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t);for(var n=0,a=t.leftBtnGrp.numChildren;a>n;n++)t.leftBtnGrp.getChildAt(n).addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.leftBtnGrp.getChildAt(n).newsIconLocal={x:90,y:0};for(var n=0,a=t.rightGrp.numChildren;a>n;n++)t.rightGrp.getChildAt(n).addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.rightGrp.getChildAt(n).newsIconLocal={x:90,y:0};commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.CaiFuHaoEnd,t.showCaiEnd,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.ChangeBtnGrp,t.showSomeButtonByIconList,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.ShowCaiFuHaoEnd,t.showSomeCaiEnd,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.EnterAttackView,t.showAttack,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.ChangeBeAttackUserInfo,t.changeBeAttackUser,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.EnterRandViewFormAttackView,t.enterRandByAttack,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.EnterSeallView,t.showTouQu,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.EnterRandViewOrNongChangViewEvent,t.enterRandViewOrNongChangView,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.ChangeMainViewNewsIcon,t.changeMainViewNewsIcon,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.ChangeMainViewRedSpotInfo,t.changeMainViewRedSpot,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.CloseShowMainView,t.closeShowMainView,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.CloseShowMainViewExitTopGrp,t.closeShowMainViewExitTopGrp,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.refreshUserInfo,t.initShow,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.showUserInfoLand,t.showUserInfoLand,t),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.openSomePanelKey,t.openSomePanelKey,t)},a.prototype.closeShowMainView=function(e){this.visible=e},a.prototype.closeShowMainViewExitTopGrp=function(e,t){void 0===t&&(t=!1);for(var n=0,a=this.numChildren;a>n;n++)"topGrp"==this.getChildAt(n).name&&t||"muchanginfo"==this.getChildAt(n).name||"infoGrp"==this.getChildAt(n).name||(this.getChildAt(n).visible=e)},a.prototype.changeMainViewRedSpot=function(){console.log("修改小红点信息");var t=this,n=baseContent.PanelManager.getIntance().getPenelByPanelKey("AntGrpView");if(n&&n.parent){var a=n.SubViewArr[0];a.parent&&(e.GameDatas.getIntance().redSpotInfo.antGrpBtn.antGrpChatBtn=0)}for(var i=0,o=t.leftBtnGrp.numChildren;o>i;i++)for(var s in e.GameDatas.getIntance().redSpotInfo)if(""+s!="antGrpBtn"||"antGrpBtn"!=t.leftBtnGrp.getChildAt(i).name)""+s==t.leftBtnGrp.getChildAt(i).name&&(t.leftBtnGrp.getChildAt(i).newsIconVisible=1==e.GameDatas.getIntance().redSpotInfo[""+s]);else{var r=!1,c=e.GameDatas.getIntance().redSpotInfo.antGrpBtn;for(var l in c)if(1==c[""+l]){r=!0;break}t.leftBtnGrp.getChildAt(i).newsIconVisible=r}for(var i=0,o=t.rightGrp.numChildren;o>i;i++)for(var s in e.GameDatas.getIntance().redSpotInfo)if(""+s==t.rightGrp.getChildAt(i).name){if(""+s=="huoBtn"){var r=!1;for(var g in e.GameDatas.getIntance().redSpotInfo[""+s]){if(""+g=="ptxiaoxiBtn"){var h=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelPingTuView");h&&h.showMsgRedPoint(1==e.GameDatas.getIntance().redSpotInfo.huoBtn.ptxiaoxiBtn)}if(1==e.GameDatas.getIntance().redSpotInfo[""+s][""+g]){r=!0;break}}t.rightGrp.getChildAt(i).newsIconVisible=r;continue}t.rightGrp.getChildAt(i).newsIconVisible=1==e.GameDatas.getIntance().redSpotInfo[""+s]}},a.prototype.changeMainViewNewsIcon=function(e){switch(e.iconName){case"eggBtn":this.eggBtn.newsIconVisible=e.isShow;break;case"panBtn":this.panBtn.newsIconVisible=e.isShow;break;case"antFarmBtn":this.antFarmBtn.newsIconVisible=e.isShow}},a.prototype.enterRandViewOrNongChangView=function(e){var t=this;"nongchang"==e?(t.someBtnOut(),t.showDaoAnimation(),t.game_scene.toNChangAnimation(),t.eggBtnEnterOrOut("out"),t.panBtnEnterOrOut("enter")):(t.showPanAnimation(),t.game_scene.toRanAnimation(),t.enterSomeButton(),t.eggBtnEnterOrOut("enter"),t.panBtnEnterOrOut("out"))},a.prototype.showSomeOneMsg=function(t,n,a,i){void 0===n&&(n=e.MsgType.attackMsg),void 0===a&&(a=null),void 0===i&&(i=null);var o=commonUtils.ObjectToolsMgr.getOneObjectTools("game.PanelXiaoXiTiXing").getOneObj();o.setShowInfo(t,n),baseContent.PanelManager.getIntance().openPanelInstance(o)},a.prototype.showSomeCaiEnd=function(){var t=this;t.panelXXTX||(t.panelXXTX=new e.PanelXiaoXiTiXingCaiEnd),e.GameDatas.getIntance().caiFuHaoReturnData.is_rich_man?t.panelXXTX.initShow("恭喜你猜中富豪～～得到",e.GameDatas.getIntance().caiFuHaoReturnData.steal_barley,e.GameDatas.getIntance().caiFuHaoReturnData.is_rich_man):t.panelXXTX.initShow("很遗憾你没猜中～～只得到",e.GameDatas.getIntance().caiFuHaoReturnData.steal_barley,e.GameDatas.getIntance().caiFuHaoReturnData.is_rich_man),baseContent.PanelManager.getIntance().openPanelInstance(t.panelXXTX),e.GameDatas.getIntance().is_new_user&&egret.setTimeout(function(){e.NewControlViewMgr.getIntance().currentStepType<e.StepType.touQuResult&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.touQuResult)},this,500)},a.prototype.showLeftBtnCloseOrOpen=function(e){var t=this;e?egret.Tween.get(t.leftBtn).to({left:0},300,egret.Ease.circOut).call(function(){egret.Tween.removeTweens(t.leftBtn)}):egret.Tween.get(t.leftBtn).to({left:-t.leftBtn.width},300,egret.Ease.circOut).call(function(){egret.Tween.removeTweens(t.leftBtn)})},a.prototype.showNextPasture=function(){var e=this;e.someBtnOut(),e.headUIEnterOrOut("out"),e.bottomBtnGrpOutOrEnter("out"),e.panBtnEnterOrOut("out"),e.muchanginfo.visible=!1,e.panBtn.visible=!1,e.showNextAnimation()},a.prototype.enterRandByNextPasture=function(){var e=this;e.headUIEnterOrOut("enter"),e.bottomBtnGrpOutOrEnter("enter"),e.panBtn.visible=!0,e.panBtnEnterOrOut("enter"),e.muchanginfo.visible=!0},a.prototype.showNextAnimation=function(){var t=this;t.gmcjcomView||(t.gmcjcomView=new e.GameMainChangJingCommemorativeView,t.addChild(t.gmcjcomView)),t.gmcjcomView.showCamerAnimation(t)},a.prototype.removeGameMC=function(){this.gmcjcomView.destroy(),this.gmcjcomView=null,platform.triggerGC()},a.prototype.flyOneStar=function(t){var n=this,a=new eui.Image;a.source=n.goldShow.starIcon.source,a.anchorOffsetX=n.goldShow.starIcon.anchorOffsetX,a.anchorOffsetY=n.goldShow.starIcon.anchorOffsetY,a.x=t.x,a.y=t.y,n.addChild(a);var i=new egret.Point;i=n.goldShow.starIcon.parent.localToGlobal(n.goldShow.starIcon.x,n.goldShow.starIcon.y,i),egret.Tween.get(a).to({scaleX:2,scaleY:2},200).to({scaleX:1,scaleY:1},200),egret.Tween.get(a).to({x:i.x,y:i.y},500,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(a),a.parent&&a.parent.removeChild(a),n.goldShow.setStartNum(e.GameDatas.getIntance().user_info.star_num)})},a.prototype.changeBtnGrp=function(e){void 0===e&&(e=null);for(var t=this,n=0,a=0,i=t.leftBtnGrp.numChildren;i>a;a++){var o=t.leftBtnGrp.getChildAt(a);e&&o.name==e.name&&(o.visible=e.isShow),o.visible&&(o.y=135*n+60,n++)}for(var s=0,a=0,i=t.rightGrp.numChildren;i>a;a++){var o=t.rightGrp.getChildAt(a);e&&o.name==e.name&&(o.visible=e.isShow),o.visible&&(o.y=135*s+60,s++)}},a.prototype.showSomeButtonByIconList=function(t){if(void 0===t&&(t=!1),e.GameDatas.getIntance().user_info&&e.GameDatas.getIntance().user_info.max_star_num){for(var n=e.GameDatas.getIntance().iconList,a=[],i=0,o=n.length;o>i;i++)if(e.GameDatas.getIntance().user_info.max_star_num>=n[i].enable_star_num)if("petBtn"==n[i].icon_name)a.push("petBtn");else{var s=n[i].icon_name;a.push(s)}e.GameDatas.getIntance().setIconListInfo(a,t),t||this.showIconListInfo()}},a.prototype.showIconListInfo=function(){var t=!1,n=!1;if(t=1==e.GameDatas.getIntance().user_info.overstep_statu?!0:!1,n=1==e.GameDatas.getIntance().user_info.newbie_task_statu?!0:!1,this.chaoyueBtn.visible=t,this.xinshouBtn.visible=n,e.GameDatas.getIntance()._tempIconsList&&e.GameDatas.getIntance()._tempIconsList.length>0){var a=e.GameDatas.getIntance()._tempIconsList;this.leftBtnGrp.iconShowNum=0,this.rightGrp.iconShowNum=0;for(var i=0,o=a.length;o>i;i++)"chaoyueBtn"!=a[i]&&"xinshouBtn"!=a[i]?(this[a[i]].visible=!0,this[a[i]].parent==this.leftBtnGrp?(this[a[i]].y=135*this.leftBtnGrp.iconShowNum+60,this.leftBtnGrp.iconShowNum+=1):(this[a[i]].y=135*this.rightGrp.iconShowNum+60,this.rightGrp.iconShowNum+=1),"petBtn"==a[i]&&(e.GameDatas.getIntance().user_info.in_battle_pet_id||(baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr([e.GameDatas.game_pet],null,function(){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),baseContent.PanelManager.getIntance().openTypeIntance(game_pet.GamePetInfoEggView)},this)))):this[a[i]].visible&&(this[a[i]].parent==this.leftBtnGrp?(this[a[i]].y=135*this.leftBtnGrp.iconShowNum+60,this.leftBtnGrp.iconShowNum+=1):(this[a[i]].y=135*this.rightGrp.iconShowNum+60,this.rightGrp.iconShowNum+=1))}this.antFarmBtn.visible&&e.GameRequestMgr.getIntance().PastureWorker_getWorkerList_C()},a.prototype.ShowOneIconAdd=function(t){var n=this;if("petBtn"==t)return void(e.GameDatas.getIntance().user_info.in_battle_pet_id||(baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr([e.GameDatas.game_pet],null,function(){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),baseContent.PanelManager.getIntance().openTypeIntance(game_pet.GamePetInfoEggView)},this)));var a=n[t],i=a.iconSource,o=new e.NewFacilityOpenView(t,i,[{text:"新功能开启",style:{textColor:"0xF2B809",size:40}}]),s=new egret.Point;a.parent==n.leftBtnGrp?n.leftBtnGrp.localToGlobal(a.x,135*this.leftBtnGrp.iconShowNum+6+64,s):n.rightGrp.localToGlobal(a.x,135*this.rightGrp.iconShowNum+6+64,s),o.startP=new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth/2,commonUtils.StageUtils.getIntance().stage.stageHeight/2),o.endP=s,baseContent.PanelManager.getIntance().addChild(o)},a.prototype.touchHanle=function(t){var n=this,a=this;switch(t.target){case a.backBtn:a.closeShowMainViewExitTopGrp(!0,!1),a.infoGrp.visible=!1,a.topGrp.visible=a.btnGrp.visible=!0,a.showPanAnimation(),a.game_scene.toRanAnimation(),a.enterSomeButton(),a.eggBtnEnterOrOut("enter"),a.headUIEnterOrOut("enter"),a.panBtnEnterOrOut("out");
break;case a.leftBtn:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelLeftPanel),a.showLeftBtnCloseOrOpen(!1);break;case a.eggBtn:a.toUsNongChang(),commonUtils.EventMananger.getIntance().sendEvent(commonUtils.GlobalEvent.ClickButton);break;case a.panBtn:a.enterRandFuc()}switch(t.target.name){case"huoBtn":baseContent.PanelManager.getIntance().openTypeIntance(e.PanelHuoDongView);break;case"signBtn":baseContent.PanelManager.getIntance().openTypeIntance(e.PanelSignInView);break;case"assBtn":baseContent.PanelManager.getIntance().openTypeIntance(e.PanelAssignmCenter);break;case"addFriendBtn":baseContent.PanelManager.getIntance().openTypeIntance(e.PanelYaoQingJiangLiView);break;case"chaoyueBtn":e.GameNetUrlData.isUseNet&&e.GameRequestMgr.getIntance().Activity_overstep_C(),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelChaoYueJiangLi);break;case"mianfeiBtn":baseContent.PanelManager.getIntance().openTypeIntance(e.PanelJinMeiXiaoShi);break;case"tehuiBtn":baseContent.PanelManager.getIntance().openTypeIntance(e.PanelTeHuiLIBao);break;case"xinshouBtn":baseContent.PanelManager.getIntance().openTypeIntance(e.PanelXinShouMuBiao);break;case"antFarmBtn":e.GameRequestMgr.getIntance().PastureWorker_getWorkerList_C(),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!0),baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView");var i=[e.GameDatas.ant_farm],o=egret.localStorage.getItem("ant_farm_control");o||i.push(e.GameDatas.newControl),commonUtils.ResUtils.getInstance().loadGroupByGrpArr(i,null,function(){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),e.NewControlViewMgr.getIntance().init(),egret.setTimeout(function(){e.GameDatas.getIntance().mine_wokers_infos&&baseContent.PanelManager.getIntance().openTypeIntance(ant_farm.AntFarmView)},n,500)},this);break;case"antGrpBtn":ant_grp.AntGrpRequestMgr.getIntance().AntGroup_mineGroup_C(),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!0),baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr([e.GameDatas.ant_grp],null,function(){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),egret.setTimeout(function(){baseContent.PanelManager.getIntance().openTypeIntance(ant_grp.AntGrpView,{type:"open",showIndex:2})},n,500)},this);break;case"xinjitehuiBtn":baseContent.PanelManager.getIntance().openTypeIntance(e.PanelXinJiTeHui)}},a.prototype.enterRandFuc=function(){var t=this;e.GameDatas.getIntance().is_new_user?e.NewControlViewMgr.getIntance().currentStepType==e.StepType.chaoYueBox&&(e.GameDatas.getIntance().is_new_user=0,this.petBtn.visible=!0,this.paiBeiLvView.visible=!0,t.showSomeButtonByIconList(),egret.setTimeout(function(){e.GameDatas.getIntance().noticeOpen()},t,3e3)):egret.setTimeout(function(){t.showSomeButtonByIconList(!0)},t,750),t.showPanAnimation(),t.game_scene.toRanAnimation(),e.GameDatas.getIntance().is_new_user||t.enterSomeButton(),t.eggBtnEnterOrOut("enter"),t.panBtnEnterOrOut("out")},a.prototype.toUsNongChang=function(){var t=this;t.randPanel.isEnd&&(t.someBtnOut(),t.showDaoAnimation(),t.game_scene.toNChangAnimation(),t.eggBtnEnterOrOut("out"),t.panBtnEnterOrOut("enter"),t.setNongChangTileInfo(),e.GameDatas.getIntance().pasture_.current_level==e.GameDatas.getIntance().pasture_.total_level&&setTimeout(function(){e.GameRequestMgr.getIntance().Pasture_gotoNextPasture_C(),console.log("进入下个岛屿了")},1e3))},a.prototype.showTouQu=function(t){if(void 0===t&&(t=!1),e.GameDatas.getIntance().beStolenInfo){e.GameSoundMgr.playToStealView();var n=this;t?(n.headUIEnterOrOut("out"),n.game_scene.outCaiFuHaoDaoYu(),egret.Tween.get(n).wait(400).call(function(){n.game_scene.showCaiFuHao()},n)):(n.showDao.play(1),n.openOrClosePiaView(!1),n.someBtnOut(),n.eggBtnEnterOrOut("out"),n.bottomBtnGrpOutOrEnter("out"),n.headUIEnterOrOut("out"),n.game_scene.showCaiFuHao())}},a.prototype.showAttack=function(t){if(void 0===t&&(t=!1),e.GameDatas.getIntance().beAttackInfo){var n=this,a=e.GameDatas.getIntance().getSomeOneLandDataById(e.GameDatas.getIntance().beAttackInfo.pasture.id);baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr([a.grpName],null,function(){e.GameDatas.getIntance().is_new_user&&egret.setTimeout(function(){e.NewControlViewMgr.getIntance().currentStepType<e.StepType.attackShowSome&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.attackShowSome)},this,2e3),baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),t?(n.headUIEnterOrOut("out"),n.game_scene.gameNCView.closeView(),egret.Tween.get(n).wait(900).call(function(){n.game_scene.gameNCView.openView(),n.game_scene.showAttackView(),n.game_scene.enterPaoDisplayAnimation()},n)):(n.showDao.play(1),n.openOrClosePiaView(!1),n.someBtnOut(),n.bottomBtnGrpOutOrEnter("out"),n.headUIEnterOrOut("out"),n.eggBtnEnterOrOut("out"),n.game_scene.gameNCView.openView(),n.game_scene.showAttackView(),n.game_scene.showDiIn(),n.game_scene.enterPaoDisplayAnimation())},n)}},a.prototype.changeBeAttackUser=function(){var t=this;t.game_scene.gameNCView.closeView();var n=e.GameDatas.getIntance().beAttackInfo,a=e.GameDatas.getIntance().getSomeOneLandDataById(n.pasture.id);baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr([a.grpName],null,function(){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),egret.Tween.get(t).wait(1e3).call(function(){t.game_scene.gameNCView.openView(),t.game_scene.showAttackView()},t).wait(2e3).call(function(){e.GameDatas.getIntance().is_new_user&&e.NewControlViewMgr.getIntance().currentStepType>e.StepType.attackSomeAttackBtn-2&&e.NewControlViewMgr.getIntance().currentStepType<e.StepType.attackSomeAttackBtn&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.attackSomeAttackBtn),t.game_scene.gameNCView.isShowAttackCenter(!0)},t)},t)},a.prototype.someBtnOut=function(){var e=this;egret.Tween.get(e.leftBtnGrp).to({left:-300},750,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(e.leftBtnGrp)},e),egret.Tween.get(e.leftBtn).to({left:-300},750,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(e.leftBtn)},e),egret.Tween.get(e.rightGrp).to({right:-300},750,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(e.rightGrp)},e),egret.Tween.get(e.petBtn).to({right:-300},750,egret.Ease.sineIn)},a.prototype.bottomBtnGrpOutOrEnter=function(e){void 0===e&&(e="enter");var t=this;"out"==e?egret.Tween.get(t.btnGrp).to({bottom:-300},350,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(t.btnGrp)},t):egret.Tween.get(t.btnGrp).to({bottom:20},350,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(t.btnGrp)},t)},a.prototype.enterSomeButton=function(){var e=this;egret.Tween.get(e.leftBtnGrp).to({left:0},750,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(e.leftBtnGrp)},e),egret.Tween.get(e.leftBtn).to({left:0},750,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(e.leftBtn)},e),egret.Tween.get(e.rightGrp).to({right:0},750,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(e.rightGrp)},e),egret.Tween.get(e.petBtn).to({right:30},750,egret.Ease.sineIn)},a.prototype.eggBtnEnterOrOut=function(e){var t=this,n=0;n="enter"==e?18:-300,egret.Tween.get(t.eggBtn).to({right:n},750,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(t.eggBtn)},t)},a.prototype.panBtnEnterOrOut=function(e){var t=0,n=this;t="enter"==e?18:-300,egret.Tween.get(n.panBtn).to({left:t},750,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(n.panBtn)},n)},a.prototype.headUIEnterOrOut=function(e){var t=this,n=0;return n="enter"==e?10:-380,egret.Tween.get(t.goldShow).to({left:n},750,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(t.goldShow)},t),egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME?(n="enter"==e?180:-380,void egret.Tween.get(t.daimedHead).to({right:n},750,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(t.daimedHead)},t)):void egret.Tween.get(t.daimedHead).to({right:n},750,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(t.daimedHead)},t)},a.prototype.enterRandByDao=function(){var t=this;t.initShow(),e.GameDatas.getIntance().is_new_user||t.enterSomeButton(),t.bottomBtnGrpOutOrEnter("enter"),t.eggBtnEnterOrOut("enter"),t.showPanAnimation(),t.game_scene.showRandByCaiFuHao(),e.GameDatas.getIntance().is_new_user&&egret.setTimeout(function(){commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.clickUsForConstruct)},t,750),t.randPanel.isEnd=!0},a.prototype.enterRandByAttack=function(){var t=this;e.GameDatas.getIntance().randomAttackInfo=e.GameDatas.getIntance().beAttackInfo=null,egret.Tween.get(t).wait(1e3).call(function(){t.initShow(),t.randPanel.isEnd=!0},t),t.showPanAnimation(),e.GameDatas.getIntance().is_new_user||t.enterSomeButton(),t.headUIEnterOrOut("enter"),t.eggBtnEnterOrOut("enter"),t.game_scene.showRandByAttackView()},a.prototype.showDaoAnimation=function(e){void 0===e&&(e=!0),this.showDao.play(1),this.openOrClosePiaView(!1),this.showStartOrCreate(n.muchangView,e)},a.prototype.onRandVisible=function(){this.showDao.removeEventListener(egret.Event.COMPLETE,this.onRandVisible,this),this.randPanel.visible=!0},a.prototype.offRandVisible=function(){this.showDao.removeEventListener(egret.Event.COMPLETE,this.offRandVisible,this),this.randPanel.visible=!1},a.prototype.showPanAnimation=function(){var t=this;this.initShow(),egret.setTimeout(function(){t.openOrClosePiaView(!0)},this,800),this.showPan.play(1),e.GameDatas.getIntance().is_new_user&&(e.NewControlViewMgr.getIntance().currentStepType==e.StepType.clickStarBtn-1?commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.clickStarBtn):e.NewControlViewMgr.getIntance().currentStepType==e.StepType.clickRandBtnEngry-1?commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.clickRandBtnEngry):e.NewControlViewMgr.getIntance().currentStepType==e.StepType.clickForTouQu-1&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.clickForTouQu)),this.showStartOrCreate(n.startView)},a.prototype.showRandPan=function(t,n,a){void 0===a&&(a=null),this.randPanel.randRotation(t,a),this.randPanel.data=n,e.GameNetUrlData.isUseNet&&this.randPanel.reduceEnergy(e.GameDatas.getIntance().currentMult)},a.prototype.removeEvent=function(){var t=this;t.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.eggBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.panBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t);for(var n=0,a=t.leftBtnGrp.numChildren;a>n;n++)t.leftBtnGrp.getChildAt(n).removeEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t);for(var n=0,a=t.rightGrp.numChildren;a>n;n++)t.rightGrp.getChildAt(n).removeEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t);commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.CaiFuHaoEnd,t.showCaiEnd,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.ChangeBtnGrp,t.showSomeButtonByIconList,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.ShowCaiFuHaoEnd,t.showSomeCaiEnd,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.EnterAttackView,t.showAttack,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.ChangeBeAttackUserInfo,t.changeBeAttackUser,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.EnterRandViewFormAttackView,t.enterRandByAttack,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.EnterSeallView,t.showTouQu,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.EnterRandViewOrNongChangViewEvent,t.enterRandViewOrNongChangView,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.ChangeMainViewNewsIcon,t.changeMainViewNewsIcon,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.ChangeMainViewRedSpotInfo,t.changeMainViewRedSpot,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.CloseShowMainView,t.closeShowMainView,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.CloseShowMainViewExitTopGrp,t.closeShowMainViewExitTopGrp,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.refreshUserInfo,t.initShow,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.showUserInfoLand,t.showUserInfoLand,t),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.openSomePanelKey,t.openSomePanelKey,t)},a.prototype.destroy=function(){},a}(baseContent.BaseScene);e.GameMainView=t,__reflect(t.prototype,"game.GameMainView",["baseContent.IScene","baseContent.IObj"]);var n;!function(e){e[e.startView=0]="startView",e[e.muchangView=1]="muchangView"}(n||(n={}))}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="GameNongChang_Nameless_ViewSkin",e.horizontalCenter=0,e.bottom=-1280,e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this);var e=this;e.chao.visible=e.shan.visible=e.che.visible=e.men.visible=e.zhuo.visible=e.nv.visible=e.keng_obj_shan.visible=e.keng_obj_che.visible=e.keng_obj_men.visible=e.keng_obj_zhuo.visible=e.keng_obj_nv.visible=e.centerGrp.visible=!1,e.keng_obj_shan.visible=e.keng_obj_che.visible=e.keng_obj_men.visible=e.keng_obj_zhuo.visible=e.keng_obj_nv.visible=!1,e.centerGrp.visible=!1,e.addEvent()},n.prototype.setUsNongChangeInfo=function(t){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView");var n=this;if(!e.GameDatas.getIntance().beAttackInfo){var a=e.GameDatas.getIntance().getSomeOneLandDataById(t.id),i="game_mainView_changjing_"+a.nameStr+"_island_island2_png";if(viewTools.RESTools.setImgRes(n.chao,i),t)for(var o=0,s=5;s>o;o++)n.showSomeOneByInfo(o,t.buildings["build"+(o+1)].level,t.id,t.buildings["build"+(o+1)].condition);t=null,a=null}},n.prototype.setAttackNongChangeInfo=function(){if(e.GameDatas.getIntance().beAttackInfo){var t=this,n=e.GameDatas.getIntance().beAttackInfo,a=e.GameDatas.getIntance().getSomeOneLandDataById(n.pasture.id);t.other_sence_grp&&t.other_sence_grp!=a.grpName&&t.other_sence_grp!=e.GameDatas.getIntance().us_pastureRes_name&&viewTools.RESTools.destroySomeOneGrp(t.other_sence_grp),t.other_sence_grp=a.grpName,console.log("进入攻击界面"),t.centerGrp.visible=!1;var i="game_mainView_changjing_"+a.nameStr+"_island_island2_png";viewTools.RESTools.setImgRes(t.chao,i);for(var o=0,s=5;s>o;o++)t.showSomeOneByInfo(o,n.pasture.buildings["build"+(o+1)].level,n.pasture.id,n.pasture.buildings["build"+(o+1)].condition);n=null,a=null,n=null}},n.prototype.isShowAttackCenter=function(e){this.centerGrp.visible=e},n.prototype.openView=function(){var t=this;t.visible=!0,egret.Tween.get(t).to({y:commonUtils.StageUtils.getIntance().stage.stageHeight-1280},800,egret.Ease.bounceOut).call(function(){egret.Tween.removeTweens(t),e.GameDatas.getIntance().is_new_user&&(e.NewControlViewMgr.getIntance().currentStepType<=e.StepType.buildOneConstrction?commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.enterNongChangBeginConstruct):e.NewControlViewMgr.getIntance().currentStepType==e.StepType.clickChuiForConstruct-1&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.clickChuiForConstruct))},t)},n.prototype.closeView=function(){var e=this;egret.Tween.get(e).to({y:commonUtils.StageUtils.getIntance().stage.stageHeight},800).call(function(){egret.Tween.removeTweens(e),e.visible=!1},e)},n.prototype.showBuildAnimation=function(t,n){var a=this;t.visible=!1;var i=this;baseContent.SceneLayerMgr.getIntance().getCurrenScene().panBtn.touchEnabled=!1;var o=new egret.Point;o=t.parent.localToGlobal(100,200-t.texture.textureHeight/2,o),o=i.nongchangGrp.globalToLocal(o.x,o.y,o);var s=i.nongchangGrp.getChildByName("build_animation");s||(s=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("build_animation","MovieClip","build_animation"),i.nongchangGrp.addChild(s),s.name="build_animation"),s.x=o.x,s.y=o.y,o=null,s.animation.play("newAnimation",1),e.GameSoundMgr.playBuild(),egret.Tween.get(t).wait(1330).call(function(){t.visible=!0,e.GameSoundMgr.playBuildComplet(),viewTools.GameSomeAnimationUitl.showSomeConstrctionComplete(t)},i).wait(500).call(function(){baseContent.SceneLayerMgr.getIntance().getCurrenScene().panBtn.touchEnabled=!0,e.GameDatas.getIntance().is_new_user&&e.NewControlViewMgr.getIntance().currentStepType==e.StepType.showToRandContinueInfo-1&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.showToRandContinueInfo),e.GameDatas.getIntance().rank&&baseContent.PanelManager.getIntance().openTypeIntance(e.NewPaiMingUp),console.log("检测建造效果");var i=new egret.Point;i=t.parent.parent.localToGlobal(t.parent.x,t.parent.y,i),baseContent.SceneLayerMgr.getIntance().getCurrenScene().flyOneStar(i),e.GameDatas.getIntance().openGiftShow(),5==n&&e.GameDatas.getIntance().pasture_.current_level!=e.GameDatas.getIntance().pasture_.total_level&&(console.log("单个建造完成到5级别"),egret.setTimeout(function(){baseContent.PanelManager.getIntance().openTypeIntance(e.GameMainChangJingCompletOneTypeView)},a,1700))},i)},n.prototype.showSomeOneByInfo=function(t,n,a,i){var o=e.GameDatas.getIntance().getSomeOneLandDataById(a).nameStr,s="game_mainView_changjing_"+o+"_island_",r=this;switch(t){case 0:r.setSomeOneCondition(r.shanCenter,r.shan,i,n,s,"fengjing");break;case 1:r.setSomeOneCondition(r.cheCenter,r.che,i,n,s,"che");break;case 2:r.setSomeOneCondition(r.menCenter,r.men,i,n,s,"fang");break;case 3:r.setSomeOneCondition(r.zhuoCenter,r.zhuo,i,n,s,"jianzhu");break;case 4:r.setSomeOneCondition(r.nvCenter,r.nv,i,n,s,"nv")}},n.prototype.setSomeOneAttackedStatus=function(t,n,a){var i=t.level,o=e.GameDatas.getIntance().getSomeOneLandDataById(a),s=o.nameStr,r="game_mainView_changjing_"+s+"_island_",c=this;if(2==n)switch(t.name){case"obj_shan":c.setSomeOneShow(t,r+"fengjing"+i+"_damage_png",!0);break;case"obj_che":c.setSomeOneShow(t,r+"che"+i+"_damage_png",!0);break;case"obj_men":c.setSomeOneShow(t,r+"fang"+i+"_damage_png",!0);break;case"obj_zhuo":c.setSomeOneShow(t,r+"jianzhu"+i+"_damage_png",!0);break;case"obj_nv":c.setSomeOneShow(t,r+"nv"+i+"_damage_png",!0)}else t.visible=!1,c.removeSomeOneSmoke(t),c.showSomeOneKeng(t.name)},n.prototype.showSomeOneKeng=function(e,t){switch(void 0===t&&(t=!0),e){case"obj_shan":this.keng_obj_shan.visible=t;break;case"obj_che":this.keng_obj_che.visible=t;break;case"obj_men":this.keng_obj_men.visible=t;break;case"obj_zhuo":this.keng_obj_zhuo.visible=t;break;case"obj_nv":this.keng_obj_nv.visible=t}},n.prototype.setSomeOneCondition=function(t,n,a,i,o,s){var r=this;return 0==a?(console.log(n.name+"完全损坏"),t.visible=!1,n.visible=!1,r.showSomeOneKeng(n.name),void r.removeSomeOneSmoke(n)):(r.showSomeOneKeng(n.name,!1),0==i&&2==a?(t.visible=!1,n.visible=!1,r.removeSomeOneSmoke(n),!1):(n.condition==a&&n.level==i||1!=e.GameDatas.getIntance().isShowBuildAnimation?1==a?(t.visible=!0,r.setSomeOneShow(n,o+s+i+"_damage_png",!0)):(t.visible=!0,r.setSomeOneShow(n,o+s+i+"_png",!1)):(r.showBuildAnimation(n,i),r.setSomeOneShow(n,o+s+i+"_png",!1,!1)),n.condition=a,void(n.level=i)))},n.prototype.setSomeOneShow=function(e,t,n,a){void 0===a&&(a=!0);var i=this,o=function(t){e.source=t,e.visible=a,n?i.createSmokeOfSomeOne(e):i.removeSomeOneSmoke(e)};e.visible=!1,viewTools.RESTools.getSomeRes(t,o),console.log("设置建造资源-->"+t)},n.prototype.createSmokeOfSomeOne=function(e){console.log("创建一个烟效果-->"+e.name);var t;if(t=e.parent.getChildByName("somke_"+e.name),!t){var n,a;n=RES.getRes("smoke_animation_png"),a=RES.getRes("smoke_animation_json"),t=new particle.GravityParticleSystem(n,a),e.parent.addChildAt(t,0),t.x=100,t.y=100,t.name="somke_"+e.name}t.visible=!0,t.start(-1)},n.prototype.removeSomeOneSmoke=function(e){var t;t=e.parent.getChildByName("somke_"+e.name),t&&(t.visible=!1,t.stop())},n.prototype.addEvent=function(){var e=this;e.cheCenter.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.menCenter.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.zhuoCenter.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.shanCenter.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.nvCenter.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e)},n.prototype.touchHanle=function(t){var n=this;switch(t.target){case n.cheCenter:case n.menCenter:case n.zhuoCenter:case n.shanCenter:case n.nvCenter:e.GameSoundMgr.clickTargetCenter(),commonUtils.EventMananger.getIntance().sendEvent(commonUtils.GlobalEvent.ClickButton),baseContent.SceneLayerMgr.getIntance().getCurrenScene().game_scene.closeAttackTitleInfo(),console.log(t.target.name),e.GameDatas.getIntance().attackobj=n[t.target.name],e.GameNetUrlData.isUseNet&&e.GameDatas.getIntance().beAttackInfo&&e.GameRequestMgr.getIntance().Luckydraw_toAttact_C(e.GameDatas.getIntance().beAttackInfo.id,e.GameDatas.getIntance().beAttackInfo.pasture.buildings["build"+(t.target.parent.getChildIndex(t.target)+1)].build_id)}},n}(eui.Component);e.GameNongChangView=t,__reflect(t.prototype,"game.GameNongChangView")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="GameRandPanel",e.indexArr={1:18,2:-18,3:-90,4:-162,5:-198,6:-270,7:-234,8:-126,9:-54,10:-306},e.isEnd=!0,e.data="恭喜你",e.skinName="GameRandPanelSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.setInfo=function(){this.setCenterInfo(),this.setRandInfo()},n.prototype.reduceEnergy=function(e){var t=this,n=50,a=t.engText.energy;a&&(a-e>n?(egret.Tween.removeTweens(t.timeShow),t.suiGrp.y=400,t.engGrp.visible=!1,t.addNum.text="+"+(a-n-e),t.engText.text=n+"/"+n,t.timeGrp.visible=!1,t.addGrp.visible=!0):a-e==n?(egret.Tween.removeTweens(t.timeShow),t.timeGrp.visible=!1,t.addGrp.visible=!0,t.addNum.text="已满",t.suiGrp.y=400,t.engGrp.visible=!1):(t.timeGrp.visible=!0,t.addGrp.visible=!1,t.engText.text=a-e+"/"+n,t.suiGrp.y=520-(a-e)/n*120,t.timeShow.visible=!0,t.timeShow.index||t.showTimeView(3600),t.engGrp.visible=!1))},n.prototype.setCenterInfo=function(){var t=this;t.textGrp.cacheAsBitmap=!1;var n=e.GameDatas.getIntance().user_info,a=50;t.engText.energy=n.energy,n.energy>a?(egret.Tween.removeTweens(t.timeShow),t.suiGrp.y=400,t.timeShow.visible=!0,t.addNum.text="+"+(n.energy-a),t.timeGrp.visible=!1,t.addGrp.visible=!0,t.engText.text="50/"+a):n.energy==a?(egret.Tween.removeTweens(t.timeShow),t.timeGrp.visible=!1,t.addGrp.visible=!0,t.engText.text="50/"+a,t.addNum.text="已满",t.suiGrp.y=400,t.engGrp.visible=!1):(t.engText.text=n.energy+"/"+a,t.suiGrp.y=520-n.energy/a*120,t.timeShow.visible=!0,t.showTimeView(n.energy_left_time),t.engGrp.visible=!1,t.timeGrp.visible=!0,t.addGrp.visible=!1),t.textGrp.cacheAsBitmap=!0},n.prototype.setRandHeadInfo=function(){var t=e.GameDatas.getIntance().richManInfo;if(t){var n=this;n.headInfoGrp.cacheAsBitmap=!1,egret.Tween.get(n.headInfoGrp).to({y:220},750).call(function(){t&&t.avatar&&t.avatar.length>0&&commonUtils.ImageTools.loadImage(t.avatar,function(e){n.showImg.source=e},n),n.userName.text=commonUtils.StringTool.formatStrLen(t.user_name),commonUtils.NumberTool.showSomeLableAddNumberAnimation(n.gold,n.gold.currentNum,t.barley_num,750),n.headInfoGrp.cacheAsBitmap=!0},n).to({y:0},500).call(function(){egret.Tween.removeTweens(n.headInfoGrp)},n)}},n.prototype.setRandInfo=function(){var t=this;t.rotationGrp.cacheAsBitmap=!1;var n=e.GameDatas.getIntance().luckydraw_info;if(n)for(var a=0,i=6;i>a;a++){var o=t.rotationGrp.getChildAt(a+1),s=n[a+1+""].title;o.text=s+""}t.rotationGrp.cacheAsBitmap=!0},n.prototype.showShuiBoAnimaiton=function(){var e=this;egret.Tween.removeTweens(e.suiGrp);var t=1;egret.Tween.get(e.suiGrp,{loop:!0}).wait(10).call(function(){for(var n=0,a=e.suiGrp.numChildren;a>n;n++){var i=e.suiGrp.getChildAt(n);i.x+=t,i.x>=540&&(i.x=-270)}})},n.prototype.init=function(){var e=this;e.gold.currentNum=0,e.engGrp.visible=!1,e.rotationGrp.rotation=18,e.showImg.mask=e.showMask,e.suiGrp.mask=e.suiImgMask,e.headInfoGrp.cacheAsBitmap=!0,e.showShuiBoAnimaiton(),e.addEvent()},n.prototype.showTimeView=function(t){var n=t,a=this;return n?void(n!=a.timeShow.index&&(console.log("index--->"+n),a.timeShow.index=n,a.timeShow.text=commonUtils.NumberTool.getShowTime(n),egret.Tween.removeTweens(a.timeShow),egret.Tween.get(a.timeShow,{loop:!0}).wait(1e3).call(function(){return n--,0>n?(e.GameRequestMgr.getIntance().User_getUserinfo_C(),a.timeShow.index=null,void egret.Tween.removeTweens(a.timeShow)):void(a.timeShow.text=commonUtils.NumberTool.getShowTime(n))}))):(a.timeGrp.visible=!1,a.addGrp.visible=!0,a.addNum.text="已满",a.suiGrp.y=400,void(a.engGrp.visible=!1))},n.prototype.enable=function(){},n.prototype.addEvent=function(){},n.prototype.removeEvent=function(){},n.prototype.randRotation=function(t,n){void 0===t&&(t=0),void 0===n&&(n=null);var a=this,i=a.indexArr[""+t];egret.Tween.removeTweens(a.rotationGrp),egret.Tween.get(a.rotationGrp).to({rotation:3600+i},3e3,egret.Ease.sineOut).call(function(){egret.Tween.removeTweens(a.rotationGrp),e.GameNetUrlData.isUseNet?baseContent.SceneLayerMgr.getIntance().getCurrenScene().showRandEnd(a.data,n):baseContent.SceneLayerMgr.getIntance().getCurrenScene().showRandEnd({type:1,odds:"恭喜你"})},a)},n.prototype.destroy=function(){this.removeEvent()},n}(eui.Component);e.GameRandPanel=t,__reflect(t.prototype,"game.GameRandPanel",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.width=391,e.height=40,e.isFinish=!0,e.msgQueue=new Queue,e.skinName="GameRunHorseViewSkin",e}return __extends(n,t),n.getIntance=function(){return n.instance_||(n.instance_=new e.GameRunHorseView),n.instance_},n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.msgLabel.mask=this.msgMask,this.touchChildren=!1,this.addEvent()},n.prototype.showSomeMessage=function(t){var n=e.GameRunHorseView.getIntance();n.parent||(baseContent.SceneLayerMgr.getIntance().getCurrenScene().addChild(n),n.x=(commonUtils.StageUtils.getIntance().stage.stageWidth-n.width)/2,n.y=132),n.msgQueue.put(t),n.openOneMsg()},n.prototype.openOneMsg=function(){var t=e.GameRunHorseView.getIntance();t.isFinish&&t.showMsg(t.msgQueue.pull())},n.prototype.showMsg=function(t){var n=e.GameRunHorseView.getIntance();n.isFinish=!1;var a=[];a="antgroup_employ"==t.type?[{text:t.user_name+" 招募成员：",style:{textColor:"0xffffff",fontFamily:"Microsoft YaHei"}},{text:t.message,style:{textColor:"0xffffff",fontFamily:"Microsoft YaHei"}}]:[{text:t.user_name+" : ",style:{textColor:"0xffffff",fontFamily:"Microsoft YaHei"}},{text:t.message,style:{textColor:"0xffffff",fontFamily:"Microsoft YaHei"}}],n.msgLabel.textFlow=a,n.msgLabel.text=commonUtils.StringTool.getShortStrAtByte(n.msgLabel.text,32),n.msgLabel.verticalCenter=50,egret.Tween.get(n.msgLabel).to({verticalCenter:0},200,egret.Ease.sineIn).wait(2e3).to({verticalCenter:-50},200,egret.Ease.sineOut).wait(500).call(function(){n.isFinish=!0,0==n.msgQueue.size?egret.setTimeout(function(){n.parent&&n.parent.removeChild(n)},n,1e3):n.openOneMsg()},n)},n.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.touchHandle=function(t){var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatView");n&&n.enterForRunHorse(!0),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelChatView,!0)},n.prototype.removeEvent=function(){},n.prototype.destroy=function(){},n}(eui.Component);e.GameRunHorseView=t,__reflect(t.prototype,"game.GameRunHorseView")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.name="GameSenceBgView",t.init(),t}return __extends(t,e),t.prototype.init=function(){var e=this;e.showBg(),e.showYun(),e.rectSecen=new egret.Shape,e.rectSecen.graphics.beginFill(0),e.rectSecen.graphics.drawRect(0,0,commonUtils.StageUtils.getIntance().stage.stageWidth,commonUtils.StageUtils.getIntance().stage.stageHeight),e.rectSecen.graphics.endFill(),e.rectSecen.alpha=0,e.addChild(e.rectSecen)},t.prototype.showSkyBalckAnimation=function(){var e=this;egret.Tween.get(this.rectSecen).to({alpha:1},500,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(e.rectSecen)},this)},t.prototype.showSkyLightAnimation=function(){var e=this;egret.Tween.get(this.rectSecen).to({alpha:0},500,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(e.rectSecen)},this)},t.prototype.showBg=function(){var e=RES.getRes("game_mainView_changjing_beijing_png");this.bg=new egret.Bitmap(e),this.addChild(this.bg),this.bg.width=commonUtils.StageUtils.getIntance().stage.stageWidth,this.bg.height=commonUtils.StageUtils.getIntance().stage.stageHeight},t.prototype.showYun=function(){var e=["game_mainView_changjing_yun1_png","game_mainView_changjing_yun2_png","game_mainView_changjing_yun3_png","game_mainView_changjing_yun5_png","game_mainView_changjing_yun6_png"],t=this;t.yunConten=new egret.DisplayObjectContainer,t.yunConten.width=commonUtils.StageUtils.getIntance().stage.stageWidth,t.yunConten.height=commonUtils.StageUtils.getIntance().stage.stageHeight;for(var n=0;5>n;n++){var a=RES.getRes(e[n]),i=new egret.Bitmap(a);i.x=-a.textureWidth,i.y=Math.random()*commonUtils.StageUtils.getIntance().stage.stageHeight,egret.Tween.get(i,{loop:!0}).to({x:commonUtils.StageUtils.getIntance().stage.stageWidth},3e4*Math.random()+2e4),t.yunConten.addChild(i)}t.addChild(t.yunConten)},t}(egret.DisplayObjectContainer);e.GameSenceBgView=t,__reflect(t.prototype,"game.GameSenceBgView")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this,a=e;return n.GameSenceView_=a,a.once(egret.Event.ADDED_TO_STAGE,a.cacheBitMapView,a),a.addEvent(),a.initGameSenceBg(),a.init(),e}return __extends(n,t),n.prototype.initGameSenceBg=function(){this._gameSenceBg||(this._gameSenceBg=new e.GameSenceBgView,this.addChild(this._gameSenceBg))},n.prototype.cacheBitMapView=function(){},n.prototype.init=function(){var t=this;t.gameNCView||(t.gameNCView=new e.GameNongChangView,t.addChild(t.gameNCView),t.gameNCView.y=commonUtils.StageUtils.getIntance().stage.stageHeight),t.landOne||(t.landContainer=new egret.DisplayObjectContainer,t.landContainer.width=commonUtils.StageUtils.getIntance().stage.stageWidth,t.landContainer.height=575,t.landContainer.y=commonUtils.StageUtils.getIntance().stage.stageHeight-t.landContainer.height+120,t.landOne=new egret.Bitmap,t.landContainer.addChild(t.landOne),t.landOne.x=-1350,t.landOne.y=40,t.landTwo=new egret.Bitmap,t.landContainer.addChild(t.landTwo),t.landTwo.x=-100,t.landTwo.y=40,t.addChild(t.landContainer)),t.initPaoDanObj(),t.initPaoDisply()},n.prototype.addEvent=function(){commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.CloseShowChaoPing,this.closeShowChaoPing,this),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.UpdataUsNongChangInfo,this.setNongChangeInfo,this),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.AttackEvent,this.attacking,this)},n.prototype.closeShowChaoPing=function(e){this.landContainer.visible=e},n.prototype.initPaoDisply=function(){var e=this;if(!e.paoDisply){e.paoDisply=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("attack_animation","MovieClip","attack_animation"),e.addChild(e.paoDisply),e.paoDisply.name="attack_animation",e.paoDisply.x=commonUtils.StageUtils.getIntance().getStageWidth()/2,e.paoDisply.y=commonUtils.StageUtils.getIntance().getStageHeight()+200;var t=function(){e.paoDisply.animation.play("daiji",-1)
};e.paoDisply.addEventListener(egret.Event.COMPLETE,t,e)}e.paoDisply.animation.play("daiji",-1),e.paoDisply.visible=!1},n.prototype.initPaoDanObj=function(){var t=this;t.paoDan||(t.paoDan=new e.GameAttackBullet,t.addChild(t.paoDan)),t.paoDan.y=commonUtils.StageUtils.getIntance().getStageHeight()/2+100,t.paoDan.x=-200},n.prototype.showGuangPlay=function(e,t,n){var a=this;a.guangDisply||(a.guangDisply=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("protect_boom_proanimation","MovieClip","protect_boom_proanimation"),a.addChild(a.guangDisply),a.guangDisply.name="protect_boom_proanimation",a.guangDisply.x=commonUtils.StageUtils.getIntance().getStageWidth()/2,a.guangDisply.y=commonUtils.StageUtils.getIntance().getStageHeight()+250,a.guangDisply.addEventListener(egret.Event.COMPLETE,function(){a.guangDisply.parent.removeChild(a.guangDisply)},a)),a.guangDisply.parent||a.addChild(a.guangDisply),a.guangDisply.x=t,a.guangDisply.y=n,a.guangDisply.animation.play(e,1)},n.prototype.showJinBiDisply=function(e,t){var n=this;if(!n.jinBiDisply){n.jinBiDisply=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("protect_gold_proanimation","MovieClip","protect_gold_proanimation"),n.jinBiDisply.name="protect_gold_proanimation",n.jinBiDisply.x=commonUtils.StageUtils.getIntance().getStageWidth()/2,n.jinBiDisply.y=commonUtils.StageUtils.getIntance().getStageHeight()+200;var a=function(){n.removeChild(n.jinBiDisply)};n.jinBiDisply.addEventListener(egret.Event.COMPLETE,a,n)}n.jinBiDisply.parent||n.addChild(n.jinBiDisply),n.jinBiDisply.x=e,n.jinBiDisply.y=t,n.jinBiDisply.animation.play("miniprotect-gold",1)},n.prototype.showJinbiCuiHui=function(e,t){var n=this;if(!n.jinBiCuiHuiDisply){n.jinBiCuiHuiDisply=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("boomgold_proanimation","MovieClip","boomgold_proanimation"),n.jinBiCuiHuiDisply.name="boomgold_proanimation",n.jinBiCuiHuiDisply.x=commonUtils.StageUtils.getIntance().getStageWidth()/2,n.jinBiCuiHuiDisply.y=commonUtils.StageUtils.getIntance().getStageHeight()+200;var a=function(){n.removeChild(n.jinBiCuiHuiDisply)};n.jinBiCuiHuiDisply.addEventListener(egret.Event.COMPLETE,a,n)}n.jinBiCuiHuiDisply.parent||n.addChild(n.jinBiCuiHuiDisply),n.jinBiCuiHuiDisply.x=e,n.jinBiCuiHuiDisply.y=t,n.jinBiCuiHuiDisply.animation.play("boom",1)},n.prototype.showBoomCuiHui=function(e,t){var n=this;if(!n.boomCuiHuiDisply){n.boomCuiHuiDisply=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("boom_proanimation","MovieClip","boom_proanimation"),n.boomCuiHuiDisply.name="boom_proanimation",n.boomCuiHuiDisply.x=commonUtils.StageUtils.getIntance().getStageWidth()/2,n.boomCuiHuiDisply.y=commonUtils.StageUtils.getIntance().getStageHeight()+200;var a=function(){n.removeChild(n.boomCuiHuiDisply)};n.boomCuiHuiDisply.addEventListener(egret.Event.COMPLETE,a,n)}n.boomCuiHuiDisply.parent||n.addChild(n.boomCuiHuiDisply),n.boomCuiHuiDisply.x=e,n.boomCuiHuiDisply.y=t,n.boomCuiHuiDisply.animation.play("attack",1)},n.prototype.showHuDunPlay=function(e){var t=this;if(!t.huDunDisply){t.huDunDisply=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("protect_proanimation","MovieClip","protect_proanimation"),t.huDunDisply.name="protect_proanimation",t.huDunDisply.x=commonUtils.StageUtils.getIntance().stage.stageWidth/2,t.huDunDisply.y=commonUtils.StageUtils.getIntance().stage.stageHeight/2;var n=function(){t.removeChild(t.huDunDisply)};t.huDunDisply.addEventListener(egret.Event.COMPLETE,n,t)}t.huDunDisply.parent||t.addChild(t.huDunDisply),t.huDunDisply.animation.play(e,1)},n.prototype.showGamePetDunAnimaion=function(e){var t=this;if(!t.gamePetAnimaDisply){t.gamePetAnimaDisply=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("hafei_animation","Armature","hafei_animation"),t.gamePetAnimaDisply.name="gamePetAnimaDisply",t.gamePetAnimaDisply.x=commonUtils.StageUtils.getIntance().stage.stageWidth/2,t.gamePetAnimaDisply.y=commonUtils.StageUtils.getIntance().stage.stageHeight-500;var n=function(){t.removeChild(t.gamePetAnimaDisply)};t.gamePetAnimaDisply.addEventListener(egret.Event.COMPLETE,n,t)}t.addChildAt(t.gamePetAnimaDisply,t.getChildIndex(t.paoDan)-1),t.gamePetAnimaDisply.animation.play(e,1)},n.prototype.showSkyBalckAnimation=function(){this._gameSenceBg.showSkyBalckAnimation()},n.prototype.showSkyLightAnimation=function(){this._gameSenceBg.showSkyLightAnimation()},n.prototype.cameraOnePhoto=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=new Promise(function(t){var n="game_mainView_changjing_commemorative_"+e.GameDatas.getIntance().getSomeOneLandDataById(e.GameDatas.getIntance().user_info.pasture_id-1).nameStr+"_png";t(new egret.Bitmap(RES.getRes(n)))}),[2,t]})})},n.prototype.setNongChangeInfo=function(t){var n=this;this.temp_pasture_list=t;var a=e.GameDatas.getIntance().getSomeOneLandDataById(t.id);return e.GameDatas.getIntance().us_pastureRes_name==a.grpName?void n.setNongChangInfo():(e.GameDatas.getIntance().us_pastureRes_name&&viewTools.RESTools.destroySomeOneGrp(e.GameDatas.getIntance().us_pastureRes_name),baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),e.GameDatas.getIntance().is_new_user||!game_pet.GamePetControlViewMgr.getIntance().isControlEnd()?commonUtils.ResUtils.getInstance().loadGroupByGrpArr([e.GameDatas.newControl,a.grpName],null,n.setNongChangInfoFirst,n,4):commonUtils.ResUtils.getInstance().loadGroupByGrpArr([a.grpName],null,n.setNongChangInfo,n,4),void(t=null))},n.prototype.setNongChangInfoFirst=function(){game_pet.GamePetControlViewMgr.getIntance().isControlEnd()||game_pet.GamePetControlViewMgr.getIntance().init(),e.GameDatas.getIntance().is_new_user&&(e.NewControlViewMgr.getIntance().init(),0==e.NewControlViewMgr.getIntance().getCurrentSenceType()?e.NewControlViewMgr.getIntance().currentStepType>=e.StepType.buildOneConstrction&&e.NewControlViewMgr.getIntance().currentStepType<e.StepType.attackMsg?commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.clickStarBtn):e.NewControlViewMgr.getIntance().currentStepType>=e.StepType.attackSomeOne&&e.NewControlViewMgr.getIntance().currentStepType<e.StepType.attackHuInfo?commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.clickRandBtnEngry):e.NewControlViewMgr.getIntance().currentStepType>=e.StepType.attackSomeOne&&e.NewControlViewMgr.getIntance().currentStepType<=e.StepType.attackSomeAttackBtn?commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.attackHuInfo):e.NewControlViewMgr.getIntance().currentStepType>=e.StepType.attackSomeAttackBtn&&e.NewControlViewMgr.getIntance().currentStepType<e.StepType.touQuResult?commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.clickForTouQu):e.NewControlViewMgr.getIntance().currentStepType>=e.StepType.touQuResult&&e.NewControlViewMgr.getIntance().currentStepType<e.StepType.constructionOne&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.clickUsForConstruct):this.toNChangAnimation()),this.setNongChangInfo()},n.prototype.setNongChangInfo=function(){var t=this.temp_pasture_list;baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView");var n=e.GameDatas.getIntance().getSomeOneLandDataById(t.id);e.GameDatas.getIntance().us_pastureRes_name=n.grpName,this.gameNCView.setUsNongChangeInfo(t),this.setLandInfo(),t=n=null},n.prototype.setLandInfo=function(){if(this.landInfo_id!=e.GameDatas.getIntance().user_info.pasture_id){this.landInfo_id=e.GameDatas.getIntance().user_info.pasture_id;var t=e.GameDatas.getIntance().getSomeOneLandDataById(e.GameDatas.getIntance().user_info.pasture_id).nameStr;viewTools.RESTools.setBitmapRes(this.landOne,"game_mainView_changjing_"+t+"_island_island1_png"),viewTools.RESTools.setBitmapRes(this.landTwo,"game_mainView_changjing_"+t+"_island_island1_png")}},n.prototype.toNChangAnimation=function(){platform.triggerGC(),this.showDiIn(),this.gameNCView.openView()},n.prototype.showDiIn=function(){egret.Tween.get(this.landOne).to({x:-1425,y:130},750),egret.Tween.get(this.landTwo).to({x:-280,y:130},750)},n.prototype.showDiOut=function(){egret.Tween.get(this.landOne).to({x:-1350,y:40},750),egret.Tween.get(this.landTwo).to({x:-100,y:40},750)},n.prototype.toRanAnimation=function(){platform.triggerGC(),this.showDiOut(),this.gameNCView.closeView()},n.prototype.initCaiFuHao=function(){this.gameCaiFuHao=new e.GameCaiFuHaoView,this.addChild(this.gameCaiFuHao)},n.prototype.showCaiFuHao=function(){var t=this;platform.triggerGC(),this.init(),this.gameCaiFuHao||this.initCaiFuHao(),this.gameCaiFuHao.alpha=1,egret.Tween.get(this.landContainer).to({y:commonUtils.StageUtils.getIntance().stage.stageHeight+this.landContainer.height},750,egret.Ease.sineOut).call(function(){e.GameDatas.getIntance().is_new_user&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.touQuSomeInfo),egret.Tween.removeTweens(t.landContainer)},this),this.gameCaiFuHao.visible=!0,this.gameCaiFuHao.showEnterDaoYu()},n.prototype.showRandByCaiFuHao=function(){var e=this;platform.triggerGC(),egret.Tween.get(this.landContainer).to({y:commonUtils.StageUtils.getIntance().stage.stageHeight-this.landContainer.height+120},750,egret.Ease.sineIn).call(function(){egret.Tween.removeTweens(e.landContainer)}),this.outCaiFuHaoDaoYu()},n.prototype.outCaiFuHaoDaoYu=function(){var e=this;this.gameCaiFuHao.seccGrp.visible=!1,egret.Tween.get(this.gameCaiFuHao).to({alpha:0},300).call(function(){egret.Tween.removeTweens(e.gameCaiFuHao),e.gameCaiFuHao.visible=!1},this)},n.prototype.showAttackTitleInfo=function(){var t=this;t.attackHeadInfoView||(t.attackHeadInfoView=new e.GameAttackViewHeadView),t.attackHeadInfoView.parent&&t.attackHeadInfoView.parent.removeChild(t),t.addChild(t.attackHeadInfoView)},n.prototype.closeAttackTitleInfo=function(){var e=this;e.attackHeadInfoView.close()},n.prototype.showAttackView=function(){this.showAttackTitleInfo(),this.paoDisply.rotation=0,this.gameNCView.setAttackNongChangeInfo()},n.prototype.enterPaoDisplayAnimation=function(){var t=this;e.GameSoundMgr.playEnterAttackView(),t.paoDisply.visible=!0,t.paoDisply.scaleX=t.paoDisply.scaleY=.8,t.paoDisply.y=commonUtils.StageUtils.getIntance().getStageHeight()+200,egret.Tween.removeTweens(t.paoDisply),egret.Tween.get(t.paoDisply).to({y:commonUtils.StageUtils.getIntance().getStageHeight()-130,scaleX:1,scaleY:1},1300).call(function(){t.paoDisply.animation.play("zhunbei",1),console.log("准备动画")},t).wait(1e3).call(function(){t.gameNCView.isShowAttackCenter(!0)},t),t.flyOnePaoDan()},n.prototype.outPaoDisplayAnimation=function(){var e=this;e.paoDisply.visible=!0,egret.Tween.removeTweens(e.paoDisply),egret.Tween.get(e.paoDisply).to({y:commonUtils.StageUtils.getIntance().getStageHeight()+200,scaleX:.8,scaleY:.8},1500).call(function(){e.paoDisply.visible=!1},e)},n.prototype.setPaoDanOutPoint=function(){this.paoDan.y=commonUtils.StageUtils.getIntance().getStageHeight()/2+100,this.paoDan.x=-200},n.prototype.setPaoDanPaoPoint=function(){this.paoDan.x=this.paoDisply.x,this.paoDan.y=this.paoDisply.y-50},n.prototype.flyOnePaoDan=function(){var e=this;e.gameNCView.isShowAttackCenter(!1),e.paoDan.visible=!0,e.setPaoDanOutPoint();var t=new egret.Point(e.paoDan.x,e.paoDan.y),n=new egret.Point(e.paoDan.x+300,e.paoDan.y-150),a=new egret.Point(e.paoDisply.x,e.paoDisply.y-e.paoDisply.height);e.paoDan.showBeiSaiErMove(t,n,a,1500)},n.prototype.getSomeOneBeAttackedRes=function(t,n){var a=t.level,i=e.GameDatas.getIntance().getSomeOneLandDataById(n).nameStr,o="game_mainView_changjing_"+i+"_island_";switch(t.name){case"obj_shan":o+="fengjing"+a+"_damage_png";break;case"obj_che":o+="che"+a+"_damage_png";break;case"obj_men":o+="fang"+a+"_damage_png";break;case"obj_zhuo":o+="jianzhu"+a+"_damage_png";break;case"obj_nv":o+="nv"+a+"_damage_png"}viewTools.RESTools.getSomeRes(o)},n.prototype.attacking=function(){var t=e.GameDatas.getIntance().attackResData;t.award_barley_pet?(baseContent.PanelManager.getIntance().openTypeIntance(game_pet.GamePetActionView,e.GameDatas.getIntance().user_info.in_battle_pet_id),egret.setTimeout(this.attackSomeOne,this,500)):this.attackSomeOne()},n.prototype.attackSomeOne=function(t){void 0===t&&(t=e.GameDatas.getIntance().attackobj);var n=this;n.gameNCView.isShowAttackCenter(!1);var a=new egret.Point;a=t.parent.localToGlobal(t.x,t.y,a),a=n.globalToLocal(a.x,a.y,a);var i=new egret.Point(a.x,a.y-500),o=function(){var s=this,r=function(){e.GameSoundMgr.playAttackShoot(),n.paoDisply.animation.play("kaipai",1),n.setPaoDanPaoPoint()};commonUtils.FunctionUtil.asyncComeSomeFunc(r),n.paoDan.visible=!0;var c=700,l=300,g=e.GameDatas.getIntance().attackResData;if(e.GameSoundMgr.playBomeFly(),2==g.attact_status||3==g.attact_status){var h=function(){n.getSomeOneBeAttackedRes(t,e.GameDatas.getIntance().beAttackInfo.pasture.id)};commonUtils.FunctionUtil.asyncComeSomeFunc(h),egret.Tween.get(n.paoDan).to({x:i.x,y:i.y,scaleX:.8,scaleY:.8},c,egret.Ease.sineOut).to({x:a.x,y:a.y,scaleX:1,scaleY:1},l,egret.Ease.sineIn).call(function(){n.paoDan.visible=!1,n.setPaoDanOutPoint(),e.GameSoundMgr.playBomeExplode(),n.showSomeOneBeAttacked(t)},n).wait(300).call(function(){var a=e.GameEvent.EnterRandViewFormAttackView,i=!1;e.GameDatas.getIntance().showAttackOrStolenNum>0&&(e.GameRequestMgr.getIntance().Luckydraw_getAttact_C(),a=e.GameEvent.EnterAttackView,i=!0);var o=commonUtils.ObjectToolsMgr.getOneObjectTools("game.PanelXiaoXiTiXing").getOneObj(),r="";n.gameNCView.setSomeOneAttackedStatus(t,g.attact_status,e.GameDatas.getIntance().beAttackInfo.pasture.id),2==g.attact_status?(r="破坏了",n.gameNCView.createSmokeOfSomeOne(t)):r="摧毁了",g.award_barley_pet?o.setShowInfo([{infoStr:r+e.GameDatas.getIntance().beAttackInfo.user_name+"的",typeColor:0},{infoStr:e.GameDatas.getIntance().getSomeObjByName(t.name),typeColor:1},{infoStr:"，得到了",typeColor:0},{infoStr:""+e.GameDatas.getIntance().attackResData.award_barley,typeColor:2},{infoStr:"麦苗！\n",typeColor:0},{infoStr:"宠物获得：",typeColor:0},{infoStr:""+e.GameDatas.getIntance().attackResData.award_barley_pet,typeColor:2},{infoStr:"麦苗！",typeColor:0}],null,a,i):o.setShowInfo([{infoStr:r+e.GameDatas.getIntance().beAttackInfo.user_name+"的",typeColor:0},{infoStr:e.GameDatas.getIntance().getSomeObjByName(t.name),typeColor:1},{infoStr:"，得到了",typeColor:0},{infoStr:""+e.GameDatas.getIntance().attackResData.award_barley,typeColor:2},{infoStr:"麦苗！",typeColor:0}],null,a,i),e.GameDatas.getIntance().beAttackInfo=null,baseContent.PanelManager.getIntance().openPanelInstance(o),egret.setTimeout(function(){e.GameDatas.getIntance().is_new_user&&(e.NewControlViewMgr.getIntance().currentStepType<e.StepType.attackMsg?commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.attackMsg):e.NewControlViewMgr.getIntance().currentStepType<e.StepType.attackSomeInfoSureBtn&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.attackSomeInfoSureBtn))},s,500)},n).wait(1e3).call(function(){n.outPaoDisplayAnimation()},n)}else egret.Tween.get(n.paoDan).to({x:i.x,y:i.y,scaleX:.8,scaleY:.8},c,egret.Ease.sineOut).to({x:a.x,y:a.y,scaleX:1,scaleY:1},l,egret.Ease.sineIn).call(function(){return 4==g.attact_status?(e.GameSoundMgr.playBomeSheild(),void n.showPaoDanTan(800+400*Math.random(),a)):(n.showGuangPlay("protect_boom",n.paoDan.x,n.paoDan.y),n.showJinBiDisply(n.paoDan.x,n.paoDan.y),0==g.attact_status?n.showHuDunPlay("protect"):n.showHuDunPlay("protect_mini_type"+g.build_id),e.GameSoundMgr.playBomeSheild(),void n.showPaoDanTan(800+400*Math.random(),a))},n);o=null};e.GameDatas.getIntance().attackResData&&4==e.GameDatas.getIntance().attackResData.attact_status&&(console.log("被宠物格挡了"),egret.setTimeout(function(){n.showGamePetDunAnimaion("defense")},n,500));var s=n.getSomeTwoObjAng(n.paoDisply,t,i);s=180*s/Math.PI,s=s>0?s-90:90+s,console.log("旋转炮台->"+s),egret.Tween.get(n.paoDisply).to({rotation:s},500,egret.Ease.sineIn).call(o,n)},n.prototype.showPaoDanTan=function(t,n){var a=this,i=-60+60*Math.random();i=i/180*Math.PI,console.log("弹射角度-->"+i);var o;o=Math.sin(i)*t+n.x;var s;s=-Math.cos(i)*t+n.y,egret.Tween.get(a.paoDan).to({x:o,y:s},500,egret.Ease.sineOut).wait(300).call(function(){a.paoDan.visible=!1,a.setPaoDanOutPoint();var t=e.GameEvent.EnterRandViewFormAttackView,n=!1;e.GameDatas.getIntance().showAttackOrStolenNum>0&&(e.GameRequestMgr.getIntance().Luckydraw_getAttact_C(),t=e.GameEvent.EnterAttackView,n=!0);var i=commonUtils.ObjectToolsMgr.getOneObjectTools("game.PanelXiaoXiTiXing").getOneObj();e.GameDatas.getIntance().attackResData.award_barley_pet?i.setShowInfo([{infoStr:"攻击被阻挡了，得到",typeColor:0},{infoStr:""+e.GameDatas.getIntance().attackResData.award_barley,typeColor:2},{infoStr:"麦苗！\n",typeColor:0},{infoStr:"宠物获得：",typeColor:0},{infoStr:""+e.GameDatas.getIntance().attackResData.award_barley_pet,typeColor:2},{infoStr:"麦苗！",typeColor:0}],null,t,n):i.setShowInfo([{infoStr:"攻击被阻挡了，得到",typeColor:0},{infoStr:""+e.GameDatas.getIntance().attackResData.award_barley,typeColor:2},{infoStr:"麦苗！",typeColor:0}],null,t,n),e.GameDatas.getIntance().beAttackInfo=null,baseContent.PanelManager.getIntance().openPanelInstance(i)},a).wait(1e3).call(function(){a.outPaoDisplayAnimation()},a)},n.prototype.showRandByAttackView=function(){this.showDiOut(),this.gameNCView.closeView()},n.prototype.showSomeOneBeAttacked=function(t){var n=this;egret.Tween.get(t).to({scaleX:.9,scaleY:1.2},200,egret.Ease.backInOut).to({scaleX:1,scaleY:1},200,egret.Ease.backInOut).call(function(){egret.Tween.removeTweens(t)});var a=(e.GameDatas.getIntance().attackResData,new egret.Point);a=t.parent.localToGlobal(t.x,t.y,a),a=n.globalToLocal(a.x,a.y,a),n.showBoomCuiHui(a.x,a.y),n.showJinbiCuiHui(a.x,a.y)},n.prototype.getSomeTwoObjAng=function(e,t,n){void 0===n&&(n=null);var a=new egret.Point;a=e.parent.localToGlobal(e.x,e.y,a);var i=new egret.Point;return n?(i.x=n.x,i.y=n.y):i=t.parent.localToGlobal(t.x,t.y,i),Math.atan((i.y-a.y)/(i.x-a.x))},n.prototype.getSomePointArrOfLine=function(e,t,n){var a,i=Math.atan(Math.abs((t.y-e.y)/(t.x-e.x)));a=t.x-e.x>0?Math.cos(i)*n+t.x:-Math.cos(i)*n+t.x;var o;return o=-Math.sin(i)*n+t.y,new egret.Point(a,o)},n}(egret.DisplayObjectContainer);e.GameSenceView=t,__reflect(t.prototype,"game.GameSenceView")}(game||(game={}));var game;!function(e){var t=function(t){function n(e,n,a){var i=t.call(this)||this;return i.className_key="NewFacilityOpenView",i.infoSource_=n,i.title_=a,i.icon_name=e,i.skinName="NewFacilityOpenViewSkin",i}return __extends(n,t),Object.defineProperty(n.prototype,"startP",{get:function(){return this._startP},set:function(e){this._startP=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"endP",{get:function(){return this._endP},set:function(e){this._endP=e},enumerable:!0,configurable:!0}),n.prototype.setShowSomeSourceInfo=function(){this.iconShow.source=this.infoSource_},n.prototype.init=function(){this.setShowSomeSourceInfo()},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){egret.Tween.get(this.guang_img,{loop:!0}).to({rotation:360},3e3),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHand,this)},n.prototype.touchHand=function(){console.log("确定飞-->"+this.icon_name),e.GameDatas.getIntance()._tempIconsList.push(this.icon_name),this.destroy(),this.flyOneShow()},n.prototype.flyOneShow=function(){var t=new egret.Bitmap(this.iconShow.texture);t.anchorOffsetX=this.iconShow.texture.textureWidth/2,t.anchorOffsetY=this.iconShow.texture.textureHeight/2,baseContent.SceneLayerMgr.getIntance().addChild(t),t.x=this.startP.x,t.y=this.startP.y,t.scaleX=t.scaleY=0,egret.Tween.get(t).wait(200).to({scaleX:1.5,scaleY:1.5,y:this.startP.y-200},100,egret.Ease.bounceInOut).wait(200).to({scaleX:1,scaleY:1,x:this.endP.x,y:this.endP.y},300,egret.Ease.sineIn).call(function(){console.log("设置按钮"),t.parent&&(baseContent.SceneLayerMgr.getIntance().getCurrenScene().showIconListInfo(),t.parent.removeChild(t),egret.Tween.removeTweens(t),e.GameDatas.getIntance().openOneNewFaclity())})},n.prototype.removeEvent=function(){egret.Tween.removeTweens(this.guang_img),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHand,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeUsFromParent()},n}(baseContent.BasePanel);e.NewFacilityOpenView=t,__reflect(t.prototype,"game.NewFacilityOpenView",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(e){function t(t,n){var a=e.call(this)||this;return a._info=t,a._isUs=n,a.width=a.height=200,a.anchorOffsetX=100,a.anchorOffsetY=200,a.skinName="GameMapUserInfoSkin",a}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){if(this._isUs?this.headImg.source="game_map_view_tex_json.antGame_panel_icon_map_head2_png":this.headImg.source="game_map_view_tex_json.antGame_panel_icon_map_head0_png",this.img_show.mask=this.img_mask,this.textGrp.visible=!1,null!=this._info.percent||void 0!=this._info.percent){var e=[];e=[{text:"距离下个岛完成",style:{textColor:"0xffffff"}},{text:this._info.percent+"%",style:{textColor:"0xCCD619"}}],this.persent_label.textFlow=e,this.textGrp.visible=!0}this._info.avatar&&this._info.avatar.length>0&&commonUtils.ImageTools.loadImage(this._info.avatar,function(e){this.img_show.source=e},this)},t}(eui.Component);e.GameMapUserInfo=t,__reflect(t.prototype,"game.GameMapUserInfo")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="GameMapView",e.isCreateOk=!1,e.skinName="GameMapViewSkin",e.contientGrps=[e.asiaCenterGrp,e.europeCenterGrp],e}return __extends(n,t),n.prototype.enable=function(){this.scrlist.viewport.scrollV=this.scrlist.parent.height,e.GameRequestMgr.getIntance().Map_getFriendsLocation_C(),t.prototype.enable.call(this)},n.prototype.init=function(){this.isCreateOk=!0},n.prototype.initShow=function(t){return __awaiter(this,void 0,void 0,function(){var n,a=this;return __generator(this,function(i){return n=this,new Promise(function(i){1==t.mine.state?a.setContinent("Asia"):2==t.mine.state&&a.setContinent("Europe"),n.lineConnect(t.mine.pasture_id),n.info_grp.removeChildren();var o=new e.GameMapUserInfo(t.mine,!0),s=n.info_grp.getChildByName("continentInfoGrp_"+t.mine.state);s||(s=a.getShowInfoGrp(t.mine.state),n.info_grp.addChild(s)),s.addChild(o);var r=1001;t.mine.pasture_id<=1023?r=1001:t.mine.pasture_id<=1099&&(r=1024);var c=n.contientGrps[t.mine.state-1].getChildAt(t.mine.pasture_id-r);o.x=c.x,o.y=c.y;for(var l=0,g=t.friends.length;g>l;l++){t.friends[l].pasture_id<=1023?r=1001:t.friends[l].pasture_id<=1099&&(r=1024),c=n.contientGrps[t.friends[l].state-1].getChildAt(t.friends[l].pasture_id-r);var h=new e.GameMapUserInfo(t.friends[l],!1),u=n.info_grp.getChildByName("continentInfoGrp_"+t.friends[l].state);u||(u=a.getShowInfoGrp(t.mine.state),n.info_grp.addChild(u)),u.addChild(h),h.x=c.x,h.y=c.y}n.showContientMineFriendsInfo(),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!1)}),[2]})})},n.prototype.getShowInfoGrp=function(e){var t=new eui.Group;return t.top=t.bottom=t.left=t.right=0,t.name="continentInfoGrp_"+e,t},n.prototype.setContinent=function(e){this.localContinent!=e&&(this.localContinent=e,"Asia"==this.localContinent?(this.mapGrp.width=1717,this.mapBg.source="antGame_panel_bg_jpg",this.continentLabel.text="亚洲",this.conGrp.getChildAt(0).selected=!0):"Europe"==this.localContinent&&(this.mapGrp.width=1650,this.mapBg.source="antGame_panel_bg_ou_jpg",this.continentLabel.text="欧洲",this.conGrp.getChildAt(1).selected=!0),this.scr.viewport.scrollH=this.mapGrp.width-720)},n.prototype.showContientMineFriendsInfo=function(){for(var e=0,t=this.info_grp.numChildren;t>e;e++)this.info_grp.getChildAt(e).visible=!1;for(var e=0,t=this.contientGrps.length;t>e;e++)this.contientGrps[e].visible=!1;var n=0;"Asia"==this.localContinent?n=1:"Europe"==this.localContinent&&(n=2);var a=this.info_grp.getChildByName("continentInfoGrp_"+n);a&&(a.visible=!0),this.contientGrps[n-1].visible=!0},n.prototype.lineConnect=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=this,t.local_pasture_id==e?[2]:(new Promise(function(n){t.local_pasture_id=e;for(var a=t.asiaCenterGrp.getChildAt(0),i=0,o=t.asiaCenterGrp.numChildren-1;o>i;i++){a=t.asiaCenterGrp.getChildAt(i);var s=void 0;9>i?s="100"+(i+1):99>i&&(s="10"+(i+1)),e>=parseInt(s)?(a.source="antGame_panel_icon_map_location_png",a.anchorOffsetX=a.anchorOffsetY=16,a.visible=!0):(a.anchorOffsetX=a.anchorOffsetY=11,a.source="antGame_panel_icon_map_location1_png",a.visible=!1)}if(!(1023>=e))for(var i=0,o=t.europeCenterGrp.numChildren-1;o>i;i++){a=t.europeCenterGrp.getChildAt(i);var s=1024+i;e>=s?(a.source="antGame_panel_icon_map_location_png",a.anchorOffsetX=a.anchorOffsetY=16,a.visible=!0):(a.anchorOffsetX=a.anchorOffsetY=11,a.source="antGame_panel_icon_map_location1_png",a.visible=!1)}}),[2])})})},n.prototype.lineOneTo=function(e,t,n){return __awaiter(this,void 0,void 0,function(){var a,i,o,s,r,c,l,g,h,u;return __generator(this,function(p){for(a=new egret.Shape,a.graphics.beginFill(4229272),a.graphics.lineStyle(4),i=10,o=t.x-e.x,s=t.y-e.y,r=s/o,c=Math.cos(Math.atan(r)),l=Math.sin(Math.atan(r)),0>o&&0>s&&(c*=-1,l*=-1),0>o&&s>0&&(l*=-1,c*=-1),h=new egret.Point,u=!0,g=new egret.Point,g.x=e.x,g.y=e.y;;)if(h.x=c*i+g.x,h.y=l*i+g.y,u?(a.graphics.moveTo(g.x,g.y),a.graphics.lineTo(h.x,h.y),u=!1):u=!0,g.x=h.x,g.y=h.y,egret.Point.distance(g,t)<i||egret.Point.distance(h,t)<i)break;return a.graphics.endFill(),n.addChild(a),[2]})})},n.prototype.addOneLandName=function(t,n,a){var i=new eui.Label;i.width=200,i.height=80,i.textAlign="center",i.verticalAlign="middle",i.fontFamily="Microsoft YaHei",i.size=25,i.strokeColor=1668539,i.stroke=2,i.anchorOffsetX=100;var o=e.GameDatas.getIntance().getSomeOneLandDataById(n);i.text=o.info+"\n"+o.englishName,a.addChild(i),i.x=t.x,i.y=t.y},n.prototype.addEvent=function(){this.backBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.aorb.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this);for(var e=0,t=this.conGrp.numChildren;t>e;e++){var n=this.conGrp.getChildAt(e);n.addEventListener(egret.TouchEvent.TOUCH_TAP,this.changeSelect,this)}},n.prototype.touchHandle=function(t){var n=this;switch(t.target){case this.backBtn:commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!0),egret.setTimeout(function(){n.removeUsFromParent(),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!1)},this,750);break;case this.aorb:this.scrlist.viewport.scrollV==this.scrlist.parent.height?egret.Tween.get(this.scrlist.viewport).to({scrollV:0},500,egret.Ease.sineIn):0==this.scrlist.viewport.scrollV&&egret.Tween.get(this.scrlist.viewport).to({scrollV:this.scrlist.parent.height},500,egret.Ease.sineIn)}},n.prototype.changeSelect=function(e){var t=this.conGrp.getChildIndex(e.target);switch(t){case 0:this.setContinent("Asia"),this.showContientMineFriendsInfo(),egret.Tween.get(this.scrlist.viewport).to({scrollV:this.scrlist.parent.height},500,egret.Ease.sineIn);break;case 1:this.setContinent("Europe"),this.showContientMineFriendsInfo(),egret.Tween.get(this.scrlist.viewport).to({scrollV:this.scrlist.parent.height},500,egret.Ease.sineIn)}},n.prototype.removeEvent=function(){this.backBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.aorb.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this);for(var e=0,t=this.conGrp.numChildren;t>e;e++){var n=this.conGrp.getChildAt(e);n.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.changeSelect,this)}},n.prototype.destroy=function(){},n}(baseContent.BasePanel);e.GameMapView=t,__reflect(t.prototype,"game.GameMapView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.top=e.bottom=e.left=e.right=0,e.skinName="GameMiWuViewMgrSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.touchEnabled=!1,this.touchChildren=!1,this.leftYun.left=this.rightYun.right=-900,commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.MiwuZheDangEvent,this.changeMiwu,this)},n.prototype.changeMiwu=function(e){e?this.open_miwu():this.close_miwu()},n.prototype.open_miwu=function(){this.touchEnabled=!0,egret.Tween.get(this.leftYun).to({left:0},450),egret.Tween.get(this.rightYun).to({right:0},450)},n.prototype.close_miwu=function(){this.touchEnabled=!1,egret.Tween.get(this.leftYun).to({left:-900},450),egret.Tween.get(this.rightYun).to({right:-900},450)},n}(eui.Component);e.GameMiWuViewMgr=t,__reflect(t.prototype,"game.GameMiWuViewMgr")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.init(),e}return __extends(n,t),n.prototype.init=function(){var e=new eui.Image;e.source="panel_gift_view_guang_img_png",this.addChild(e),e.horizontalCenter=e.verticalCenter=0,this.iconShow=new eui.Image,this.addChild(this.iconShow),this.iconShow.horizontalCenter=this.iconShow.verticalCenter=0,this.titleImg=new eui.Image,this.addChild(this.titleImg),this.titleImg.y=-40,this.titleImg.horizontalCenter=0;var t=new eui.Image;t.source="xinshou_zhiyin_tex_json.game_xinshouyindao_text_nextStep_png",this.addChild(t),t.horizontalCenter=0,t.verticalCenter=220},n.prototype.setShowSome=function(e,t){switch(e){case 0:this.showSomeLableType(1),this.iconShow.source="panel_common_icons_json.game_icon_hudun_0_png";break;case 1:this.showSomeLableType(2),this.iconShow.source="panel_common_icons_json.panel_xinshou_pao_icon_png";break;case 2:this.showSomeLableType(4),this.iconShow.source="panel_common_icons_json.panel_xinshou_chaoyue_icon_png",this.createHead();break;case 3:this.showSomeLableType(3),this.iconShow.source="panel_common_icons_json.panel_xinshou_mayitou_icon_png"}},n.prototype.showSomeLableType=function(e){switch(e){case 1:this.titleImg.source="xinshou_zhiyin_tex_json.game_xinshouyindao_text_hudunjianjie_png";break;case 2:this.titleImg.source="xinshou_zhiyin_tex_json.game_xinshouyindao_text_gongjichouren_png";break;case 3:this.titleImg.source="xinshou_zhiyin_tex_json.game_xinshouyindao_text_yiyebaofu_png";break;case 4:this.titleImg.source="xinshou_zhiyin_tex_json.game_xinshouyindao_text_xingongnengkaifa_png"}},n.prototype.createHead=function(){this.headImgGrp=new eui.Group,this.headImgGrp.top=this.headImgGrp.bottom=this.headImgGrp.right=this.headImgGrp.left=0;var t=new eui.Image,n=new eui.Image;n.width=n.height=t.width=t.height=140,n.horizontalCenter=t.horizontalCenter=0,n.verticalCenter=t.verticalCenter=3,n.mask=t,t.source="antGame_panel_icon_headSculpturepng_png",viewTools.RESTools.setHeadImg(n,e.GameDatas.getIntance().stepUserHeadUrl),this.headImgGrp.addChild(n),this.headImgGrp.addChild(t),this.addChildAt(this.headImgGrp,1)},n}(eui.Component);e.NewConstrolShowSomeOneObj=t,__reflect(t.prototype,"game.NewConstrolShowSomeOneObj")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.init(),t.touchEnabled=t.touchChildren=!1,t.width=222,t.height=128,t.anchorOffsetX=111,t.anchorOffsetY=94,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.addToStageCall,t),t}return __extends(t,e),t.prototype.addToStageCall=function(){var e=this;e.scaleX=e.scaleY=0,e.parent.showPointAndTouch(!1),egret.setTimeout(function(){egret.Tween.get(e).to({scaleX:1,scaleY:1},300,egret.Ease.bounceOut).call(function(){e.parent.showPointAndTouch(!0)},e)},e,300)},t.prototype.init=function(){this.bgP=new egret.Bitmap(RES.getRes("xinshou_zhiyin_tex_json.game_xinshouyindao_panel_huihuakuang_png")),this.addChild(this.bgP),this.bgP.anchorOffsetX=111,this.bgP.x=111,this.labelPao=new eui.Label,this.addChild(this.labelPao),this.labelPao.x=50,this.labelPao.y=20,this.labelPao.width=120,this.labelPao.height=70,this.labelPao.textAlign="center",this.labelPao.verticalAlign="middle"
},t.prototype.setContent=function(e,t){void 0===t&&(t=!0);for(var n=[],a=0,i=e.length;i>a;a++)n.push(e[a]);this.labelPao.textFlow=n,this.labelPao.lineSpacing=3,t?this.bgP.scaleX=1:this.bgP.scaleX=-1},t.prototype.addEvent=function(){},t.prototype.removeEvent=function(){},t.prototype.destroy=function(){},t}(egret.DisplayObjectContainer);e.NewControlShowPaoContent=t,__reflect(t.prototype,"game.NewControlShowPaoContent",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.init(),e.touchEnabled=e.touchChildren=!1,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.addStageCall,e),e}return __extends(n,t),n.prototype.addStageCall=function(){console.log("添加到舞台回调--标题");var t=this;t.textContent.viewport.scrollH=610,t.headContent.scaleX=0,t.headContent.scaleY=0,t.leftContent.visible=!1,t.parent instanceof e.NewControlView&&t.parent.showPointAndTouch(!1),egret.setTimeout(function(){egret.Tween.get(t.headContent).to({scaleX:1,scaleY:1},300,egret.Ease.bounceOut).call(function(){egret.Tween.get(t.textContent.viewport).to({scrollH:0},500,egret.Ease.bounceOut).wait(100).call(function(){t.leftContent.visible=!0,t.parent instanceof e.NewControlView&&t.parent.showPointAndTouch(!0)},t)},t)},t,300)},n.prototype.init=function(){var e=this;e.centerContent=new egret.DisplayObjectContainer,e.addChild(e.centerContent),e.centerContent.x=10,e.textContent=new eui.Scroller,e.centerContent.addChild(e.textContent),e.textContent.width=610,e.textContent.height=220;var t=new eui.Group;e.textContent.addChild(t),e.textContent.x=100,e.textContent.viewport=t,e.textContent.viewport.scrollH=610,e.headContent=new egret.DisplayObjectContainer,e.headContent.width=240,e.headContent.height=222,e.headContent.anchorOffsetX=e.headContent.x=120,e.headContent.anchorOffsetY=e.headContent.y=111,e.centerContent.addChild(e.headContent),e.headContent.scaleX=0,e.headContent.scaleY=0,e.leftContent=new egret.DisplayObjectContainer,e.centerContent.addChild(e.leftContent),e.leftContent.visible=!1;var n=new egret.Bitmap(RES.getRes("xinshou_zhiyin_tex_json.game_xinshouyindao_panel_zhisih_kuang_png"));t.addChild(n),n.y=30,e.label=new eui.Label,t.addChild(e.label),e.label.x=150,e.label.y=60,e.label.width=400,e.label.height=130,e.label.textAlign="left",e.label.verticalAlign="middle",e.label.lineSpacing=3;var a=new egret.Bitmap(RES.getRes("xinshou_zhiyin_tex_json.game_xinshouyindao_panel_zhisih_yuan_png"));e.headContent.addChild(a),a.y=30;var i=new egret.Bitmap(RES.getRes("xinshou_zhiyin_tex_json.game_xinshouyindao_panel_suona_png"));e.headContent.addChild(i),i.x=10,e.showLabel=new egret.TextField,e.showLabel.size=24,e.showLabel.text="点击任意位置继续",e.showLabel.textAlign="right",e.showLabel.width=620,e.showLabel.y=235,e.leftContent.addChild(e.showLabel);var o=new egret.Bitmap(RES.getRes("xinshou_zhiyin_tex_json.game_xinshouyindao_icon_jixu_png"));e.leftContent.addChild(o),o.y=230,o.x=630},n.prototype.showSomeTitle=function(e,t,n){if(void 0===n&&(n="点击任意位置继续"),e&&!(e.length<1)){this.showLabel.text=n,this.centerContent.y=t;for(var a=[],i=0,o=e.length;o>i;i++)a.push(e[i]);this.label.textFlow=a}},n.prototype.addEvent=function(){},n.prototype.removeEvent=function(){},n.prototype.destroy=function(){},n}(egret.DisplayObjectContainer);e.NewControlShowTileContentView=t,__reflect(t.prototype,"game.NewControlShowTileContentView",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var n=t.call(this)||this;n.className_key="NewControlView",n.container=new egret.DisplayObjectContainer;var a=new egret.Shape;return a.graphics.beginFill(0,.55),a.graphics.drawRect(0,0,commonUtils.StageUtils.getIntance().stage.stageWidth,commonUtils.StageUtils.getIntance().stage.stageHeight),a.graphics.endFill(),n.container.addChild(a),n.dp=new egret.Shape,n.container.addChild(n.dp),n.dp.blendMode=egret.BlendMode.ERASE,n.bitmap=new egret.Bitmap,n.bitmap.touchEnabled=!0,n.bitmap.pixelHitTest=!0,n.addChild(n.bitmap),n.bitmap.name="bitmap",n.showHadC(),n.touchEnabled=!1,n.showTitleC=new e.NewControlShowTileContentView,n.showPao=new e.NewControlShowPaoContent,n.touchGrp=new eui.Group,n.addChild(n.touchGrp),n.touchGrp.top=n.touchGrp.bottom=n.touchGrp.left=n.touchGrp.right=0,n.showAndSomeOne=new e.NewConstrolShowSomeOneObj,n.showAndSomeOne.touchEnabled=n.showAndSomeOne.touchChildren=!1,n.showAndSomeOne.verticalCenter=n.showAndSomeOne.horizontalCenter=0,n}return __extends(n,t),Object.defineProperty(n.prototype,"dp",{get:function(){return this._dp},set:function(e){this._dp=e},enumerable:!0,configurable:!0}),n.prototype.init=function(){},n.prototype.showSomeType=function(e){switch(e){case"title":this.addSomeOneOrRemove(this,this.showTitleC,!0),this.addSomeOneOrRemove(this,this.showPao,!1),this.addSomeOneOrRemove(this,this.showAndSomeOne,!1);break;case"pao":this.addSomeOneOrRemove(this,this.showTitleC,!1),this.addSomeOneOrRemove(this,this.showPao,!0),this.addSomeOneOrRemove(this,this.showAndSomeOne,!1);break;case"addSome":this.addSomeOneOrRemove(this,this.showTitleC,!1),this.addSomeOneOrRemove(this,this.showPao,!1),this.addSomeOneOrRemove(this,this.showAndSomeOne,!0);break;case"null":this.addSomeOneOrRemove(this,this.showTitleC,!1),this.addSomeOneOrRemove(this,this.showPao,!1),this.addSomeOneOrRemove(this,this.showAndSomeOne,!1)}},n.prototype.addSomeOneOrRemove=function(e,t,n){if(n){if(t.parent==e)return;e.addChild(t)}else{if(t.parent!=e)return;e.removeChild(t)}},n.prototype.initShow=function(e,t){if(void 0===t&&(t=!0),e.parent){var n=e.width>e.height?e.width:e.height;n/=2;var a=new egret.Point;a=e.parent.localToGlobal(e.x,e.y,a),this.dp.graphics.clear(),this.dp.graphics.beginFill(0,1),this.dp.graphics.drawCircle(e.width/2,e.height/2,n),this.dp.graphics.endFill(),this.dp.x=a.x,this.dp.y=a.y,this.showHad.x=a.x+e.width/2,this.showHad.y=a.y+e.height/2,t?this.showHad.scaleX=-1:this.showHad.scaleX=1;var i=new egret.RenderTexture;i.drawToTexture(this.container),this.bitmap.texture=i}},n.prototype.initShowPointCircle=function(t,n,a){void 0===a&&(a=!0);var i=this;e.NewControlViewMgr.getIntance().touchEnabledRect=!1,i.dp.graphics.clear(),i.dp.graphics.beginFill(0,1),i.dp.graphics.drawCircle(n/2,n/2,n),i.dp.graphics.endFill(),i.dp.x=t.x-n/2,i.dp.y=t.y-n/2,i.showHad.x=t.x,i.showHad.y=t.y,a?i.showHad.scaleX=-1:i.showHad.scaleX=1;var o=new egret.RenderTexture;o.drawToTexture(i.container),i.bitmap.texture=o,i.bitmap.alpha=0,egret.Tween.get(i.bitmap).to({alpha:1},300)},n.prototype.initShowPointRect=function(t,n,a,i,o,s){void 0===i&&(i=!0),void 0===o&&(o=!1),void 0===s&&(s=1);var r=this;e.NewControlViewMgr.getIntance().touchEnabledRect=!1,r.touchGrp.touchEnabled=o,r.dp.graphics.clear(),r.dp.graphics.beginFill(0,1),r.dp.graphics.drawRect(0,0,commonUtils.StageUtils.getIntance().stage.stageWidth,a),r.dp.graphics.endFill(),r.dp.x=0,r.dp.y=n,r.showHad.x=t.x,r.showHad.y=t.y,i?r.showHad.scaleX=-1:r.showHad.scaleX=1;var c=new egret.RenderTexture;c.drawToTexture(r.container),r.bitmap.texture=c,console.log("透明的效果-->"+s),0==s&&s+""=="0"?r.bitmap.alpha=0:(r.bitmap.alpha=0,egret.Tween.get(r.bitmap).to({alpha:1},300))},n.prototype.initShowObjRect=function(t,n,a,i,o){void 0===a&&(a=!0),void 0===i&&(i=!1),void 0===o&&(o=1);var s=this;e.NewControlViewMgr.getIntance().touchEnabledRect=!1,s.touchGrp.touchEnabled=i,n.x=t.x,n.y=t.y,s.dp.graphics.clear(),s.dp.graphics.beginFill(0,1),s.dp.graphics.drawRect(0,0,commonUtils.StageUtils.getIntance().stage.stageWidth,commonUtils.StageUtils.getIntance().stage.stageHeight),s.dp.graphics.endFill(),s.dp.mask=n,s.showHad.x=t.x+100,s.showHad.y=t.y+120,a?s.showHad.scaleX=-1:s.showHad.scaleX=1;var r=new egret.RenderTexture;r.drawToTexture(s.container),s.bitmap.texture=r,console.log("透明的效果-->"+o),0==o&&o+""=="0"?s.bitmap.alpha=0:(s.bitmap.alpha=0,egret.Tween.get(s.bitmap).to({alpha:1},300))},n.prototype.initShowTitle=function(e,t,n){void 0===e&&(e=null),void 0===t&&(t=0),void 0===n&&(n="点击任意位置继续"),this.showSomeType("title"),this.showTitleC.showSomeTitle(e,t,n)},n.prototype.initShowPao=function(e,t,n){void 0===e&&(e=null),void 0===n&&(n=!0),this.showSomeType("pao"),this.showPao.setContent(e,n),this.showPao.x=t.x+this.showPao.anchorOffsetX,this.showPao.y=t.y+this.showPao.anchorOffsetY},n.prototype.showHadC=function(){var e=this;if(!e.showHad){e.showHad=viewTools.GameSomeAnimationUitl.getSomeDroBoneAnimation("a","tutorialhand","tutorialhand"),e.showHad.name="a",e.showHad.x=commonUtils.StageUtils.getIntance().stage.stageWidth/2,e.showHad.y=commonUtils.StageUtils.getIntance().stage.stageHeight/2;var t=function(){e.removeChild(e.showHad)};e.showHad.addEventListener(egret.Event.COMPLETE,t,e)}e.showHad.parent||e.addChild(e.showHad),e.showHad.animation.gotoAndPlay("tutorialhand"),e.showHad.touchEnabled=e.showHad.touchChildren=!1},n.prototype.enable=function(){t.prototype.enable.call(this),this.rectImg.visible=!1},n.prototype.showPointAndTouch=function(t){this.showHad.visible=t,e.NewControlViewMgr.getIntance().touchEnabledRect=!t},n.prototype.addEvent=function(){this.touchGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchUs,this),commonUtils.EventMananger.getIntance().addEvent(commonUtils.GlobalEvent.ClickButton,this.removeUs,this)},n.prototype.touchUs=function(){var n=this;return t.prototype.removeUsFromParent.call(this),e.NewControlViewMgr.getIntance().currentStepType==e.StepType.chaoYueBox?(e.NewControlViewMgr.getIntance().parent.removeChild(e.NewControlViewMgr.getIntance()),void baseContent.SceneLayerMgr.getIntance().getCurrenScene().enterRandFuc()):(e.NewControlViewMgr.getIntance().currentStepType==e.StepType.attackInfo&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.EnterAttackView),e.NewControlViewMgr.getIntance().currentStepType==e.StepType.touQuInfo?void commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.EnterSeallView):(this.nextStepType==e.StepType.returnPan&&baseContent.SceneLayerMgr.getIntance().getCurrenScene().panBtnEnterOrOut("enter"),this.nextStepType&&(e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,n.nextStepType)},this,500)),void(e.NewControlViewMgr.getIntance().currentStepType==e.StepType.engryInfo&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.attackHuInfo))))},n.prototype.removeEvent=function(){this.touchGrp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchUs,this),commonUtils.EventMananger.getIntance().removeEvent(commonUtils.GlobalEvent.ClickButton,this.removeUs,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.NewControlView=t,__reflect(t.prototype,"game.NewControlView",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;e._currentStep=-1,e.stepC={};var n=localStorage.getItem("step_control");return n&&(e.stepC=JSON.parse(n),e._currentStep=e.stepC.currentStepType),e._usRectTouch=new eui.Group,e.addChild(e._usRectTouch),e.left=e.right=e.top=e.bottom=e._usRectTouch.left=e._usRectTouch.right=e._usRectTouch.top=e._usRectTouch.bottom=0,e._usRectTouch.touchEnabled=!1,e.touchEnabled=!1,baseContent.LayerMgr.getIntance().addChild(e),e}return __extends(n,t),n.getIntance=function(){return n._intance||(n._intance=new n),n._intance},Object.defineProperty(n.prototype,"currentStepType",{get:function(){return this._currentStep},set:function(t){this._currentStep=t,e.GameRequestMgr.getIntance().NoviceGuidance_setSteps_C(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"touchEnabledRect",{get:function(){return this._usRectTouch.touchEnabled},set:function(e){this._usRectTouch.touchEnabled=e},enumerable:!0,configurable:!0}),n.prototype.init=function(){this._newControlView||(this._newControlView=new e.NewControlView,this.addEvent())},n.prototype.getCurrentSenceType=function(){return e.NewControlViewMgr.getIntance().currentStepType>=e.StepType.buildOneConstrction&&e.NewControlViewMgr.getIntance().currentStepType<e.StepType.attackMsg||e.NewControlViewMgr.getIntance().currentStepType>=e.StepType.attackSomeOne&&e.NewControlViewMgr.getIntance().currentStepType<e.StepType.attackHuInfo||e.NewControlViewMgr.getIntance().currentStepType>=e.StepType.attackSomeOne&&e.NewControlViewMgr.getIntance().currentStepType<=e.StepType.attackSomeAttackBtn||e.NewControlViewMgr.getIntance().currentStepType>=e.StepType.attackSomeAttackBtn&&e.NewControlViewMgr.getIntance().currentStepType<=e.StepType.touQuSomeInfo||e.NewControlViewMgr.getIntance().currentStepType>=e.StepType.touQuResult&&e.NewControlViewMgr.getIntance().currentStepType<e.StepType.constructionOne?0:e.NewControlViewMgr.getIntance().currentStepType<e.StepType.clickStarBtn?1:void 0},n.prototype.showPaiMingUp=function(){},n.prototype.addControlViewByPointCircle=function(t,n,a,i,o,s,r,c,l){void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===r&&(r=null),void 0===c&&(c=0),void 0===l&&(l="点击任意位置继续");var g=e.NewControlViewMgr.getIntance();g.checkIsControl(a)||(g._newControlView.showSomeType("null"),g.currentStepType=a,g._newControlView.nextStepType=i,g._newControlView.touchGrp.visible=g._newControlView.touchGrp.touchEnabled=s,g._newControlView.initShowPointCircle(t,n,o),baseContent.PanelManager.getIntance().addChild(g._newControlView))},n.prototype.addControlViewByPointCircleTypeTitle=function(t,n,a,i,o,s,r,c,l){void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===r&&(r=null),void 0===c&&(c=0),void 0===l&&(l="点击任意位置继续");var g=e.NewControlViewMgr.getIntance();g.checkIsControl(a)||(g.currentStepType=a,g._newControlView.nextStepType=i,g._newControlView.touchGrp.visible=g._newControlView.touchGrp.touchEnabled=s,null==l?l="点击任意位置继续":1,g._newControlView.initShowTitle(r,c,l),g._newControlView.initShowPointCircle(t,n,o),baseContent.PanelManager.getIntance().addChild(g._newControlView))},n.prototype.addControlViewByPointCircleType0=function(t,n,a,i,o,s,r,c,l){void 0===o&&(o=!0),void 0===s&&(s=!1),void 0===r&&(r=null),void 0===l&&(l=!0);var g=e.NewControlViewMgr.getIntance();g.checkIsControl(a)||(g.currentStepType=a,g._newControlView.nextStepType=i,g._newControlView.touchGrp.touchEnabled=s,g._newControlView.initShowPointCircle(t,n,o),g._newControlView.initShowPao(r,c,l),baseContent.PanelManager.getIntance().addChild(g._newControlView))},n.prototype.addControlViewByPointRect=function(t,n,a,i,o,s,r,c,l,g,h){void 0===s&&(s=!0),void 0===r&&(r=!1),void 0===c&&(c=null),void 0===l&&(l=0),void 0===g&&(g="点击任意位置继续"),void 0===h&&(h=1);var u=e.NewControlViewMgr.getIntance();u.checkIsControl(i)||(u.currentStepType=i,u._newControlView.nextStepType=o,u._newControlView.initShowPointRect(t,n,a,s,r,h),u._newControlView.touchGrp.visible=u._newControlView.touchGrp.touchEnabled=r,null==g?g="点击任意位置继续":1,u._newControlView.initShowTitle(c,l,g),baseContent.PanelManager.getIntance().addChild(u._newControlView))},n.prototype.addControlViewByPointRectType0=function(t,n,a,i,o,s,r,c,l){void 0===s&&(s=!0),void 0===r&&(r=!1),void 0===c&&(c=null),void 0===l&&(l=-1);var g=e.NewControlViewMgr.getIntance();g.checkIsControl(i)||(g._newControlView.showSomeType("addSome"),g._newControlView.showAndSomeOne.setShowSome(l,c),g.currentStepType=i,g._newControlView.nextStepType=o,g._newControlView.initShowPointRect(t,n,a,s),g._newControlView.touchGrp.visible=g._newControlView.touchGrp.touchEnabled=r,baseContent.PanelManager.getIntance().addChild(g._newControlView))},n.prototype.checkIsControl=function(t){var n=e.NewControlViewMgr.getIntance();return n.stepC["control-"+(t+1)]||0==e.GameDatas.getIntance().is_new_user?!1:(n.stepC["control-"+t]=!0,n.stepC.currentStepType=t,localStorage.setItem("step_control",JSON.stringify(n.stepC)),!1)},n.prototype.addEvent=function(){commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.newConstrolEvent,e.NewControlViewMgr.getIntance().newControlOneHandle,e.NewControlViewMgr.getIntance()),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.newConstrolEvent,e.NewControlViewMgr.getIntance().newControlTwoHandle,e.NewControlViewMgr.getIntance()),commonUtils.EventMananger.getIntance().addEvent(ant_farm.AntFarmEvent.NewOneControl,e.NewControlViewMgr.getIntance().antFarmControl,e.NewControlViewMgr.getIntance())},n.prototype.antFarmControl=function(){egret.localStorage.setItem("ant_farm_control","true"),e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointCircleTypeTitle(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth/2+200,380),70,null,null,!0,!1,[{text:"在每次建造完成一个农场，就可在对应的农场",style:{textColor:"0x000000",size:24}},{text:"购买农民",style:{textColor:"0xff0000",size:24}},{text:"收获麦苗，不妨去试一下！",style:{textColor:"0x000000",size:24}}],commonUtils.StageUtils.getIntance().stage.stageHeight/2-130)},this,500)},n.prototype.newControlOneHandle=function(t){switch(t){case e.StepType.enterNongChangBeginConstruct:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointRect(new egret.Point(440,commonUtils.StageUtils.getIntance().stage.stageHeight/2+80),commonUtils.StageUtils.getIntance().stage.stageHeight/2-80,400,e.StepType.enterNongChangBeginConstruct,e.StepType.chuiBtn,!0,!0,[{text:"农场主大人，我是纳索。这是我们新开辟的农场庄园，让我们学习一下",style:{textColor:"0x471D05",size:24}},{text:"如何建设农场",style:{textColor:"0xff0000",size:24}},{text:"吧！",style:{textColor:"0x471D05",size:24}}],commonUtils.StageUtils.getIntance().stage.stageHeight/2-480)},this,100);break;case e.StepType.chuiBtn:e.NewControlViewMgr.getIntance().addControlViewByPointCircleType0(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth/2,commonUtils.StageUtils.getIntance().stage.stageHeight-150),100,e.StepType.chuiBtn,null,!0,!1,[{text:"点我建设",style:{textColor:"0xffffff",size:24}}],new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth/2+100,commonUtils.StageUtils.getIntance().stage.stageHeight-380));break;case e.StepType.constructionSomebuilding:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointRect(new egret.Point(440,commonUtils.StageUtils.getIntance().stage.stageHeight/2+80),commonUtils.StageUtils.getIntance().stage.stageHeight+80,40,e.StepType.constructionSomebuilding,e.StepType.buildOneConstrction,!0,!0,[{text:"来建造我们的",style:{textColor:"0x471D05",size:24}},{text:"第一个建筑",style:{textColor:"0xff0000",size:24}},{text:"吧！",style:{textColor:"0x471D05",size:24}}],commonUtils.StageUtils.getIntance().stage.stageHeight/2-480)},this,800);break;case e.StepType.buildOneConstrction:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(140,commonUtils.StageUtils.getIntance().stage.stageHeight/2+210),80,e.StepType.buildOneConstrction,null,!0,!1,null)},this,300);break;case e.StepType.showToRandContinueInfo:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().addControlViewByPointRect(new egret.Point(440,commonUtils.StageUtils.getIntance().stage.stageHeight/2+80),commonUtils.StageUtils.getIntance().stage.stageHeight+80,40,e.StepType.showToRandContinueInfo,e.StepType.returnPan,!0,!0,[{text:"太厉害了，但我们没有麦苗继续建造了，走，我们",style:{textColor:"0x471D05",size:24}},{text:"挣麦苗",style:{textColor:"0xff0000",size:24}},{text:"！",style:{textColor:"0x471D05",size:24}}],commonUtils.StageUtils.getIntance().stage.stageHeight/2-480)},this,600);break;case e.StepType.returnPan:egret.setTimeout(function(){e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(105,commonUtils.StageUtils.getIntance().stage.stageHeight-340),90,e.StepType.returnPan,null,!0,!1,null)},e.NewControlViewMgr.getIntance(),550);break;case e.StepType.clickStarBtn:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointCircleType0(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth/2,commonUtils.StageUtils.getIntance().stage.stageHeight-160),105,e.StepType.clickStarBtn,null,!0,!1,[{text:"点我挣麦苗",style:{textColor:"0xffffff",size:24}}],new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth/2+100,commonUtils.StageUtils.getIntance().stage.stageHeight-380))},this,1050);break;case e.StepType.attackShowSome:e.NewControlViewMgr.getIntance().addControlViewByPointRect(new egret.Point(440,commonUtils.StageUtils.getIntance().stage.stageHeight/2+80),commonUtils.StageUtils.getIntance().stage.stageHeight+80,40,e.StepType.attackShowSome,e.StepType.attackSomeOne,!0,!0,[{text:"跟我们一起去炮轰他们的农场，",style:{textColor:"0x471D05",size:24}},{text:"挣麦苗",style:{textColor:"0xff0000",size:24}},{text:"！",style:{textColor:"0x471D05",size:24}}],200);break;case e.StepType.attackSomeOne:e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(150,commonUtils.StageUtils.getIntance().stage.stageHeight-800),60,e.StepType.attackSomeOne,null,!0,!1,null);break;case e.StepType.attackMsg:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth-90,commonUtils.StageUtils.getIntance().stage.stageHeight-90),100,e.StepType.attackMsg,null,!0,!1,null)},this,800);break;case e.StepType.clickRandBtnEngry:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth/2,commonUtils.StageUtils.getIntance().stage.stageHeight-160),105,e.StepType.clickRandBtnEngry,null,!0,!1)},this,1050);break;case e.StepType.engryInfo:e.NewControlViewMgr.getIntance().addControlViewByPointRectType0(new egret.Point(440,commonUtils.StageUtils.getIntance().stage.stageHeight-280),commonUtils.StageUtils.getIntance().stage.stageHeight+80,40,e.StepType.engryInfo,null,!0,!0,[{text:"护盾可以",style:{textColor:"0xffffff",size:40}},{text:"抵挡攻击",style:{textColor:"0xff0000",size:40}}],0)}},n.prototype.newControlTwoHandle=function(t){switch(t){case e.StepType.attackHuInfo:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){commonUtils.StageUtils.getIntance().shakingScreen(),e.GameDatas.getIntance().user_info.shield_num-=1,baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow()},this,500),egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointRect(new egret.Point(440,commonUtils.StageUtils.getIntance().stage.stageHeight/2+80),commonUtils.StageUtils.getIntance().stage.stageHeight+80,40,e.StepType.attackHuInfo,e.StepType.clickStartBtn,!0,!0,[{text:"不知天高地厚的",style:{textColor:"0x471D05",size:24}},{text:"小肥哈啰",style:{textColor:"0xff0000",size:24}},{text:"炸了我们的农场，还好有",style:{textColor:"0x471D05",size:24}},{text:"护盾",style:{textColor:"0xff0000",size:24}},{text:"保护!",style:{textColor:"0x471D05",size:24}}],commonUtils.StageUtils.getIntance().stage.stageHeight/2-480)},this,1e3);break;case e.StepType.clickStartBtn:e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth/2,commonUtils.StageUtils.getIntance().stage.stageHeight-160),105,e.StepType.clickStartBtn,null,!0,!1);break;case e.StepType.attackInfo:e.NewControlViewMgr.getIntance().addControlViewByPointRectType0(new egret.Point(440,commonUtils.StageUtils.getIntance().stage.stageHeight-280),commonUtils.StageUtils.getIntance().stage.stageHeight+80,40,e.StepType.attackInfo,e.StepType.attackViewInfo,!0,!0,[{text:"让",style:{textColor:"0xffffff",size:40}},{text:"仇人",style:{textColor:"0x00ff00",size:40}},{text:"知道我们的厉害",style:{textColor:"0xffffff",size:40}}],1);break;case e.StepType.attackViewInfo:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointRect(new egret.Point(440,commonUtils.StageUtils.getIntance().stage.stageHeight/2),commonUtils.StageUtils.getIntance().stage.stageHeight+80,40,e.StepType.attackViewInfo,e.StepType.attackViewChouRenBtn,!0,!0,[{text:"报仇的机会来啦，给",style:{textColor:"0x471D05",size:24}},{text:"小小啰",style:{textColor:"0xff0000",size:24}},{text:"一点颜色看看吧！",style:{textColor:"0x471D05",size:24}}],150,null,1)},this,1050);break;case e.StepType.attackViewChouRenBtn:var n=0;egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME&&(n+=100),e.NewControlViewMgr.getIntance().addControlViewByPointCircleTypeTitle(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth/2-30-n,60),100,e.StepType.attackViewChouRenBtn,null,!0,!1,[{text:"报仇的机会来啦，给",style:{textColor:"0x471D05",size:24}},{text:"小小啰",style:{textColor:"0xff0000",size:24}},{text:"一点颜色看看吧！",style:{textColor:"0x471D05",size:24}}],200);break;case e.StepType.attackViewAttackBtn:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth-130,370),80,e.StepType.attackViewAttackBtn,null,!0,!1)},this,500);break;case e.StepType.attackSomeAttackBtn:e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth-150,commonUtils.StageUtils.getIntance().stage.stageHeight-760),80,e.StepType.attackSomeAttackBtn,null,!0,!1,null);break;case e.StepType.attackSomeInfoSureBtn:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth-90,commonUtils.StageUtils.getIntance().stage.stageHeight-90),100,e.StepType.attackSomeInfoSureBtn,null,!0,!1,null)},this,800);break;case e.StepType.clickForTouQu:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth/2,commonUtils.StageUtils.getIntance().stage.stageHeight-160),105,e.StepType.clickForTouQu,null,!0,!1)},this,1050);break;case e.StepType.touQuInfo:e.NewControlViewMgr.getIntance().addControlViewByPointRectType0(new egret.Point(440,commonUtils.StageUtils.getIntance().stage.stageHeight-280),commonUtils.StageUtils.getIntance().stage.stageHeight+80,40,e.StepType.touQuInfo,null,!0,!0,[{text:"一夜暴富",style:{textColor:"0x00ff00",size:40}},{text:"的时候到了",style:{textColor:"0xffffff",size:40}}],3);break;case e.StepType.touQuSomeInfo:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointRect(new egret.Point(440,commonUtils.StageUtils.getIntance().stage.stageHeight/2),commonUtils.StageUtils.getIntance().stage.stageHeight+80,40,e.StepType.touQuSomeInfo,null,!0,!0,[{text:"这次咱们中大奖啦！猜对富豪，就",style:{textColor:"0x471D05",size:24}},{text:"能偷光她的麦苗",style:{textColor:"0xff0000",size:24}},{text:"！",style:{textColor:"0x471D05",size:24}}],200)},this,1050);break;case e.StepType.touQuResult:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth-90,commonUtils.StageUtils.getIntance().stage.stageHeight-90),100,e.StepType.touQuResult,null,!0,!1,null)},this,800);break;case e.StepType.clickUsForConstruct:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointCircleType0(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth-110,commonUtils.StageUtils.getIntance().stage.stageHeight-370),105,e.StepType.clickUsForConstruct,null,!0,!1,[{text:"点我建设",style:{textColor:"0xffffff",size:24}}],new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth/2+50,commonUtils.StageUtils.getIntance().stage.stageHeight-620),!1)},this,1050);break;case e.StepType.clickChuiForConstruct:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(commonUtils.StageUtils.getIntance().stage.stageWidth/2,commonUtils.StageUtils.getIntance().stage.stageHeight-150),100,e.StepType.clickChuiForConstruct,null,!0,!1)},this,650);break;case e.StepType.constructionOne:e.NewControlViewMgr.getIntance().touchEnabledRect=!0,egret.setTimeout(function(){e.NewControlViewMgr.getIntance().touchEnabledRect=!1,e.NewControlViewMgr.getIntance().addControlViewByPointCircle(new egret.Point(140,commonUtils.StageUtils.getIntance().stage.stageHeight/2-250),80,e.StepType.constructionOne,null,!0,!1,null)},this,800);break;case e.StepType.paiUp:e.NewControlViewMgr.getIntance().currentStepType=e.StepType.paiUp,e.NewControlViewMgr.getIntance().showPaiMingUp();break;case e.StepType.chaoYueBox:if(e.NewControlViewMgr.getIntance().currentStepType==e.StepType.chaoYueBox)break;e.NewControlViewMgr.getIntance().addControlViewByPointRectType0(new egret.Point(440,commonUtils.StageUtils.getIntance().stage.stageHeight-280),commonUtils.StageUtils.getIntance().stage.stageHeight+80,40,e.StepType.chaoYueBox,null,!0,!0,[{text:"新功能开发",style:{textColor:"0x00ff00",size:40}}],2)}},n}(eui.UILayer);e.NewControlViewMgr=t,__reflect(t.prototype,"game.NewControlViewMgr")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="NewPaiMingUp",e.touchEnabled=e.touchChildren=!0,e.skinName="NewPaiMingUpSkin",e}return __extends(n,t),n.prototype.init=function(){this.tochGrp.touchEnabled=!0,this.showImg.mask=this.showImgMask,e.GameDatas.getIntance().user_info.avatar&&e.GameDatas.getIntance().user_info.avatar.length>0?commonUtils.ImageTools.loadImage(e.GameDatas.getIntance().user_info.avatar,function(e){this.showImg.source=e},this):viewTools.RESTools.setImgRes(this.showImg,"game_main_view_tex_json.game_main_view_default_headimg_jpg")},n.prototype.enable=function(){var n=this;t.prototype.enable.call(this),this.rectImg.visible=!1,this.upGrp.y=160,t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType,function(){n.upGrp.visible=!0,egret.Tween.get(n.upGrp).to({y:50},200).call(function(){egret.Tween.get(n.upGrp,{loop:!0}).to({y:30},300).to({y:50},500)},n)},this),e.GameDatas.getIntance().rank&&(this.ranking_text.text=""+e.GameDatas.getIntance().rank.ranking,this.rise_num_text.text=""+e.GameDatas.getIntance().rank.rise_num,this.rise_num_text.size=24,e.GameDatas.getIntance().rank.rise_num>1e4&&(this.rise_num_text.size=22),e.GameDatas.getIntance().rank=null),egret.setTimeout(function(){n.destroy(),e.GameDatas.getIntance().is_new_user&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.chaoYueBox)},this,1500)},n.prototype.addEvent=function(){},n.prototype.removeEvent=function(){egret.Tween.removeTweens(this.upGrp)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.NewPaiMingUp=t,__reflect(t.prototype,"game.NewPaiMingUp",["baseContent.IObj"])
}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e.enterNongChangBeginConstruct=1,e.chuiBtn=2,e.constructionSomebuilding=3,e.buildOneConstrction=4,e.showToRandContinueInfo=5,e.returnPan=6,e.clickStarBtn=7,e.attackShowSome=8,e.attackSomeOne=9,e.attackMsg=10,e.clickRandBtnEngry=11,e.engryInfo=12,e.attackHuInfo=13,e.clickStartBtn=14,e.attackInfo=15,e.attackViewInfo=16,e.attackViewChouRenBtn=17,e.attackViewAttackBtn=18,e.attackSomeAttackBtn=19,e.attackSomeInfoSureBtn=20,e.clickForTouQu=21,e.touQuInfo=22,e.touQuSomeInfo=23,e.touQuResult=24,e.clickUsForConstruct=25,e.clickChuiForConstruct=26,e.constructionOne=27,e.paiUp=28,e.chaoYueBox=29,e}();e.StepType=t,__reflect(t.prototype,"game.StepType")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="GamePanelHeadSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.showImg.mask=this.maskImg},t.prototype.setHead=function(e){e&&e.length>0&&viewTools.RESTools.setHeadImg(this.showImg,e)},t.prototype.setHEHead=function(e){e&&viewTools.RESTools.setFQJHHeadImg(this.showImg,e)},t}(eui.Component);e.GamePanelHead=t,__reflect(t.prototype,"game.GamePanelHead")}(game||(game={}));var game;!function(e){var t=function(t){function n(e,n){var a=t.call(this)||this;return a.className_key="PanelYouQingTiShiView",a.index_=n,a.iconType=e,a.skinName="PanelYouQingTiShiViewSkin",a}return __extends(n,t),n.prototype.init=function(){},n.prototype.initShow=function(){switch(this.iconType){case"icon_0":this.iconShow.source="panel_youqingtishi_tex_json.panel_youqingtishi_shan_icon2_png";break;case"icon_1":this.iconShow.source="panel_youqingtishi_tex_json.panel_youqingtishi_che_icon2_png";break;case"icon_2":this.iconShow.source="panel_youqingtishi_tex_json.panel_youqingtishi_pet_icon2_png";break;case"icon_3":this.iconShow.source="panel_youqingtishi_tex_json.panel_youqingtishi_jianzhu_icon2_png";break;case"icon_4":this.iconShow.source="panel_youqingtishi_tex_json.panel_youqingtishi_renwu_icon2_png"}},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType),this.initShow()},n.prototype.addEvent=function(){this.rectImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.rectImg:this.removeUs();break;case this.sureBtn:this.removeUs();var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelDyjs");n&&n.closeShowMiNiDun(),e.GameNetUrlData.isUseNet&&e.GameRequestMgr.getIntance().Pasture_loadMiniShield_C(this.index_)}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.rectImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){this.removeUs(),t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelYouQingTiShiView=t,__reflect(t.prototype,"game.PanelYouQingTiShiView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelAssignmCenter",e.skinName="PanelAssignmCenterSkin",e}return __extends(n,t),n.prototype.init=function(){},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=this,t.showData=e.GameDatas.getIntance().task_list,!t.showData||t.onShowAnimation?[2]:(new Promise(function(n){for(var a=0,i=t.showData.length;i>a;a++){var o=void 0;a<t.showGrp.numChildren?(o=t.showGrp.getChildAt(a),o.initShow(t.showData[a],a)):(o=new e.PanelAssignmCenterItem(t.showData[a],a),t.showGrp.addChild(o))}}),[2])})})},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.downType)},n.prototype.enable=function(){t.prototype.enable.call(this),this.showGrp.scrollV=0,e.GameRequestMgr.getIntance().Task_getTaskList_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.downType,this.initShow)},n.prototype.addEvent=function(){this.closeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(e){switch(e.target){case this.closeImg:this.removeUs()}},n.prototype.removeEvent=function(){this.closeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelAssignmCenter=t,__reflect(t.prototype,"game.PanelAssignmCenter",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e,n){var a=t.call(this)||this;return a.config=e,a.index_=n,a.skinName="PanelAssignmCenterItemSkin",a.once(egret.Event.ADDED,function(){a.cacheAsBitmap=!0},a),a}return __extends(n,t),n.prototype.init=function(){this.config&&this.initShow(this.config)},n.prototype.initShow=function(t,n){if(void 0===n&&(n=this.index_),t){this.index_=n,this.config=t,this.titleText.text=this.config.title,this.docText.text=this.config.comment;var a;a=101==this.config.condition_start?commonUtils.NumberTool.formatMoney(this.config.condition_end)+"/"+commonUtils.NumberTool.formatMoney(this.config.condition_end):commonUtils.NumberTool.formatMoney(this.config.condition_start)+"/"+commonUtils.NumberTool.formatMoney(this.config.condition_end),this.barPr.initDataShow({per:this.config.condition_start/this.config.condition_end,texts:a}),this.numShow.text=this.config.award_num+"",this.iconImg.source=e.GameDatas.getIntance().getSomeOneIconStrByType(this.config.award_type),1==this.config.isCanGet?(this.configBtn1.enabled=!0,this.configBtn1.textImgSource="panel_common_someBtn_json.panel_xinshoumubiao_font_qianwang_type5_png",this.configBtn1.btnImgSource="panel_common_someBtn_json.panel_common_type5_0_png",this.configBtn1.btnImgDown="panel_common_someBtn_json.panel_common_type5_1_png"):2==this.config.isCanGet?(this.configBtn1.enabled=!0,this.configBtn1.textImgSource="panel_common_someBtn_json.panel_xiaoxixitong_common_font1_type0_png",this.configBtn1.btnImgSource="panel_common_someBtn_json.panel_common_type0_0_png",this.configBtn1.btnImgDown="panel_common_someBtn_json.panel_common_type0_1_png"):(this.configBtn1.enabled=!1,this.configBtn1.textImg.visible=!1)}},n.prototype.addEvent=function(){this.configBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.removeEvent=function(){this.configBtn1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.configBtn1:console.log("configBtn1-->"+this.config.tid),e.GameNetUrlData.isUseNet&&1!=this.config.isCanGet?e.GameRequestMgr.getIntance().Task_getAward_C(this.config.tid+""):e.GameViewMgr.toForworadTaskTypeByView(this.config.task_type,"PanelAssignmCenter")}},n}(viewTools.CustomPanelListItem);e.PanelAssignmCenterItem=t,__reflect(t.prototype,"game.PanelAssignmCenterItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelChaoYueJiangLi",e.skinName="PanelChaoYueJiangLiSkin",e}return __extends(n,t),n.prototype.init=function(){this.imgShow.mask=this.imgShowMask},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(a){return t=e.GameDatas.getIntance().overStepInfo,t?(n=this,new Promise(function(a){n.userNameText.text=t.user_name+"",commonUtils.ImageTools.loadImage(e.GameDatas.getIntance().stepUserHeadUrl,function(e){n.imgShow.source=e},n),n.starNum.text=t.star_num+"",e.GameDatas.getIntance().user_info.star_num>=t.star_num?(n.typetext0.visible=!1,n.typetext1.visible=!0,n.senBtn.imgText.source="panel_common_someBtn_json.panel_signIn_font_lingqujiangli_type8_png"):(n.typetext0.visible=!0,n.typetext1.visible=!1,n.senBtn.imgText.source="panel_common_someBtn_json.panel_common_huodexingxing_type8_png"),n.chaoyueList.removeChildren();for(var i=0,o=t.award.length;o>i;i++)n.chaoyueList.addChild(new e.PanelChaoYueJiangLiItem(t.award[i]))})):this.senBtn.imgText.source="panel_chaoyuehaoyou_font_quhuodexingxing_png",[2]})})},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.senBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){var n=e.GameDatas.getIntance().overStepInfo;switch(t.target){case this.closeBtn:this.removeUs(),n&&0==e.GameDatas.getIntance().user_info.overstep_statu&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ChangeBtnGrp);break;case this.senBtn:n&&e.GameDatas.getIntance().user_info.star_num>=n.star_num?(e.GameRequestMgr.getIntance().Activity_overstepAward_C(),this.senBtn.enabled=!1,this.senBtn.imgText.source="panel_common_someBtn_json.panel_signIn_font_yilingqu_type8_png"):(this.removeUs(),e.GameNetUrlData.isUseNet&&e.GameRequestMgr.getIntance().Pasture_getPastureInfo_C(),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.EnterRandViewOrNongChangViewEvent,"nongchang"))}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.senBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.senBtn.destroy()},n}(baseContent.BasePanel);e.PanelChaoYueJiangLi=t,__reflect(t.prototype,"game.PanelChaoYueJiangLi",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.config=e,n.skinName="PanelChaoYueJiangLiItemSkin",n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent(),this.init()},n.prototype.init=function(){this.config&&this.initShow(this.config)},n.prototype.initShow=function(t){t&&(this.iconImg.source=e.GameDatas.getIntance().getSomeOneIconStrByType(parseInt(t.type)),this.titleText.text=t.num+"")},n.prototype.addEvent=function(){},n}(eui.Component);e.PanelChaoYueJiangLiItem=t,__reflect(t.prototype,"game.PanelChaoYueJiangLiItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.num_=10,e.perNum_=1e5,e.className_key="PanelBuyLaBaView",e.skinName="PanelBuyLaBaViewSkin",e}return __extends(n,t),n.prototype.init=function(){this.initShow(this.num_,this.perNum_)},n.prototype.initShow=function(e,t){this.showNumber.text="购买"+this.num_+"个",this.buyNum.text=this.perNum_+"",this.decBtn.enabled=!1},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType),this.initShow(this.num_,this.perNum_)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.decBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUs();break;case this.addBtn:this.num_+=10,this.num_>=100&&(this.num_=100,this.addBtn.enabled=!1),this.perNum_=this.perNum_+1e5,this.showNumber.text="购买"+this.num_+"个",this.buyNum.text=this.perNum_+"",this.num_>10&&(this.decBtn.enabled=!0);break;case this.decBtn:this.num_=this.num_-10,this.perNum_-=1e5,this.num_<=10&&(this.num_=10,this.perNum_=1e5,this.decBtn.enabled=!1),this.num_<100&&(this.addBtn.enabled=!0),this.showNumber.text="购买"+this.num_+"个",this.buyNum.text=this.perNum_+"";break;case this.buyBtn:e.GameNetUrlData.isUseNet&&e.GameRequestMgr.getIntance().Shop_buyTrumpet_C(this.num_),this.removeUs()}},n.prototype.removeUs=function(){this.num_=10,this.perNum_=1e5,t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.decBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.closeBtn.destroy()},n}(baseContent.BasePanel);e.PanelBuyLaBaView=t,__reflect(t.prototype,"game.PanelBuyLaBaView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelChatDelView",n.friendData=e,n.skinName="PanelChatDelViewSkin",n}return __extends(n,t),n.prototype.init=function(){this.initShow(this.friendData)},n.prototype.initShow=function(e){this.friendData=e;var t=[];t=[{text:"确定要和",style:{bold:!0,textColor:"0x75472B",fontFamily:"Microsoft YaHei"}},{text:this.friendData.user_name,style:{bold:!0,textColor:"0xCC6A00",fontFamily:"Microsoft YaHei"}},{text:"吗?",style:{bold:!0,textColor:"0x75472B",fontFamily:"Microsoft YaHei"}}],this.delNickNameLab.textFlow=t},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.cancelBtn:this.removeUs();break;case this.sureBtn:this.removeUs(),e.GameRequestMgr.getIntance().User_delFriends_C(this.friendData.fid);var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatView");n&&n.deleteHaoYouitem(this.friendData)}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.cancelBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelChatDelView=t,__reflect(t.prototype,"game.PanelChatDelView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelChatFaQiJiaoHuan",n.swapChangInfo=e,n.skinName="PanelChatFaQiJiaoHuanSkin",n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.initShow(this.swapChangInfo)},n.prototype.initShow=function(t){var n=this;n.swapChangInfo=t,this.isMeItem.setHead(this.swapChangInfo.me_avatar),this.isMeItem.nameText.text=this.swapChangInfo.me_name,viewTools.RESTools.setFQJHHeadImg(this.isFriendItem.showImg,this.swapChangInfo.friend_avatar),this.isFriendItem.nameText.text=this.swapChangInfo.friend_name,this.usedItem.setHead(this.swapChangInfo.me_propImg+""),this.usedItem.nameText.text=this.swapChangInfo.me_propType+"号碎片",this.needItem.nameText.text="",this.needItem.touchChildren=!1,this.needItem.setHead("panel_chat_json.panel_chat_wenhao_png"),this.successTimeLab.text="今日已成功交换："+e.GameDatas.getIntance().today_complete_times+"/5"},n.prototype.enable=function(){t.prototype.enable.call(this),this.sureBtn.enabled=!1,this.changNeedGrp.visible=!0,this.needItem&&this.needItem.setHead("panel_chat_json.panel_chat_wenhao_png"),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.needItem.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUsFromParent();break;case this.sureBtn:e.GameRequestMgr.getIntance().Chat_sendSwapRequest_C(this.swapChangInfo.friend_id,{used_type:1,used_num:this.swapChangInfo.me_propType,need_type:1,need_num:this.needNum}),this.needItem.nameText.text="",this.needItem.setHead("panel_chat_json.panel_chat_wenhao_png"),this.needItem.touchChildren=!1,this.sureBtn.enabled=!1,this.removeUsFromParent(),viewTool.TipsUtil.getIntance().showTip("交换已发起!");break;case this.needItem:this.changNeedGrp.visible=!1,e.PanelSwapPingTuItemView.isFaQi=!1,this.swapChanglistView.visible=!0}},n.prototype.needItemImg=function(e){this.needNum=e,this.needItem.setHead("panel_pingtu_img_"+e+"_1_png"),this.needItem.nameText.text=e+"号碎片",this.swapChanglistView.visible=!1,this.sureBtn.enabled=!0},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),egret.Tween.removeTweens(this.closeBtn)},n}(baseContent.BasePanel);e.PanelChatFaQiJiaoHuan=t,__reflect(t.prototype,"game.PanelChatFaQiJiaoHuan",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="PanelChatFaQiJiaoHuanItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.showImg.mask=this.maskImg,this.nameText.text=""},t.prototype.setHead=function(e){e&&viewTools.RESTools.setFQJHHeadImg(this.showImg,e)},t}(eui.Component);e.PanelChatFaQiJiaoHuanItem=t,__reflect(t.prototype,"game.PanelChatFaQiJiaoHuanItem")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="PanelChatFaQiJiaoHuanSuiPianItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.nameText.text="",this.showImg.scaleX=this.showImg.scaleY=1},t.prototype.setHead=function(e){e&&e.length>0&&("panel_chat_json.panel_chat_wenhao_png"!=e?this.showImg.scaleX=this.showImg.scaleY=.28:this.showImg.scaleX=this.showImg.scaleY=1,viewTools.RESTools.setHeadImg(this.showImg,e))},t}(eui.Component);e.PanelChatFaQiJiaoHuanSuiPianItem=t,__reflect(t.prototype,"game.PanelChatFaQiJiaoHuanSuiPianItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelChatHaoYouXiangQingView",n.friendData=e,n.skinName="PanelChatHaoYouXiangQingViewSkin",n}return __extends(n,t),n.prototype.enable=function(){t.prototype.enable.call(this),this.rectImg.visible=!1,this.showEnter(baseContent.PanelMoveType.scaleType)},n.prototype.init=function(){this.grpCenter.y=this.localInfo_.y},n.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.setLocal=function(e){this.localInfo_=e},n.prototype.touchHanle=function(t){var n=this,a=this;switch(t.target){case a.shiliaoBtn:e.GameRequestMgr.getIntance().Chat_getPrivateDetail_C(a.friendData.fid);break;case a.deleteBtn:var i=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatDelView");i&&i.initShow(a.friendData),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelChatDelView,a.friendData);break;case this.infoBtn:commonUtils.EventMananger.getIntance().sendEvent(ant_grp.AntGrpEvent.MiwuZheDangEvent,!0),egret.setTimeout(function(){n.destroy();baseContent.PanelManager.getIntance().removeChildren(),commonUtils.EventMananger.getIntance().sendEvent(ant_grp.AntGrpEvent.CloseShowChaoPing,!0),ant_grp.AntGrpRequestMgr.getIntance().User_visitUser_C(a.friendData.fid)},this,750);break;case a.grpCenter:return}a.destroy()},n.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n}(baseContent.BasePanel);e.PanelChatHaoYouXiangQingView=t,__reflect(t.prototype,"game.PanelChatHaoYouXiangQingView")}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelChatJuBao",n.userInfo=e,n.userName=e.user_name,n.userId=e.id,n.skinName="PanelChatJuBaoSkin",n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.initShow(this.userInfo)},n.prototype.initShow=function(e){this.userInfo=e;var t=[];t=[{text:"确定要举报",style:{bold:!0,textColor:"0x75472B"}},{text:this.userInfo.user_name,style:{bold:!0,textColor:"0xCA5500"}},{text:"吗?",style:{bold:!0,textColor:"0x75472B"}}],this.name_text.textFlow=t},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(n){switch(e.GameDatas.getIntance().jubaoIDList||(e.GameDatas.getIntance().jubaoIDList=[]),n.target){case this.closeBtn:t.prototype.removeUsFromParent.call(this);break;case this.sureBtn:e.GameRequestMgr.getIntance().Chat_reportingUser_C(this.userInfo.id),e.GameDatas.getIntance().jubaoIDList.push(this.userInfo.id),1==this.userInfo.isJuBaoType?commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ShiLiaoJuBaoChangColour,this.userInfo.id):commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ShiJieJuBaoChangColour,this.userInfo.id),e.GameDatas.getIntance().jubaoIDList=commonUtils.ArrayTool.uniq(e.GameDatas.getIntance().jubaoIDList),t.prototype.removeUsFromParent.call(this)}},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),egret.Tween.removeTweens(this.closeBtn)},n}(baseContent.BasePanel);e.PanelChatJuBao=t,__reflect(t.prototype,"game.PanelChatJuBao",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.x=17.5,n.msgInfo=e,n.skinName="PanelChatShiLiaoMessageSkin",n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init(),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.openDetailPanel,this)},n.prototype.init=function(){this.initShow(this.msgInfo),this.addEvent()},n.prototype.initShow=function(t){return __awaiter(this,void 0,void 0,function(){var n,a,i;return __generator(this,function(o){if(n=this,n.msgInfo=t,e.GameDatas.getIntance().shiliaoRedPointList&&e.GameDatas.getIntance().shiliaoRedPointList.length>0)for(a=0,i=e.GameDatas.getIntance().shiliaoRedPointList.length;i>a;a++)e.GameDatas.getIntance().shiliaoRedPointList[a]==this.msgInfo.fid&&(this.shiliaoRedImg.visible=!0);return new Promise(function(e){t&&(n.timeText.text=commonUtils.DateTool.formatThreeDateStr(+t.time),n.timeText.x=515-n.timeText.width,n.head.setHEHead(t.avatar),n.nickName.text=commonUtils.StringTool.getShortStrAtByte(t.user_name+"",24),n.starNum.text=t.star_num+"","1"==t.sex?n.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_boy_png":n.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_girl_png",n.msgText.text=commonUtils.StringTool.getShortStrAtByte(t.message,24))}),[2]})})},n.prototype.addEvent=function(){this.deleteBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){var n=this;switch(t.target){case n.deleteBtn:if(this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.openDetailPanel,this),e.GameRequestMgr.getIntance().Chat_delPrivateMsg_C(this.msgInfo.fid),e.GameDatas.getIntance().shiliaoRedPointList&&e.GameDatas.getIntance().shiliaoRedPointList.length>0)for(var a=0,i=e.GameDatas.getIntance().shiliaoRedPointList.length;i>a;a++)e.GameDatas.getIntance().shiliaoRedPointList[a]==this.msgInfo.fid&&e.GameDatas.getIntance().shiliaoRedPointList.splice(a,1);e.GameRequestMgr.getIntance().Chat_getPrivateList_C(),commonUtils.EventMananger.getIntance().sendEvent("delete_this_one_messages"),this.parent.removeChild(this)}},n.prototype.openDetailPanel=function(){if(this.shiliaoRedImg.visible=!1,e.GameDatas.getIntance().shiliaoRedPointList&&e.GameDatas.getIntance().shiliaoRedPointList.length>0)for(var t=0,n=e.GameDatas.getIntance().shiliaoRedPointList.length;n>t;t++)e.GameDatas.getIntance().shiliaoRedPointList[t]==this.msgInfo.fid&&e.GameDatas.getIntance().shiliaoRedPointList.splice(t,1);e.GameRequestMgr.getIntance().Chat_getPrivateDetail_C(this.msgInfo.fid)},n.prototype.removeEvent=function(){this.deleteBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){},n}(eui.Component);e.PanelChatShiLiaoMessage=t,__reflect(t.prototype,"game.PanelChatShiLiaoMessage")}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.width=587,n.height=109,n.msgInfo=e,n.skinName="PanelChatShiLiaoViewLeftItemSkin",n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.initShow(this.msgInfo),this.addEvent()},n.prototype.initShow=function(t){var n=this;if(t){if(n.shiliaoTime.text=t.time,n.head.setHEHead(t.avatar),n.nickName.text=commonUtils.StringTool.getShortStrAtByte(t.user_name+"",24),e.GameDatas.getIntance().jubaoIDList&&e.GameDatas.getIntance().jubaoIDList.length>0)for(var a=0,i=e.GameDatas.getIntance().jubaoIDList.length;i>a;a++)e.GameDatas.getIntance().jubaoIDList[a]==t.from_uid?(n.reportText.textFlow=[{text:"已举报",style:{size:20,textColor:4996665,underline:!0}}],n.reportText.touchEnabled=!1):n.reportText.textFlow=[{text:"举报",style:{size:20,textColor:4231613,underline:!0}}];if(n.starNum.text=t.star_num+"","1"==t.sex?n.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_boy_png":n.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_girl_png",0==t.message_type?n.shiliaoMsg.text=t.message:n.shiliaoMsg.textFlow=t.message,n.qipaoImg.width=n.shiliaoMsg.width+42,n.qipaoImg.width>=n.chatKuangGrp.width){Math.floor(n.shiliaoMsg.width/345);n.qipaoImg.width=n.chatKuangGrp.width,n.shiliaoMsg.width=n.qipaoImg.width-42,n.shiliaoMsg.lineSpacing=2,n.qipaoImg.height=n.shiliaoMsg.height+32,n.chatKuangGrp.height=n.qipaoImg.height,n.height=n.chatKuangGrp.height+57}}},n.prototype.enable=function(){},n.prototype.addEvent=function(){commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.ShiLiaoJuBaoChangColour,this.jbChangColour,this),this.reportText.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.jbChangColour=function(e){this.msgInfo&&this.msgInfo.fid==e&&(this.reportText.textFlow=[{text:"已举报",style:{size:20,textColor:4996665,underline:!0}}],this.reportText.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this))},n.prototype.touchHanle=function(t){switch(t.target){case this.reportText:e.GameDatas.getIntance().jubaoInfo={id:this.msgInfo.from_uid,user_name:this.msgInfo.user_name,isJuBaoType:1};var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatJuBao");n?(n.initShow(e.GameDatas.getIntance().jubaoInfo),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelChatJuBao)):baseContent.PanelManager.getIntance().openTypeIntance(e.PanelChatJuBao,e.GameDatas.getIntance().jubaoInfo)}},n.prototype.removeEvent=function(){commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.ShiLiaoJuBaoChangColour,this.jbChangColour,this)},n.prototype.destroy=function(){},n}(eui.Component);e.PanelChatShiLiaoViewLeftItem=t,__reflect(t.prototype,"game.PanelChatShiLiaoViewLeftItem")}(game||(game={}));var game;!function(e){var t=function(e){function t(t){var n=e.call(this)||this;return n.width=587,n.height=109,n.msgInfo=t,n.skinName="PanelChatShiLiaoViewRightItemSkin",n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.initShow(this.msgInfo),this.addEvent()},t.prototype.initShow=function(e){var t=this;if(e){t.shiliaoTime.text=e.time,t.head.setHEHead(e.avatar),t.nickName.text=commonUtils.StringTool.getShortStrAtByte(e.user_name+"",24),t.nickName.x=t.sexImg.x-11-t.nickName.width,t.starNum.text=e.star_num+"","1"==e.sex?t.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_boy_png":t.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_girl_png",0==e.message_type?t.shiliaoMsg.text=e.message:t.shiliaoMsg.textFlow=e.message,t.shiliaoMsg.x=357-t.shiliaoMsg.width;Math.floor(t.shiliaoMsg.width/347);t.shiliaoMsg.x<25&&(t.shiliaoMsg.x=25,t.shiliaoMsg.width=347),t.qipaoImg.width=t.shiliaoMsg.width+39,t.qipaoImg.width>=t.chatKuangGrp.width&&(t.qipaoImg.width=t.chatKuangGrp.width,t.shiliaoMsg.width=t.qipaoImg.width-39,t.shiliaoMsg.lineSpacing=2,t.qipaoImg.height=t.shiliaoMsg.height+32,t.chatKuangGrp.height=t.qipaoImg.height,t.height=t.chatKuangGrp.height+57),t.qipaoImg.x=386-t.qipaoImg.width}},t.prototype.enable=function(){},t.prototype.addEvent=function(){},t.prototype.touchHanle=function(e){},t.prototype.removeEvent=function(){},t.prototype.destroy=function(){},t}(eui.Component);e.PanelChatShiLiaoViewRightItem=t,__reflect(t.prototype,"game.PanelChatShiLiaoViewRightItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.scrollerY=292,n.scrollerH=578,n.className_key="PanelChatShiLiaoXiangQingView",n.friendData=e,n.skinName="PanelChatShiLiaoViewSkin",n}return __extends(n,t),n.prototype.init=function(){if(this.listS.bounces=!1,e.GameDatas.getIntance().shiliaoMsgList||(e.GameDatas.getIntance().shiliaoMsgList=[]),e.GameDatas.getIntance().shiliaoPullMsg){if(1==e.GameDatas.getIntance().shiliaoPullMsg.swap_status&&(e.GameDatas.getIntance().shiliaoPullMsg.from_uid==this.friendData.friend_info.id?this.isbusinessViewVisible=!1:this.isbusinessViewVisible=!0,this.showSwapRequstionBrd()),(2==e.GameDatas.getIntance().shiliaoPullMsg.swap_status||3==e.GameDatas.getIntance().shiliaoPullMsg.swap_status)&&this.recoverScoller(),this.friendData.friend_info.id==e.GameDatas.getIntance().shiliaoPullMsg.from_uid){if(1==e.GameDatas.getIntance().shiliaoPullMsg.type&&1==e.GameDatas.getIntance().shiliaoPullMsg.swap_status){var t=[];t=[{text:"【交易请求】我想用",style:{size:18,textColor:"0x000000",fontFamily:"Microsoft YaHei"}},{text:e.GameDatas.getIntance().shiliaoPullMsg.extra.used_num+"号碎片",style:{size:18,bold:!0,textColor:"0xD9E3D2",stroke:1,strokeColor:"0x4f9108",fontFamily:"Microsoft YaHei"}},{text:"跟你交换",style:{size:18,textColor:"0x000000",fontFamily:"Microsoft YaHei"}},{text:e.GameDatas.getIntance().shiliaoPullMsg.extra.need_num+"号碎片",style:{size:18,bold:!0,textColor:"0xFBC2C0",stroke:1,strokeColor:"0xff5454",fontFamily:"Microsoft YaHei"}}],e.GameDatas.getIntance().shiliaoMsgList.push({time:commonUtils.DateTool.formatThreeDateStr(+e.GameDatas.getIntance().shiliaoPullMsg.time),fid:this.friendData.friend_info.id,from_uid:e.GameDatas.getIntance().shiliaoPullMsg.from_uid,message_type:1,message:t,user_name:this.friendData.friend_info.user_name,sex:this.friendData.friend_info.sex,star_num:this.friendData.friend_info.star_num,avatar:this.friendData.friend_info.avatar,isLeft:1,swap_status:e.GameDatas.getIntance().shiliaoPullMsg.swap_status,type:""})}else e.GameDatas.getIntance().shiliaoMsgList.push({time:commonUtils.DateTool.formatThreeDateStr(+e.GameDatas.getIntance().shiliaoPullMsg.time),fid:this.friendData.friend_info.id,from_uid:e.GameDatas.getIntance().shiliaoPullMsg.from_uid,message_type:0,message:e.GameDatas.getIntance().shiliaoPullMsg.message,user_name:this.friendData.friend_info.user_name,sex:this.friendData.friend_info.sex,star_num:this.friendData.friend_info.star_num,avatar:this.friendData.friend_info.avatar,isLeft:1,swap_status:e.GameDatas.getIntance().shiliaoPullMsg.swap_status,type:""});
this.initShow(this.friendData)}if(e.GameDatas.getIntance().user_info.id==e.GameDatas.getIntance().shiliaoPullMsg.from_uid){if(1==e.GameDatas.getIntance().shiliaoPullMsg.type&&1==e.GameDatas.getIntance().shiliaoPullMsg.swap_status){var t=[];t=[{text:"【交易请求】我想用",style:{size:18,textColor:"0x000000",fontFamily:"Microsoft YaHei"}},{text:e.GameDatas.getIntance().shiliaoPullMsg.extra.used_num+"号碎片",style:{size:18,bold:!0,textColor:"0xD9E3D2",stroke:1,strokeColor:"0x4f9108",fontFamily:"Microsoft YaHei"}},{text:"跟你交换",style:{size:18,textColor:"0x000000",fontFamily:"Microsoft YaHei"}},{text:e.GameDatas.getIntance().shiliaoPullMsg.extra.need_num+"号碎片",style:{size:18,bold:!0,textColor:"0xFBC2C0",stroke:1,strokeColor:"0xff5454",fontFamily:"Microsoft YaHei"}}],e.GameDatas.getIntance().shiliaoMsgList.push({time:commonUtils.DateTool.formatThreeDateStr(+e.GameDatas.getIntance().shiliaoPullMsg.time),fid:this.friendData.friend_info.id,from_uid:e.GameDatas.getIntance().shiliaoPullMsg.from_uid,message_type:1,message:t,user_name:e.GameDatas.getIntance().user_info.user_name,sex:e.GameDatas.getIntance().user_info.sex,star_num:e.GameDatas.getIntance().user_info.star_num,avatar:e.GameDatas.getIntance().user_info.avatar,isLeft:0,swap_status:e.GameDatas.getIntance().shiliaoPullMsg.swap_status,type:""})}else e.GameDatas.getIntance().shiliaoMsgList.push({time:commonUtils.DateTool.formatThreeDateStr(+e.GameDatas.getIntance().shiliaoPullMsg.time),fid:this.friendData.friend_info.id,from_uid:e.GameDatas.getIntance().shiliaoPullMsg.from_uid,message_type:0,message:e.GameDatas.getIntance().shiliaoPullMsg.message,user_name:e.GameDatas.getIntance().user_info.user_name,sex:e.GameDatas.getIntance().user_info.sex,star_num:e.GameDatas.getIntance().user_info.star_num,avatar:e.GameDatas.getIntance().user_info.avatar,isLeft:0,swap_status:e.GameDatas.getIntance().shiliaoPullMsg.swap_status,type:""});this.initShow(this.friendData)}}else this.recoverShow(this.friendData)},n.prototype.recoverShow=function(t){if(this.friendData=t,this.friendData.messages.length){var n=-1;1==+this.friendData.swap.swap_state&&(this.friendData.swap.swap_sponsor==e.GameDatas.getIntance().user_info.id&&this.friendData.swap.swap_accepter==this.friendData.friend_info.id&&(this.isbusinessViewVisible=!0,this.showSwapRequstionBrd(),this.statu=1),this.friendData.swap.swap_sponsor==this.friendData.friend_info.id&&this.friendData.swap.swap_accepter==e.GameDatas.getIntance().user_info.id&&(this.isbusinessViewVisible=!1,this.showSwapRequstionBrd(),this.statu=1)),(2==+this.friendData.swap.swap_state||3==+this.friendData.swap.swap_state)&&(this.friendData.swap.swap_sponsor==e.GameDatas.getIntance().user_info.id&&this.recoverScoller(),this.statu=+this.friendData.swap.swap_state);for(var a=0;a<this.friendData.messages.length;a++)if(this.friendData.messages[a].id==this.friendData.friend_info.id)if(1==this.friendData.messages[a].type){var i=[];i=[{text:"【交易请求】我想用",style:{size:18,textColor:"0x000000",fontFamily:"Microsoft YaHei"}},{text:this.friendData.messages[a].extra.used_num+"号碎片",style:{size:18,bold:!0,textColor:"0xD9E3D2",stroke:1,strokeColor:"0x4f9108",fontFamily:"Microsoft YaHei"}},{text:"跟你交换",style:{size:18,textColor:"0x000000",fontFamily:"Microsoft YaHei"}},{text:this.friendData.messages[a].extra.need_num+"号碎片",style:{size:18,bold:!0,textColor:"0xFBC2C0",stroke:1,strokeColor:"0xff5454",fontFamily:"Microsoft YaHei"}}],e.GameDatas.getIntance().shiliaoMsgList.push({time:commonUtils.DateTool.formatThreeDateStr(+this.friendData.messages[a].time),fid:this.friendData.friend_info.id,from_uid:this.friendData.messages[a].id,message_type:1,message:i,user_name:this.friendData.friend_info.user_name,sex:this.friendData.friend_info.sex,star_num:this.friendData.friend_info.star_num,avatar:this.friendData.friend_info.avatar,isLeft:1,swap_status:this.statu?this.statu:n,type:""})}else e.GameDatas.getIntance().shiliaoMsgList.push({time:commonUtils.DateTool.formatThreeDateStr(+this.friendData.messages[a].time),fid:this.friendData.friend_info.id,from_uid:this.friendData.messages[a].id,message_type:0,message:this.friendData.messages[a].message,user_name:this.friendData.friend_info.user_name,sex:this.friendData.friend_info.sex,star_num:this.friendData.friend_info.star_num,avatar:this.friendData.friend_info.avatar,isLeft:1,swap_status:this.statu?this.statu:n,type:""});else if(1==this.friendData.messages[a].type){var i=[];i=[{text:"【交易请求】我想用",style:{size:18,textColor:"0x000000",fontFamily:"Microsoft YaHei"}},{text:this.friendData.messages[a].extra.used_num+"号碎片",style:{size:18,bold:!0,textColor:"0xD9E3D2",stroke:1,strokeColor:"0x4f9108",fontFamily:"Microsoft YaHei"}},{text:"跟你交换",style:{size:18,textColor:"0x000000",fontFamily:"Microsoft YaHei"}},{text:this.friendData.messages[a].extra.need_num+"号碎片",style:{size:18,bold:!0,textColor:"0xFBC2C0",stroke:1,strokeColor:"0xff5454",fontFamily:"Microsoft YaHei"}}],e.GameDatas.getIntance().shiliaoMsgList.push({time:commonUtils.DateTool.formatThreeDateStr(+this.friendData.messages[a].time),fid:this.friendData.friend_info.id,from_uid:this.friendData.messages[a].id,message_type:1,message:i,user_name:e.GameDatas.getIntance().user_info.user_name,sex:e.GameDatas.getIntance().user_info.sex,star_num:e.GameDatas.getIntance().user_info.star_num,avatar:e.GameDatas.getIntance().user_info.avatar,isLeft:0,swap_status:this.statu?this.statu:n,type:""})}else e.GameDatas.getIntance().shiliaoMsgList.push({time:commonUtils.DateTool.formatThreeDateStr(+this.friendData.messages[a].time),fid:this.friendData.friend_info.id,from_uid:this.friendData.messages[a].id,message_type:0,message:this.friendData.messages[a].message,user_name:e.GameDatas.getIntance().user_info.user_name,sex:e.GameDatas.getIntance().user_info.sex,star_num:e.GameDatas.getIntance().user_info.star_num,avatar:e.GameDatas.getIntance().user_info.avatar,isLeft:0,swap_status:this.statu?this.statu:n,type:""});this.initShow(this.friendData).then()}},n.prototype.initShow=function(t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(a){return n=this,n.friendData=t,new Promise(function(t){if(e.GameDatas.getIntance().shiliaoMsgList){if(n.listG.cacheAsBitmap=!1,n.listG.numChildren!=e.GameDatas.getIntance().shiliaoMsgList.length){n.listG.removeChildren(),n.listG.height=578;for(var a=0,i=e.GameDatas.getIntance().shiliaoMsgList.length;i>a;a++){var o;1==e.GameDatas.getIntance().shiliaoMsgList[a].isLeft&&n.friendData.friend_info.id==e.GameDatas.getIntance().shiliaoMsgList[a].fid&&(o=new e.PanelChatShiLiaoViewLeftItem(e.GameDatas.getIntance().shiliaoMsgList[a])),0==e.GameDatas.getIntance().shiliaoMsgList[a].isLeft&&n.friendData.friend_info.id==e.GameDatas.getIntance().shiliaoMsgList[a].fid&&(o=new e.PanelChatShiLiaoViewRightItem(e.GameDatas.getIntance().shiliaoMsgList[a])),o&&(n.listG.addChild(o),n.listG.validateNow(),o.validateNow(),o.y+o.height>n.listS.height&&(n.listG.scrollV=o.y+o.height-n.listS.height))}}n.listG.cacheAsBitmap=!0}}),[2]})})},n.prototype.enable=function(){t.prototype.enable.call(this),this.swapRequestMsg.visible||(this.listG.validateNow(),this.listG.contentHeight>578&&(this.listG.scrollV=this.listG.contentHeight-578)),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.postBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.swapImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.swapBtn.swapBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},n.prototype.closeSwapList=function(){this.swapMaYiPinTuImg.visible=!1},n.prototype.click=function(){e.GameRequestMgr.getIntance().Chat_getSwappableList_C()},n.prototype.hideSwapBtn=function(){this.swapMaYiPinTuImg.visible=!1,this.swapBtn.visible=!1},n.prototype.showSwapProp=function(){this.swapMaYiPinTuImg.visible=!0,this.swapMaYiPinTuImg.initShow(e.GameDatas.getIntance().swapListInfo,this.friendData)},n.prototype.showSwapRequstionBrd=function(){var t=this;e.GameDatas.getIntance().swapRequsMsgInfo={id:this.friendData.friend_info.id,name:this.isbusinessViewVisible?e.GameDatas.getIntance().user_info.user_name:this.friendData.friend_info.user_name,avatar:this.isbusinessViewVisible?e.GameDatas.getIntance().user_info.avatar:this.friendData.friend_info.avatar,star_num:this.isbusinessViewVisible?e.GameDatas.getIntance().user_info.star_num:this.friendData.friend_info.star_num,sex:this.isbusinessViewVisible?e.GameDatas.getIntance().user_info.sex:this.friendData.friend_info.sex,isVisible:this.isbusinessViewVisible},t.swapRequestShow()},n.prototype.swapRequestShow=function(){var t=this;t.swapRequestMsg.visible=!0,t.swapRequestMsg.initShow(e.GameDatas.getIntance().swapRequsMsgInfo),t.swapRequestMsg.msgInfo=e.GameDatas.getIntance().swapRequsMsgInfo,t.listS.y=t.swapRequestMsg.y+145,t.listS.height=t.scrollerH-(t.listS.y-t.scrollerY),t.isScroller=!0},n.prototype.recoverScoller=function(){this.listS.y=this.swapRequestMsg.y+29,this.listS.height=this.scrollerH,this.listG.contentHeight>578&&(this.listG.scrollV=this.listG.contentHeight-578),this.swapRequestMsg.visible=!1},n.prototype.touchHanle=function(t){var n=this;e.GameDatas.getIntance().shiliaoMsgList;switch(t.target){case n.closeBtn:this.listG.removeChildren(),e.GameDatas.getIntance().shiliaoMsgList=[],this.listG.removeChildren(),this.swapBtn.visible=!1,this.swapMaYiPinTuImg.visible=!1,this.removeUs();break;case n.postBtn:if(""==this.inputMsg.text)return void viewTool.TipsUtil.getIntance().showTip("请输入内容");e.GameRequestMgr.getIntance().Chat_sendPrivateMsg_C(this.friendData.friend_info.id,this.inputMsg.text),this.inputMsg.text="";break;case this.swapImg:this.swapBtn.visible?this.swapBtn.visible=!1:this.swapBtn.visible=!0}},n.prototype.removeUs=function(){this.recoverScoller(),this.listG.scrollV=0,e.GameRequestMgr.getIntance().Chat_getPrivateList_C(),t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.postBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.swapImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.swapBtn.swapBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.click,this)},n}(baseContent.BasePanel);e.PanelChatShiLiaoXiangQingView=t,__reflect(t.prototype,"game.PanelChatShiLiaoXiangQingView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="PanelChatSwapMessageSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.initShow(this.msgInfo),this.addEvent()},n.prototype.initShow=function(e){return __awaiter(this,void 0,void 0,function(){var t,n=this;return __generator(this,function(a){return t=this,new Promise(function(a){e&&(t.head.setHEHead(e.avatar),t.nickName.text=commonUtils.StringTool.getShortStrAtByte(e.name+"",24),t.starNum.text=e.star_num+"","1"==e.sex?t.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_boy_png":t.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_girl_png",e.isVisible?(n.deleteBtn.visible=!0,n.jujueBtn.visible=n.agreeBtn.visible=!1):(n.deleteBtn.visible=!1,n.jujueBtn.visible=n.agreeBtn.visible=!0))}),[2]})})},n.prototype.addEvent=function(){this.deleteBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.jujueBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.agreeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){var n=this;switch(t.target){case n.deleteBtn:e.GameRequestMgr.getIntance().Chat_delSwapRequest_C(this.msgInfo.id);break;case n.jujueBtn:e.GameRequestMgr.getIntance().Chat_refuseSwapRequest_C(this.msgInfo.id);break;case n.agreeBtn:e.GameRequestMgr.getIntance().Chat_completeSwapRequest_C(this.msgInfo.id)}},n.prototype.openDetailPanel=function(){},n.prototype.removeEvent=function(){this.deleteBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){},n}(eui.Component);e.PanelChatSwapMessage=t,__reflect(t.prototype,"game.PanelChatSwapMessage")}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelChatView",n.isCreate=!1,n.isEnterWithRunHorse=e,n.skinName="PanelChatViewSkin",n}return __extends(n,t),n.prototype.init=function(){this.addFriend.newsIconLocal={x:40,y:0},this.worldListS.bounces=!1,this.addFriendG.touchChildren=!1,this.worldMsgNew.visible=!1,egret.MainContext.instance.stage.maxTouches=1,this.isCreate=!0,this.initShow()},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t,n=this;return __generator(this,function(a){return t=this,t.isCreate?(new Promise(function(a){var i=e.GameDatas.getIntance().friendList;t.haoyouBtn.selected=t.haoyouGrp.visible=n.shiliaoBtn.touchEnabled=n.shijieBtn.touchEnabled=!0,t.haoyouBtn.touchEnabled=t.shiliaoBtn.selected=t.shiliaoGrp.visible=t.shijieBtn.selected=t.worldGrp.visible=!1,t.numLaba=e.GameDatas.getIntance().user_info.trumpet,i&&i.length>0?new Promise(function(n){t.nullGrp.visible=!1,t.listG.visible=!0;var a=!1,o=0;if(i.length!=t.listG.numChildren){t.listG.removeChildren();for(var s=0,r=i.length;r>s;s++){var c=new e.PanelHaoYouViewItem(i[s]);t.listG.addChild(c),!a&&(i[s].can_give_energy||i[s].be_given_energy&&!i[s].aready_get_energy)&&(a=!0),o+=i[s].aready_get_num}}else for(var s=0,r=i.length;r>s;s++){var c=t.listG.getChildAt(s);c.initShowData(i[s]),c.initShow(),!a&&(i[s].can_give_energy||i[s].be_given_energy&&!i[s].aready_get_energy)&&(a=!0),o+=i[s].aready_get_num}t.showLinQuBtn.visible=t.showLinQuBtn.enabled=a,t.showAllText.visible=!0,t.showAllText.text="今日已领取："+o+"/50"}):(t.nullGrp.visible=!0,t.showLinQuBtn.visible=t.listG.visible=!1)}),t.worldTalkShow(),t.isEnterWithRunHorse?(t.enterForRunHorse(),t.isEnterWithRunHorse=!1,[2]):[2]):[2]})})},n.prototype.enable=function(){t.prototype.enable.call(this),e.GameRequestMgr.getIntance().User_lookFriends_C(),e.GameRequestMgr.getIntance().User_getApplyMessage_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.downType)},n.prototype.addEvent=function(){var t=this;commonUtils.EventMananger.getIntance().addEvent("brd_show_red_point",this.brdShowRedPoint,this),commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.ShiJieJuBaoChangColour,t.jbChangColour,t),commonUtils.EventMananger.getIntance().addEvent("add_news_of_friends",t.changeNewsFriends,t),commonUtils.EventMananger.getIntance().addEvent("delete_this_one_messages",t.delOnemessages,t),t.closeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.addFriendG.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.showLinQuBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.shiliaoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t,!0,2),t.haoyouBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t,!0,1),t.shijieBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t,!0,3),t.postBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.deleteBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.cancelBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.labaImg.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.worldMsgNew.addEventListener(egret.TouchEvent.TOUCH_TAP,t.touchHanle,t),t.worldListS.addEventListener(eui.UIEvent.CHANGE_END,t.changeUiListEnd,t)},n.prototype.brdShowRedPoint=function(t){this.shiliaoRedImg.visible=!0,e.GameRequestMgr.getIntance().Chat_getPrivateList_C(),e.GameDatas.getIntance().shiliaoRedPointList.push(t)},n.prototype.jbChangColour=function(t){if(e.GameDatas.getIntance().worldInfoList)for(var n=0,a=e.GameDatas.getIntance().worldInfoList.length;a>n;n++)e.GameDatas.getIntance().worldInfoList[n].from_uid==t&&(this.worldListG.getChildAt(n).reportText.textFlow=[{text:"已举报",style:{size:20,textColor:4996665,underline:!0}}],this.worldListG.getChildAt(n).reportText.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.worldListG.getChildAt(n).touchHanle,this.worldListG.getChildAt(n)))},n.prototype.deleteHaoYouitem=function(t){if(e.GameDatas.getIntance().friendList)for(var n=0,a=e.GameDatas.getIntance().friendList.length;a>n;n++)e.GameDatas.getIntance().friendList[n].fid==t.fid&&this.listG.removeChildAt(n)},n.prototype.touchHanle=function(t){switch(t.target){case this.worldMsgNew:this.worldListG.scrollV=this.worldListG.measuredHeight-620,this.worldMsgNew.visible=this.worldMsgNew.visible=!1;break;case this.closeImg:this.isDelOneMsg=!1,this.removeUs();break;case this.addBtn:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelYaoQingJiangLiView);break;case this.addFriendG:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelHaoYouAddView);break;case this.showLinQuBtn:e.GameRequestMgr.getIntance().User_energy_C();break;case this.haoyouBtn:this.isDelOneMsg=!1,this.haoyouBtn.touchEnabled=!1,this.shiliaoBtn.touchEnabled=this.shijieBtn.touchEnabled=this.haoyouGrp.visible=!0,this.shiliaoGrp.visible=this.worldGrp.visible=!1,this.shiliaoBtn.selected=this.shijieBtn.selected=!1,e.GameRequestMgr.getIntance().User_lookFriends_C();break;case this.shiliaoBtn:this.shiliaoBtn.touchEnabled=!1,this.haoyouBtn.touchEnabled=this.shijieBtn.touchEnabled=this.shiliaoGrp.visible=!0,this.haoyouGrp.visible=this.worldGrp.visible=!1,this.shijieBtn.selected=this.haoyouBtn.selected=!1,e.GameRequestMgr.getIntance().Chat_getPrivateList_C(),this.addHaoYouChatItem().then();break;case this.shijieBtn:this.clickShijieBtn();break;case this.postBtn:if(this.numLaba<1)baseContent.PanelManager.getIntance().openTypeIntance(e.PanelBuyLaBaView);else{if(""==this.inputText.text)return void viewTool.TipsUtil.getIntance().showTip("请输入内容");this.shijieTalk(),this.numLaba--,this.labaLab.text=""+this.numLaba,this.inputText.text=""}break;case this.deleteBtn:if(this.shiliaoListG.numChildren>0){this.deleteBtn.visible=!1,this.cancelBtn.visible=!0;for(var n=0,a=this.shiliaoListG.numChildren;a>n;n++)this.shiliaoListG.getChildAt(n)instanceof e.PanelChatShiLiaoMessage&&(this.shiliaoListG.getChildAt(n).deleteG.visible=!0)}break;case this.cancelBtn:this.deleteBtn.visible=!0,this.cancelBtn.visible=!1;for(var n=0,a=this.shiliaoListG.numChildren;a>n;n++)this.shiliaoListG.getChildAt(n)instanceof e.PanelChatShiLiaoMessage&&(this.shiliaoListG.getChildAt(n).deleteG.visible=!1);break;case this.labaImg:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelBuyLaBaView)}},n.prototype.clickShijieBtn=function(){this.isDelOneMsg=!1,this.shijieBtn.touchEnabled=!1,this.haoyouBtn.touchEnabled=this.shiliaoBtn.touchEnabled=this.worldGrp.visible=!0,this.shiliaoGrp.visible=this.haoyouGrp.visible=!1,this.shiliaoBtn.selected=this.haoyouBtn.selected=!1,this.worldRedImg.visible=!1,this.labaLab.text=""+this.numLaba},n.prototype.enterForRunHorse=function(e){this.shijieBtn.selected=!0,null!=e&&(this.isEnterWithRunHorse=e),this.clickShijieBtn(),this.worldTalkShow()},n.prototype.showRedPoint=function(){e.GameDatas.getIntance().shiliaoRedPointList&&0!=e.GameDatas.getIntance().shiliaoRedPointList.length?this.shiliaoRedImg.visible=!0:this.shiliaoRedImg.visible=!1},n.prototype.addHaoYouChatItem=function(){return __awaiter(this,void 0,void 0,function(){var t,n=this;return __generator(this,function(a){return t=this,t.showRedPoint(),new Promise(function(a){if(t.shiliaoNullGrp.visible=!1,t.deleteBtn.visible=t.shiliaoListG.visible=t.lineImg.visible=!0,e.GameDatas.getIntance().shiliaoHaoYouMsgList&&e.GameDatas.getIntance().shiliaoHaoYouMsgList.length>0){t.shiliaoListG.removeChildren();for(var i=0,o=e.GameDatas.getIntance().shiliaoHaoYouMsgList.length;o>i;i++){var s=new e.PanelChatShiLiaoMessage(e.GameDatas.getIntance().shiliaoHaoYouMsgList[i]);t.shiliaoListG.addChild(s)}if(t.isDelOneMsg){t.cancelBtn.visible=!0,t.deleteBtn.visible=!1;for(var i=0,o=n.shiliaoListG.numChildren;o>i;i++)n.shiliaoListG.getChildAt(i)instanceof e.PanelChatShiLiaoMessage&&(n.shiliaoListG.getChildAt(i).deleteG.visible=!0)}else t.cancelBtn.visible=!1,t.deleteBtn.visible=!0}else t.isDelOneMsg=!1,t.shiliaoNullGrp.visible=!0,t.cancelBtn.visible=t.deleteBtn.visible=t.shiliaoListG.visible=t.lineImg.visible=!1}),[2]})})},n.prototype.delOnemessages=function(){this.isDelOneMsg=!0},n.prototype.shijieTalk=function(){e.GameRequestMgr.getIntance().Chat_sendWorldMsg_C(this.inputText.text);var t=new e.PanelChatWorldMessageRight({time:commonUtils.DateTool.formatThreeDateStr((new Date).getTime()/1e3),fid:e.GameDatas.getIntance().user_info.id,from_uid:e.GameDatas.getIntance().user_info.id,message_type:0,message:this.inputText.text,user_name:e.GameDatas.getIntance().user_info.user_name,sex:e.GameDatas.getIntance().user_info.sex,star_num:e.GameDatas.getIntance().user_info.star_num,avatar:e.GameDatas.getIntance().user_info.avatar,isLeft:0,swap_status:0,type:""});this.worldListG.addChild(t),this.worldListG.validateNow(),this.worldListG.contentHeight>620&&(this.worldListG.scrollV=this.worldListG.contentHeight-620)},n.prototype.worldTalkShow=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=this,new Promise(function(n){if(e.GameDatas.getIntance().worldInfoList&&t.worldListG.numChildren!=e.GameDatas.getIntance().worldInfoList.length){t.worldListG.removeChildren();for(var a=0,i=e.GameDatas.getIntance().worldInfoList.length;i>a;a++){var o=void 0;"antgroup_employ"!=e.GameDatas.getIntance().worldInfoList[a].type?e.GameDatas.getIntance().worldInfoList[a].from_uid!=e.GameDatas.getIntance().user_info.id?(o=new e.PanelChatWorldMessage({time:commonUtils.DateTool.formatThreeDateStr(+e.GameDatas.getIntance().worldInfoList[a].time),fid:e.GameDatas.getIntance().worldInfoList[a].fid,from_uid:e.GameDatas.getIntance().worldInfoList[a].from_uid,message_type:0,message:e.GameDatas.getIntance().worldInfoList[a].message,user_name:e.GameDatas.getIntance().worldInfoList[a].user_name,sex:e.GameDatas.getIntance().worldInfoList[a].sex,star_num:e.GameDatas.getIntance().worldInfoList[a].star_num,avatar:e.GameDatas.getIntance().worldInfoList[a].avatar,isLeft:1,swap_status:e.GameDatas.getIntance().worldInfoList[a].swap_status,type:""}),t.worldListG.addChild(o),t.worldListG.validateNow(),t.worldListG.contentHeight>620&&(t.worldMsgNew.visible=!0),t.shijieBtn.selected||(t.worldRedImg.visible=!0)):(o=new e.PanelChatWorldMessageRight({time:commonUtils.DateTool.formatThreeDateStr(+e.GameDatas.getIntance().worldInfoList[a].time),fid:e.GameDatas.getIntance().worldInfoList[a].fid,from_uid:e.GameDatas.getIntance().worldInfoList[a].from_uid,message_type:0,message:e.GameDatas.getIntance().worldInfoList[a].message,user_name:e.GameDatas.getIntance().worldInfoList[a].user_name,sex:e.GameDatas.getIntance().worldInfoList[a].sex,star_num:e.GameDatas.getIntance().worldInfoList[a].star_num,avatar:e.GameDatas.getIntance().worldInfoList[a].avatar,isLeft:0,swap_status:e.GameDatas.getIntance().worldInfoList[a].swap_status,type:""}),t.worldListG.addChild(o),t.worldListG.validateNow(),t.worldListG.contentHeight>620&&(t.worldListG.scrollV=t.worldListG.contentHeight-620),t.worldMsgNew.visible=!1,t.shijieBtn.selected&&(t.worldRedImg.visible=!1)):(console.log("成员招募消息---------------------------"),o=new e.PanelChatWorldMessageCYZM({time:commonUtils.DateTool.formatThreeDateStr(+e.GameDatas.getIntance().worldInfoList[a].time),fid:e.GameDatas.getIntance().worldInfoList[a].fid,from_uid:e.GameDatas.getIntance().worldInfoList[a].from_uid,message_type:0,message:e.GameDatas.getIntance().worldInfoList[a].message,user_name:e.GameDatas.getIntance().worldInfoList[a].user_name,sex:e.GameDatas.getIntance().worldInfoList[a].sex,star_num:e.GameDatas.getIntance().worldInfoList[a].star_num,avatar:e.GameDatas.getIntance().worldInfoList[a].avatar,isLeft:1,swap_status:e.GameDatas.getIntance().worldInfoList[a].swap_status,type:"antgroup_employ",group:e.GameDatas.getIntance().worldInfoList[a].group}),t.worldListG.addChild(o),t.worldListG.validateNow(),t.worldListG.contentHeight>620&&(t.worldMsgNew.visible=!0),t.shijieBtn.selected||(t.worldRedImg.visible=!0))}}}),[2]})})},n.prototype.labaRealTimeNum=function(){this.numLaba=e.GameDatas.getIntance().user_info.trumpet,this.labaLab.text=""+this.numLaba},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.downType)},n.prototype.showRedIcon=function(e){this.addFriend.newsIconVisible=e},n.prototype.changeNewsFriends=function(t){this.addFriend.newsIconVisible=t,baseContent.PanelManager.getIntance().openTypeIntance(e.PanelHaoYouAddView)},n.prototype.removeEvent=function(){var e=this;commonUtils.EventMananger.getIntance().removeEvent("add_news_of_friends",e.changeNewsFriends,e),commonUtils.EventMananger.getIntance().removeEvent("delete_this_one_messages",e.delOnemessages,e),e.closeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.addFriend.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.showLinQuBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.shiliaoBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.haoyouBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.shijieBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.postBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.deleteBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.cancelBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.labaImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.worldMsgNew.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.worldListS.removeEventListener(eui.UIEvent.CHANGE_END,e.changeUiListEnd,e)},n.prototype.changeUiListEnd=function(){this.worldListG.scrollV>this.worldListG.measuredHeight-620-20&&(this.worldMsgNew.visible=this.worldRedImg.visible=!1)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.addBtn.destroy(),this.addBtn=null,this.addFriend.destroy(),this.addFriend=null,this.showLinQuBtn.destroy(),this.showLinQuBtn=null},n}(baseContent.BasePanel);e.PanelChatView=t,__reflect(t.prototype,"game.PanelChatView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.x=17.5,n.msgInfo=e,n.skinName="PanelChatWorldMessageSkin",n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.initShow(this.msgInfo),this.head.touchChildren=!1,this.addEvent()},n.prototype.initShow=function(t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(a){return n=this,n.msgInfo=t,new Promise(function(a){if(t){if(n.timeText.text=t.time,n.head.setHEHead(t.avatar),n.nickName.text=commonUtils.StringTool.getShortStrAtByte(t.user_name+"",24),e.GameDatas.getIntance().jubaoIDList&&e.GameDatas.getIntance().jubaoIDList.length>0)for(var i=0,o=e.GameDatas.getIntance().jubaoIDList.length;o>i;i++)e.GameDatas.getIntance().jubaoIDList[i]==t.from_uid?(n.reportText.textFlow=[{text:"已举报",style:{size:20,textColor:4996665,underline:!0}}],n.reportText.touchEnabled=!1):n.reportText.textFlow=[{text:"举报",style:{size:20,textColor:4231613,underline:!0}}];if(n.reportText.x=n.nickName.x+n.nickName.width+10,n.starNum.text=t.star_num+"","1"==t.sex?n.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_boy_png":n.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_girl_png",n.msgText.text=t.message,n.qipaoImg.width=n.msgText.width+42,n.qipaoImg.width>=n.chatKuangGrp.width){Math.floor(n.msgText.width/345);n.qipaoImg.width=n.chatKuangGrp.width,n.msgText.width=n.qipaoImg.width-42,n.msgText.lineSpacing=2,n.qipaoImg.height=n.msgText.height+32,n.chatKuangGrp.height=n.qipaoImg.height,n.height=n.chatKuangGrp.height+94}}}),[2]})})},n.prototype.addEvent=function(){this.reportText.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.head.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.reportText:e.GameDatas.getIntance().jubaoInfo={id:this.msgInfo.from_uid,user_name:this.msgInfo.user_name,isJuBaoType:2};var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatJuBao");n&&n.initShow(e.GameDatas.getIntance().jubaoInfo),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelChatJuBao,e.GameDatas.getIntance().jubaoInfo);break;case this.head:this.msgInfo.from_uid!=e.GameDatas.getIntance().user_info.id&&e.GameRequestMgr.getIntance().User_searchUser_C(this.msgInfo.from_uid)}},n.prototype.removeEvent=function(){this.reportImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){},n}(eui.Component);e.PanelChatWorldMessage=t,__reflect(t.prototype,"game.PanelChatWorldMessage")}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.x=17.5,n.msgInfo=e,n.skinName="PanelChatWorldMessageCYZMSkin",n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.initShow(this.msgInfo),this.head.touchChildren=!1,this.addEvent()},n.prototype.initShow=function(t){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(a){return n=this,n.msgInfo=t,new Promise(function(a){if(t){if(n.timeText.text=t.time,n.head.setHEHead(t.avatar),n.nickName.text=commonUtils.StringTool.getShortStrAtByte(t.user_name+"",24),e.GameDatas.getIntance().jubaoIDList&&e.GameDatas.getIntance().jubaoIDList.length>0)for(var i=0,o=e.GameDatas.getIntance().jubaoIDList.length;o>i;i++)e.GameDatas.getIntance().jubaoIDList[i]==t.from_uid?(n.reportText.textFlow=[{text:"已举报",style:{size:20,textColor:4996665,underline:!0}}],n.reportText.touchEnabled=!1):n.reportText.textFlow=[{text:"举报",style:{size:20,textColor:4231613,underline:!0}}];n.starNum.text=t.star_num+"","1"==t.sex?n.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_boy_png":n.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_girl_png",n.msgText.text=t.message}"antgroup_employ"==t.type&&(t.from_uid==e.GameDatas.getIntance().user_info.id?n.showGrpInfo(t.group,!1):n.showGrpInfo(t.group,!0))}),[2]})})},n.prototype.isLeftView=function(e){if(e)this.headGrp.left=35,this.infoGrp.left=144,this.chatKuangGrp.left=127,this.qipaoImg.right=0,this.qipaoImg.scaleX=1,this.antGrpInfo.left=30;else{this.headGrp.right=15,this.infoGrp.right=144,this.antGrpInfo.right=30,this.chatKuangGrp.right=130,this.qipaoImg.right=-5,this.qipaoImg.scaleX=-1;for(var t=0;3>t;t++){var n=this.infoGrp.removeChildAt(t);this.infoGrp.addChild(n)}}},n.prototype.showGrpInfo=function(e,t){var n=this;switch(n.isLeftView(t),n.grpID.text="ID:"+e.id,n.grpName.text=e.group_name+"",n.grpMemberNum.text="成员："+e.mem_num+"/"+e.max_mem_num,n.sendBtn.starGrp.getChildByName("starNum").text=""+e.in_level,e.in_condition){case 0:if(ant_grp.AntGrpDatas.getIntance().antGrpMineInfos&&ant_grp.AntGrpDatas.getIntance().antGrpMineInfos.group&&e.id==ant_grp.AntGrpDatas.getIntance().antGrpMineInfos.group.id){n.sendBtn.enabled=!1;break}n.sendBtn.enabled=!0,n.sendBtn.textImg.source="ant_grp_text_jr0_png",n.sendBtn.bgImg.source="panel_common_someBtn_json.panel_common_type14_1_png";break;case 1:if(ant_grp.AntGrpDatas.getIntance().antGrpMineInfos&&ant_grp.AntGrpDatas.getIntance().antGrpMineInfos.group&&e.id==ant_grp.AntGrpDatas.getIntance().antGrpMineInfos.group.id){n.sendBtn.enabled=!1;break}n.sendBtn.textImg.source="ant_grp_text_jr1_png",n.sendBtn.bgImg.source="panel_common_someBtn_json.panel_common_type15_1_png",n.sendBtn.enabled=!0;
break;case 2:n.sendBtn.textImg.source="ant_grp_text_jr0_png",n.sendBtn.bgImg.source="panel_common_someBtn_json.panel_common_type14_1_png",n.sendBtn.enabled=!1}},n.prototype.addEvent=function(){this.reportText.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.head.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.reportText:e.GameDatas.getIntance().jubaoInfo={id:this.msgInfo.from_uid,user_name:this.msgInfo.user_name,isJuBaoType:2};var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatJuBao");n&&n.initShow(e.GameDatas.getIntance().jubaoInfo),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelChatJuBao,e.GameDatas.getIntance().jubaoInfo);break;case this.head:this.msgInfo.from_uid!=e.GameDatas.getIntance().user_info.id&&e.GameRequestMgr.getIntance().User_searchUser_C(this.msgInfo.from_uid);break;case this.sendBtn:switch(this.msgInfo.group.in_condition){case 0:ant_grp.AntGrpRequestMgr.getIntance().AntGroup_enterGroup_C(this.msgInfo.group.id);break;case 1:var a=new ant_grp.AntGrpAddGrpYanZhengView;a.dataInfo=this.msgInfo.group,baseContent.PanelManager.getIntance().openPanelInstance(a)}}},n.prototype.removeEvent=function(){this.reportImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){},n}(eui.Component);e.PanelChatWorldMessageCYZM=t,__reflect(t.prototype,"game.PanelChatWorldMessageCYZM")}(game||(game={}));var game;!function(e){var t=function(e){function t(t){var n=e.call(this)||this;return n.msgInfo=t,n.skinName="PanelChatWorldMessageRightSkin",n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.initShow(this.msgInfo),this.addEvent()},t.prototype.initShow=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=this,new Promise(function(n){if(e){t.timeText.text=e.time,t.head.setHEHead(e.avatar),t.nickName.text=commonUtils.StringTool.getShortStrAtByte(e.user_name+"",24),t.nickName.x=433-t.nickName.width,t.starNum.text=e.star_num+"","1"==e.sex?t.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_boy_png":t.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_girl_png",t.msgText.text=e.message,t.msgText.x=352-t.msgText.width;Math.floor(t.msgText.width/336);t.msgText.x<14&&(t.msgText.x=14),t.qipaoImg.width=t.msgText.width+40,t.qipaoImg.width>=t.chatKuangGrp.width&&(t.qipaoImg.width=t.chatKuangGrp.width,t.msgText.width=t.qipaoImg.width-40,t.msgText.lineSpacing=2,t.qipaoImg.height=t.msgText.height+21,t.chatKuangGrp.height=t.qipaoImg.height,t.height=t.chatKuangGrp.height+94),t.qipaoImg.x=378-t.qipaoImg.width}}),[2]})})},t.prototype.addEvent=function(){},t.prototype.touchHanle=function(e){},t.prototype.removeEvent=function(){},t.prototype.destroy=function(){},t}(eui.Component);e.PanelChatWorldMessageRight=t,__reflect(t.prototype,"game.PanelChatWorldMessageRight")}(game||(game={}));var isNeedNewUserControl=!0,Main=function(e){function t(){var t=e.call(this)||this;if(egret.DisplayObject.defaultTouchEnabled=!1,egret.Stage.defaultTouchEnabled=!1,egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME){try{window.game=game,window.GameMainHeadDaimedView=game.GameMainHeadDaimedView,window.GameMainHeadGlodView=game.GameMainHeadGlodView,window.GameStratButton=game.GameStratButton,window.PanelBar=game.PanelBar,window.GameRandPanel=game.GameRandPanel,window.PanelAssignmCenterItem=game.PanelAssignmCenterItem,window.PanelDyjsItemCol=game.PanelDyjsItemCol,window.PanelDyjsItemRow=game.PanelDyjsItemRow,window.GameShopItem=game.GameShopItem,window.PanelLeftPanel=game.PanelLeftPanel,window.PanelLeftPanelItem=game.PanelLeftPanelItem,window.PanelXiaoXiViewItem=game.PanelXiaoXiViewItem,window.PanelXiaoXiViewYouJianItem=game.PanelXiaoXiViewYouJianItem,window.viewTool=viewTool,window.viewTools=viewTools,window.CustomBtn=viewTools.CustomBtn,window.CustomGrp=viewTools.CustomGrp,window.CustomImgBtn=viewTools.CustomImgBtn,window.TipsObj=viewTool.TipsObj}catch(n){}egret.Tween.get(t,{loop:!0}).wait(1e4).call(function(){platform.triggerGC()}),platform.setKeepScreenOn()}return baseContent.PanelManager.getIntance().soundManager=game.GameSoundMgr.getInstance(),commonUtils.StageUtils.getIntance().defaultSize={width:720,height:1280},commonUtils.StageUtils.getIntance().defaultOrientation=egret.OrientationMode.PORTRAIT,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initData()},t.prototype.initData=function(){var e=this,t=function(t){game.GameNetUrlData.isUseNet=t.isUseNet,game.GameNetUrlData.urlNet=t.urlNet,game.GameNetUrlData.sig=t.tempSig,resVersion=t.resVersion,romoteUrl=t.romoteUrl+resVersion+"/resource/",commonUtils.VersionUtils.getIntance().Version=t.version,egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME?game.GameServerMgr.getIntance().url=t.wsUrl:egret.Capabilities.runtimeType==egret.RuntimeType.WEB?(isNeedNewUserControl=t.isNeedNewUserControl,"xu"==egret.getOption("type")?(game.GameServerMgr.getIntance().url=t.wsUrl_xu,document.title="徐城-蚂蚁农场"):"jiang"==egret.getOption("type")?(document.title="江汉波-蚂蚁农场",game.GameServerMgr.getIntance().url=t.wsUrl_jiang):"test"==egret.getOption("type")?(document.title="测试服务-蚂蚁农场",game.GameServerMgr.getIntance().url=t.wsUrl_test):game.GameServerMgr.getIntance().url=t.wsUrl):game.GameServerMgr.getIntance().url=t.wsUrl,e.start();var n=game.GameServerMgr.getIntance().url;n.indexOf("wss://")>-1?n="https://cdngame.quansuwangluo.com/game/service":(n=n.replace("ws://","http://"),n=n.replace(":8282","")),n+="/data/pasture.json";var a=new net.HttpSender;a.get(n,null,function(t){game.GameDatas.getIntance().pasture_list=t,e.start()},e)};if(egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME){var n=romoteUrlHead+"/game/romote/AntGame_wxgame_remote/",a={isUseNet:!0,tempSig:"123",urlNet:"https://game.quansuwangluo.com/api/request/index",resVersion:"res_v_1_3_8",romoteUrl:n,version:"v_1_6_0",wsUrl2:"ws://47.105.79.64:8282",wsUrl:"wss://game.quansuwangluo.com:8282",wsUrl1:"ws://192.168.3.39:8282",info:"微信小游戏版本的发布配置表"};t(a)}else game.GameServerHttpMgr.getIntance().get("./resource/config/configData.json?time="+Math.random(),null,t)},t.prototype.start=function(){if(ant_grp.AntGrpDatas.getIntance().GameViewMgr=game.GameViewMgr,commonUtils.StageUtils.getIntance().stage||(commonUtils.StageUtils.getIntance().stage=this.stage),ant_grp.AntGrpRequestMgr.getIntance().initServer(game.GameServerMgr.getIntance()),ant_grp.AntGrpDatas.getIntance().tipsUtil=viewTool.TipsUtil.getIntance(),ant_grp.AntGrpDatas.getIntance().gameDataInstance=game.GameDatas.getIntance(),game.GameSoundMgr.getInstance().initSoundConfig(),egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME){var e=function(){game.GameSoundMgr.playBgMusic(!1),console.log("暂停游戏----"),baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView")},t=function(e){console.log(e),e&&e.query&&(game.GameDatas.getIntance().share_query=e.query),game.GameDatas.getIntance().user_info&&(console.log("载入游戏----"),game.GameServerMgr.getIntance().reLoadGame(),game.GameSoundMgr.playBgMusic(!0)),platform.showShareMenu(!0)},n=platform.getLaunchOptionsSync();n&&n.query&&(game.GameDatas.getIntance().share_query=n.query,console.log("game.GameDatas.getIntance().share_query-->"+game.GameDatas.getIntance().share_query)),platform.onHide(e),platform.onShow(t),game.WXTools.setShowDefaultMessage(platform)}else egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause(),console.log("暂停游戏----"),baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView")},egret.lifecycle.onResume=function(){egret.ticker.resume(),console.log("载入游戏----"),commonUtils.EventMananger.getIntance().sendEvent(game.GameServerMgr.serverOpenEvent),game.GameServerMgr.getIntance().reLoadGame()};var a=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",a),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadResource()},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,a,i,o,s,r;return __generator(this,function(c){switch(c.label){case 0:return this.loadingView=new game.GameLoadingView,baseContent.SceneLayerMgr.getIntance().addSceneIntance(this.loadingView),game.GameNetUrlData.isUseNet&&game.GameServerMgr.getIntance().start(this.enterGameView,this),e=commonUtils.VersionUtils.getIntance().Version,egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&(e+="_"+window.location.href),t=localStorage.getItem(e),t==e?[3,1]:(localStorage.setItem(e,e),egret.Capabilities.runtimeType==egret.RuntimeType.WEB?localStorage.removeItem("wx_token_"+e):localStorage.removeItem("wx_token"),localStorage.removeItem("stepUserHeadUrl"),localStorage.removeItem("step_control"),[3,3]);case 1:return n=void 0,(n=egret.Capabilities.runtimeType==egret.RuntimeType.WEB?localStorage.getItem("wx_token_"+e):localStorage.getItem("wx_token"))?(game.GameDatas.getIntance().token=n,[4,this.enterGame()]):[3,3];case 2:return c.sent(),[2];case 3:return egret.Capabilities.runtimeType!=egret.RuntimeType.WXGAME?[3,4]:(a=this,i=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,platform.getUserInfo()];case 1:return e=t.sent(),console.log(e),game.GameDatas.getIntance().wx_auth_msg=e,game.GameServerMgr.getIntance().isOpen&&game.GameRequestMgr.getIntance().User_getRdsession_C(),a.enterGame(),[2]}})})},o=function(e){var t=e;"login:ok"==t.errMsg?(game.GameDatas.getIntance().code_wx=t.code,i()):console.log("拒绝授权!!!")},game.WXTools.systemInfo=s,r=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,platform.createUserInfoButton({type:"img",text:"",image:romoteUrlHead+"/game/romote/start_btn.png",style:{left:(s.windowWidth-115)/2,top:s.windowHeight-150,width:115,height:50,backgroundColor:"#00ff00",borderColor:"#ff0000",borderWidth:0,borderRadius:10,textAlign:"center",fontSize:25,color:"#0000ff",lineHeight:100},withCredentials:!0,lang:"en"})];case 1:return e=t.sent(),e.onTap(function(t){var n=t;n.errMsg.indexOf("getUserInfo:ok")>-1?(console.log("点击授权-->"+t),game.GameDatas.getIntance().wx_auth_msg=t,game.GameDatas.getIntance().wx_userInfo=t.userInfo,platform.login(o),e.hide()):viewTool.TipsUtil.getIntance().showTip("授权失败！")}),[2]}})})},platform.getSystemInfo({success:function(e){console.log(e),s=e,r()},fail:function(e){s={windowWidth:720,windowHeight:1280},r()},complete:function(e){}}),[3,6]);case 4:return!game.GameDatas.getIntance().token&&game.GameServerMgr.getIntance().isOpen&&game.GameRequestMgr.getIntance().User_getToken_C(),[4,this.enterGame()];case 5:c.sent(),c.label=6;case 6:return[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return egret.ImageLoader.crossOrigin="anonymous",[4,commonUtils.ResUtils.getInstance().setMaxLoadingThe()];case 1:return e.sent(),egret.Capabilities.runtimeType!=egret.RuntimeType.WXGAME?[3,3]:[4,commonUtils.ResUtils.getInstance().addConfig("default.res.json?v="+commonUtils.VersionUtils.getIntance().Version,romoteUrl)];case 2:return e.sent(),[3,5];case 3:return[4,commonUtils.ResUtils.getInstance().addConfig("resource/default.res.json?v="+commonUtils.VersionUtils.getIntance().Version,"resource/")];case 4:e.sent(),e.label=5;case 5:return[4,commonUtils.ResUtils.getInstance().loadConfig(this.loadConfigFelish,this)];case 6:return e.sent(),[2]}})})},t.prototype.loadConfigFelish=function(){return __awaiter(this,void 0,void 0,function(){var e,t,n,a,i,o;return __generator(this,function(s){switch(s.label){case 0:return[4,viewTools.RESTools.loadTheme("default")];case 1:return e=s.sent(),[4,viewTools.RESTools.loadTheme("game_pet")];case 2:return t=s.sent(),[4,viewTools.RESTools.loadTheme("ant_farm")];case 3:return n=s.sent(),[4,viewTools.RESTools.loadTheme("ant_grp")];case 4:return a=s.sent(),[4,viewTools.RESTools.loadTheme("ant_run")];case 5:return i=s.sent(),o=this,e&&t&&n&&i&&a&&commonUtils.ResUtils.getInstance().loadGroupByGrpArr(["preload",game.GameDatas.gameLoadingViewRes],null,this.runGame,this),[2]}})})},t.prototype.loadTheme=function(e){return void 0===e&&(e="default"),__awaiter(this,void 0,void 0,function(){var t,n=this;return __generator(this,function(a){return t=this,[2,new Promise(function(t){var a;a=egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME?new eui.Theme(romoteUrl+e+".thm.json?v="+commonUtils.VersionUtils.getIntance().Version,commonUtils.StageUtils.getIntance().stage):new eui.Theme("resource/"+e+".thm.json?v="+commonUtils.VersionUtils.getIntance().Version,commonUtils.StageUtils.getIntance().stage),a.addEventListener(eui.UIEvent.COMPLETE,function(){t(!0)},n)})]})})},t.prototype.enterGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.loadingView.proGrp&&!this.loadingView.proGrp.visible&&(this.loadingView.proGrp.visible=!0),game.GameDatas.getIntance().initData(),commonUtils.ResUtils.getInstance().loadGroupByGrpArr([game.GameDatas.panel_common,game.GameDatas.gameMainViewRes,game.GameDatas.gameFont,game.GameDatas.game_changjing,game.GameDatas.panel_left,game.GameDatas.game_caifuhao_view,game.GameDatas.game_animation,game.GameDatas.panel_signIn,game.GameDatas.panel_ass,game.GameDatas.panel_shopgame,game.GameDatas.panel_xiaoxi,game.GameDatas.panel_paihang,game.GameDatas.panel_maimiao,game.GameDatas.panel_erenbang,game.GameDatas.panel_setting,game.GameDatas.panel_haoyou,game.GameDatas.panel_other_active,game.GameDatas.panel_chaoyuejiangli],this.onResourceProgress,this.loadResComplet,this),egret.Capabilities.runtimeType==egret.RuntimeType.WEB&&(document.getElementById("preloading").style.visibility="hidden"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr([game.GameDatas.panel_xinshoumubiao,game.GameDatas.panel_xinjitehui,game.GameDatas.panel_dyjs,game.GameDatas.panel_pingtu,game.GameDatas.panel_fenxiangjinbi,game.GameDatas.game_pet_animation]),[2]})})},t.prototype.loadResComplet=function(){game.GameDatas.getIntance().loadResComplet=!0,this.enterGameView()},t.prototype.enterGameView=function(){game.GameDatas.getIntance().loadResComplet&&game.GameServerMgr.getIntance().isOpen&&game.GameServerMgr.getIntance().isOpen&&game.GameDatas.getIntance().loadResComplet&&(game.GameNetUrlData.isUseNet?egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME?game.GameDatas.getIntance().token&&game.GameRequestMgr.getIntance().User_getUserinfo_C(game.GameDatas.getIntance().token):(console.log("其他平台登陆"),game.GameDatas.getIntance().token&&game.GameRequestMgr.getIntance().User_getUserinfo_C(game.GameDatas.getIntance().token)):baseContent.SceneLayerMgr.getIntance().addScene(game.GameMainView))},t.prototype.onResourceProgress=function(e){this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t}(baseContent.AppContent);__reflect(Main.prototype,"Main");var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelSwapChangePingTuView",e.skinName="PanelSwapChangePingTuViewSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.addEvent(),e.PanelSwapPingTuItemView.isFaQi=!1,this.pieceList.itemRenderer=e.PanelSwapPingTuItemView,this.pieceList.itemRendererSkinName="PanelSwapPingTuItemViewSkin",this.initShow()},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return e=this,e.dataInfoListArr||(e.dataInfoListArr=new eui.ArrayCollection),e.pieceList.dataProvider=e.dataInfoListArr,this.showPiceList(),[2]})})},n.prototype.showPiceList=function(){var e=this;e.dataInfoListArr.removeAll();for(var t=[{type:1,num:1},{type:2,num:0},{type:3,num:0},{type:4,num:1},{type:5,num:0},{type:6,num:0},{type:7,num:1},{type:8,num:0},{type:9,num:0}],n=0,a=t.length;a>n;n++)e.dataInfoListArr.addItem(t[n]);e.dataInfoListArr.refresh()},n.prototype.addEvent=function(){this.clickG.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(e){var t=this;switch(e.target){case t.clickG:var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatFaQiJiaoHuan");n.swapChanglistView.visible=!1}},n.prototype.removeEvent=function(){},n}(eui.Component);e.PanelSwapChangePingTuView=t,__reflect(t.prototype,"game.PanelSwapChangePingTuView")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="PanelSwapPingTuItemViewSkin",e.touchEnabled=!0,e.touchChildren=!1,e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.dataChanged=function(){this.showdata_=this.data,this.initShow(this.data)},n.prototype.initShow=function(e){e&&(n.isFaQi?(0==this.showdata_.num?this.icon_guang.source="panel_pingtu_img_"+this.showdata_.type+"_0_png":this.icon_guang.source="panel_pingtu_img_"+this.showdata_.type+"_1_png",this.numShow.text=""+this.showdata_.num,this.numShow.visible=this.iconNum.visible=!0):(this.icon_guang.source="panel_pingtu_img_"+this.showdata_.type+"_1_png",this.numShow.visible=this.iconNum.visible=!1))},n.prototype.init=function(){this.addEvent()},n.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.showGuangView=function(e){console.log("亮暗效果-->"+e)},n.prototype.touchHandle=function(){if(console.log(this.showdata_.type),n.isFaQi){var t=void 0,a=void 0,i=void 0;t=n.friendInfo.friend_info.id,a=n.friendInfo.friend_info.user_name,i=n.friendInfo.friend_info.avatar;var o=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatShiLiaoXiangQingView");if(o.hideSwapBtn(),e.GameDatas.getIntance().swapChangInfo={me_name:e.GameDatas.getIntance().user_info.user_name,me_avatar:e.GameDatas.getIntance().user_info.avatar,me_propImg:this.icon_guang.source,me_propType:this.showdata_.type,friend_id:t,friend_name:a,friend_avatar:i,swapChangFrom:1},0==this.showdata_.num)viewTool.TipsUtil.getIntance().showTip("此碎片数量为零，无法交换");else{var s=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatFaQiJiaoHuan");s&&s.initShow(e.GameDatas.getIntance().swapChangInfo),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelChatFaQiJiaoHuan,e.GameDatas.getIntance().swapChangInfo)}}else{n.isFaQi=!0;var r=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatFaQiJiaoHuan");r.needItemImg(this.showdata_.type)}},n.prototype.showType=function(e){},n}(eui.ItemRenderer);e.PanelSwapPingTuItemView=t,__reflect(t.prototype,"game.PanelSwapPingTuItemView")}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelSwapPingTuView",n.friendData=e,n.skinName="PanelSwapPingTuViewSkin",n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType,this.init)},n.prototype.init=function(){this.addEvent(),e.PanelSwapPingTuItemView.isFaQi=!0,this.pieceList.itemRenderer=e.PanelSwapPingTuItemView,this.pieceList.itemRendererSkinName="PanelSwapPingTuItemViewSkin",this.initShow(e.GameDatas.getIntance().swapListInfo,this.friendData)},n.prototype.initShow=function(t,n){return __awaiter(this,void 0,void 0,function(){var a=this;return __generator(this,function(i){return new Promise(function(i){e.PanelSwapPingTuItemView.friendInfo=n;var o=t;if(o)for(var s=0,r=o.length;r>s;s++)if(1==o[s].prop_type&&o){var c=a;c.dataInfoListArr||(c.dataInfoListArr=new eui.ArrayCollection),c.pieceList.dataProvider=c.dataInfoListArr,c.showPiceList(o[s])}}),[2]})})},n.prototype.showPiceList=function(e){var t=this;t.dataInfoListArr.removeAll();for(var n=0,a=e.owned.length;a>n;n++)t.dataInfoListArr.addItem(e.owned[n]);t.dataInfoListArr.refresh()},n.prototype.addEvent=function(){this.clickG.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(e){var t=this;switch(e.target){case t.clickG:var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelChatShiLiaoXiangQingView");n.closeSwapList()}},n.prototype.removeEvent=function(){},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n}(baseContent.BasePanel);e.PanelSwapPingTuView=t,__reflect(t.prototype,"game.PanelSwapPingTuView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelDyjs",e.skinName="PanelDyjsSkin",e}return __extends(n,t),n.prototype.init=function(){var t=this;t.showGrpList.touchEnabled=!1,t.showGrpList.touchChildren=!0,t.showGrpList.cacheAsBitmap=!0,t.showGrpList.itemRenderer=e.PanelDyjsItemRow,t.showGrpList.itemRendererSkinName="PanelDyjsItemRowSkin",t.dataArr||(t.dataArr=new eui.ArrayCollection,t.showGrpList.dataProvider=t.dataArr),t.initShow()},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=this,new Promise(function(n){e.GameDatas.getIntance().user_info&&(t.showNumberMiNi.text=e.GameDatas.getIntance().user_info.mini_shield_num+"",t.showNumber.text=e.GameDatas.getIntance().user_info.mini_shield_num+"");var a=e.GameDatas.getIntance().pasture_;if(a&&t.showData!=JSON.stringify(a)+e.GameDatas.getIntance().user_info.barley_num){t.showData=JSON.stringify(a)+e.GameDatas.getIntance().user_info.barley_num,t.taoDunGrp.visible=!1;for(var i=e.GameDatas.getIntance().getSomeOnePastureInfo(e.GameDatas.getIntance().user_info.pasture_id),o=1,s=6;s>o;o++){var r={type:o-1,isPro:!1,infos:{}},c=!1;1==a.buildings["build"+o].condition&&(c=!0);for(var l=new eui.ArrayCollection,g=0;5>g;g++){var h={type:o-1,isBuild:!1,needNum:0,isCanBuild:!1,leavl:g+1,isCurren:!1,isNeedRep:c},u=parseInt(i["build"+o][g]);c?(g<a.buildings["build"+o].level-1?h.isBuild=!0:g==a.buildings["build"+o].level-1?(e.GameDatas.getIntance().user_info.barley_num-u/2>-1&&(h.isCanBuild=!0),h.isCurren=!0,h.needNum=u/2):(h.isCanBuild=!1,h.needNum=u),l.addItem(h),h=null):(g<a.buildings["build"+o].level?h.isBuild=!0:g==a.buildings["build"+o].level?(e.GameDatas.getIntance().user_info.barley_num-u>-1&&(h.isCanBuild=!0),h.isCurren=!0,h.needNum=u):(h.isCanBuild=!1,h.needNum=u),l.addItem(h),h=null)}a.buildings["build"+o].mini_shield>0&&(r.isPro=!0),r.infos=l,t.dataArr||(t.dataArr=new eui.ArrayCollection,t.showGrpList.dataProvider=t.dataArr),5==t.dataArr.length&&t.dataArr.getItemAt(o-1)!=r?t.dataArr.replaceItemAt(r,o-1):t.dataArr.addItem(r),l=null}}}),[2]})})},n.prototype.enable=function(){t.prototype.enable.call(this),this.initShow(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType),platform.triggerGC(),e.GameDatas.getIntance().is_new_user&&(e.NewControlViewMgr.getIntance().currentStepType==e.StepType.constructionSomebuilding-1?commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.constructionSomebuilding):e.NewControlViewMgr.getIntance().currentStepType==e.StepType.constructionOne-1&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.newConstrolEvent,e.StepType.constructionOne))},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.hudunbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.closeGrpTaoDun.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this);for(var e=0,t=this.showTaoGrp.numChildren;t>e;e++)this.showTaoGrp.getChildAt(e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.showMiNiDun=function(){var t=this;t.taoDunGrp.cacheAsBitmap=!1;for(var n="panel_dyjs_content_json.",a=0,i=5;i>a;a++){var o=t.showTaoGrp.getChildAt(a);if(o.name="icon_"+a,1!=e.GameDatas.getIntance().pasture_.buildings["build"+(a+1)].mini_shield)switch(a){case 0:o.source=n+"panel_daoyujianshe_shan_icon1_png";break;case 1:o.source=n+"panel_daoyujianshe_che_icon1_png";break;case 2:o.source=n+"panel_daoyujianshe_pet1_png";break;case 3:o.source=n+"panel_daoyujianshe_jianzu_icon1_png";break;case 4:o.source=n+"panel_daoyujianshe_renwu_icon1_png"}else switch(o.name+="_yesHudun",a){case 0:o.source=n+"panel_daoyujianshe_shanhudun_icon_png";break;case 1:o.source=n+"panel_daoyujianshe_chehudun_icon_png";break;case 2:o.source=n+"panel_daoyujianshe_pethudun_png";break;case 3:o.source=n+"panel_daoyujianshe_jianzuhudun_icon_png";break;case 4:o.source=n+"panel_daoyujianshe_renwudun_icon_png"}}t.taoDunGrp.cacheAsBitmap=!0,t.taoDunGrp.visible=!0},n.prototype.closeShowMiNiDun=function(){this.taoDunGrp.visible=!1},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUs();break;case this.hudunbtn:e.GameDatas.getIntance().user_info&&e.GameDatas.getIntance().user_info.mini_shield_num>0?this.showMiNiDun():baseContent.PanelManager.getIntance().openTypeIntance(e.PanelDyjsByeSome);break;case this.closeGrpTaoDun:this.closeShowMiNiDun()}if(t.target.name.indexOf("icon_")>-1){if(t.target.name.indexOf("_yesHudun")>-1)return void viewTool.TipsUtil.getIntance().showTip("该建筑已有护盾");var n=t.target.name,a=this.showTaoGrp.getChildIndex(t.target);console.log("套上某个-->"+a);var i=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelYouQingTiShiView");i?(i.iconType=n,i.index_=a):i=new e.PanelYouQingTiShiView(n,a),baseContent.PanelManager.getIntance().openPanelInstance(i)}},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.hudunbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.closeGrpTaoDun.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this);for(var e=0,t=this.showTaoGrp.numChildren;t>e;e++)this.showTaoGrp.getChildAt(e).removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.closeBtn.destroy()},n}(baseContent.BasePanel);e.PanelDyjs=t,__reflect(t.prototype,"game.PanelDyjs",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.num_=1,e.perNum_=1,e.className_key="PanelDyjsByeSome",e.skinName="PanelDyjsByeSomeSkin",e}return __extends(n,t),n.prototype.init=function(){this.initShow()},n.prototype.initShow=function(){this.perNum_=e.GameDatas.getIntance().pasture_.mini_shield_price,this.showNumber.text=this.num_+"",this.buyNum.text=this.num_*this.perNum_+""},n.prototype.enable=function(){t.prototype.enable.call(this),this.perNum_=e.GameDatas.getIntance().pasture_.mini_shield_price,this.num_=1,this.showNumber.text=this.num_+"",this.buyNum.text=this.num_*this.perNum_+"",this.decBtn.source="panel_dyjs_content_json.panel_daojujianshe_bye_btn_jianhao_png",t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.decBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.buyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUs();break;case this.addBtn:if(this.num_++,this.num_>99)return void(this.num_=99);99==this.num_?this.addBtn.source="panel_dyjs_content_json.panel_daojujianshe_bye_btn_jiahao1_png":this.addBtn.source="panel_dyjs_content_json.panel_daojujianshe_bye_btn_jiahao_png",this.showNumber.text=this.num_+"",this.buyNum.text=this.num_*this.perNum_+"",this.num_>1&&(this.decBtn.source="panel_daojujianshe_bye_btn_jianhao1_png");break;case this.decBtn:this.num_--,this.num_<=1&&(this.num_=1,this.decBtn.source="panel_dyjs_content_json.panel_daojujianshe_bye_btn_jianhao_png"),this.num_<99&&(this.addBtn.source="panel_dyjs_content_json.panel_daojujianshe_bye_btn_jiahao_png"),this.showNumber.text=this.num_+"",this.buyNum.text=this.num_*this.perNum_+"";break;case this.buyBtn:e.GameNetUrlData.isUseNet&&e.GameRequestMgr.getIntance().Shop_buyShield_C(this.num_),this.removeUs()}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.decBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.buyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.closeBtn.destroy()},n}(baseContent.BasePanel);e.PanelDyjsByeSome=t,__reflect(t.prototype,"game.PanelDyjsByeSome",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="PanelDyjsItemColSkin",e.visible=!1,e.touchEnabled=!0,e.touchChildren=!0,e.once(egret.Event.ADDED_TO_STAGE,function(){e.cacheAsBitmap=!0},e),e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.dataChanged=function(){this.data&&(this.showData=this.data,this.initShow().then())},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=this,new Promise(function(n){t.visible=!1,t.cacheAsBitmap=!1,t.showData.isBuild?(t.showNumber.visible=t.isNeedRep.visible=!1,t.showYesIcon.visible=!0):(t.showNumber.visible=!0,t.showYesIcon.visible=!1,t.showData.isCurren?(t.isNeedRep.visible=t.showData.isNeedRep,t.showData.isNeedRep?t.showNumber.text=Math.floor(t.showData.needNum)+"":t.showNumber.text=t.showData.needNum+"",t.showData.isCanBuild?t.showNumber.textColor=15378960:t.showNumber.textColor=14684680,t.addEvent()):(t.isNeedRep.visible=!1,t.showNumber.textColor=5845252,t.showNumber.text=t.showData.needNum+""));var a="panel_daoyujianshe_";switch(a+=e.GameDatas.getIntance().getSomeOneLandDataById(e.GameDatas.getIntance().user_info.pasture_id).nameStr+"_",t.showData.type){case 0:a+="shan";break;case 1:a+="car";break;case 2:a+="huli";break;case 3:a+="jianzhu";break;case 4:a+="meinv"}a+=t.showData.leavl,a+=t.showData.isBuild||t.showData.isCurren?"_a":"_b",a+="_png",viewTools.RESTools.setImgRes(t.showIcon,a),t.showData&&t.showData.isCurren?(t.touchEnabled=!0,t.touchChildren=!1):t.touchEnabled=t.touchChildren=!1,t.visible=!0,t.cacheAsBitmap=!0}),[2]})})},n.prototype.touchHandle=function(t){e.GameNetUrlData.isUseNet&&(commonUtils.EventMananger.getIntance().sendEvent(commonUtils.GlobalEvent.ClickButton),baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelDyjs").removeUs(),e.GameRequestMgr.getIntance().Pasture_building_C(this.showData.type))},n.prototype.init=function(){this.isNeedRep.visible=!1},n.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.removeEvent=function(){this.showData&&this.showData.isCurren&&this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n}(eui.ItemRenderer);e.PanelDyjsItemCol=t,__reflect(t.prototype,"game.PanelDyjsItemCol")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="PanelDyjsItemRowSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()
},n.prototype.dataChanged=function(){t.prototype.dataChanged.call(this);var e=this;if(e.data)if(e.showData=e.data,e.showIcon(),e.showGrpListData||(e.showGrpListData=new eui.ArrayCollection,e.showGrpList.dataProvider=e.showGrpListData),e.showGrpListData.length==e.showData.infos.length)for(var n=0,a=e.showData.infos.length;a>n;n++){var i=e.showData.infos.getItemAt(n);JSON.stringify(e.showGrpListData.getItemAt(n))!=JSON.stringify(i)&&e.showGrpListData.replaceItemAt(i,n)}else for(var n=0,a=e.showData.infos.length;a>n;n++)e.showGrpListData.addItem(e.showData.infos.getItemAt(n))},n.prototype.showIcon=function(){var e=this;if(e.showData.isPro)switch(e.showData.type){case 0:e.iconType.source="panel_dyjs_content_json.panel_daoyujianshe_shanhudun_icon_png";break;case 1:e.iconType.source="panel_dyjs_content_json.panel_daoyujianshe_chehudun_icon_png";break;case 2:e.iconType.source="panel_dyjs_content_json.panel_daoyujianshe_pethudun_png";break;case 3:e.iconType.source="panel_dyjs_content_json.panel_daoyujianshe_jianzuhudun_icon_png";break;case 4:e.iconType.source="panel_dyjs_content_json.panel_daoyujianshe_renwudun_icon_png"}else switch(e.showData.type){case 0:e.iconType.source="panel_dyjs_content_json.panel_daoyujianshe_shan_icon_png";break;case 1:e.iconType.source="panel_dyjs_content_json.panel_daoyujianshe_che_icon_png";break;case 2:e.iconType.source="panel_dyjs_content_json.panel_daoyujianshe_pet_png";break;case 3:e.iconType.source="panel_dyjs_content_json.panel_daoyujianshe_jianzu_icon_png";break;case 4:e.iconType.source="panel_dyjs_content_json.panel_daoyujianshe_renwu_icon_png"}},n.prototype.init=function(){var t=this;t.showGrpList.touchEnabled=!1,t.showGrpList.touchChildren=!0,t.showGrpList.itemRenderer=e.PanelDyjsItemCol,t.showGrpList.itemRendererSkinName="PanelDyjsItemColSkin",t.showGrpListData||(t.showGrpListData=new eui.ArrayCollection,t.showGrpList.dataProvider=t.showGrpListData)},n}(eui.ItemRenderer);e.PanelDyjsItemRow=t,__reflect(t.prototype,"game.PanelDyjsItemRow")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelErenBangView",e.skinName="PanelErenBangViewSkin",e}return __extends(n,t),n.prototype.init=function(){},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=this,t.onShowAnimation?[2]:(new Promise(function(n){if(t.showNum.text=e.GameDatas.getIntance().user_info.wanted_token_num+"",e.GameDatas.getIntance().erenBangList_&&e.GameDatas.getIntance().erenBangList_.enemy.length>0){var a=e.GameDatas.getIntance().erenBangList_.enemy;if(t.listGrp.numChildren!=a.length){t.listGrp.removeChildren();for(var i=0,o=a.length;o>i;i++){var s=new e.PanelErenBangViewItem(a[i]);t.listGrp.addChild(s)}}else for(var i=0,o=a.length;o>i;i++){var s=t.listGrp.getChildAt(i);s.initShow(a[i])}t.nullGrp.visible=!1,t.xiaoXi.visible=!0}else t.nullGrp.visible=!0,t.xiaoXi.visible=!1}),[2])})})},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.downType,this.initShow)},n.prototype.addEvent=function(){this.closeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.byBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeImg:this.removeUs();break;case this.byBtn:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelTongJiView)}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.downType)},n.prototype.removeEvent=function(){this.closeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.byBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.byBtn.destroy(),this.byBtn=null},n}(baseContent.BasePanel);e.PanelErenBangView=t,__reflect(t.prototype,"game.PanelErenBangView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.showData=e,n.width=575,n.height=120,n.skinName="PanelErenBangItemViewSkin",n.once(egret.Event.ADDED_TO_STAGE,n.cacheBitMapView,n),n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.cacheBitMapView=function(){this.cacheAsBitmap=!0},n.prototype.init=function(){this.showImg.mask=this.showImgMask,this.initShow(),this.addEvent()},n.prototype.initShow=function(e){void 0===e&&(e=null);var t=this;e&&(t.showData=e),t.showData&&(t.showData.avatar&&t.showData.avatar.length>0?commonUtils.ImageTools.loadImage(t.showData.avatar,function(e){t.showImg.source=e},t):viewTools.RESTools.setImgRes(t.showImg,"game_main_view_tex_json.game_main_view_default_headimg_jpg"),t.nickName.text=commonUtils.StringTool.formatStrLen(t.showData.user_name),t.startNum.text=t.showData.star_num+"",t.attNum.text=t.showData.be_attacks_times+"",1==t.showData.is_wanted?(t.sendBtn.enabled=t.sendBtn.textImg.visible=!1,t.lastTime.visible=!0,t.showTimeView(Math.floor(commonUtils.TimeUtil.getSomeTimeOfLastTimeNum(1e3*t.showData.wanted_end_time)/1e3)),t.showInfo.text="正在通缉中！"):(t.sendBtn.enabled=t.sendBtn.textImg.visible=!0,t.lastTime.visible=!1,t.showInfo.text="还在逍遥法外！"))},n.prototype.showTimeView=function(e){var t=this,n=e;return egret.Tween.removeTweens(this.lastTime),n?void egret.Tween.get(this.lastTime,{loop:!0}).wait(1e3).call(function(){return n--,0>n?void egret.Tween.removeTweens(t.lastTime):void(t.lastTime.text="剩余倒计时:"+commonUtils.NumberTool.getShowTimeTwo(n))}):void(this.lastTime.text=n+"")},n.prototype.enable=function(){},n.prototype.addEvent=function(){this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.sendBtn:e.GameRequestMgr.getIntance().Enemy_asWanted_C(this.showData.id)}},n.prototype.removeEvent=function(){this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n}(eui.Component);e.PanelErenBangViewItem=t,__reflect(t.prototype,"game.PanelErenBangViewItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelTongJiView",e.skinName="PanelTongJiViewSkin",e}return __extends(n,t),n.prototype.init=function(){this.labelTwo.text=e.GameDatas.getIntance().erenBangList_.wanted_token_price+""},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.grpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUs();break;case this.grpBtn:console.log("购买通缉令"),e.GameNetUrlData.isUseNet&&e.GameRequestMgr.getIntance().Shop_buyWantedToken_C(1)}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.grpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.closeBtn.destroy(),this.closeBtn=null,this.grpBtn.destroy(),this.grpBtn=null},n}(baseContent.BasePanel);e.PanelTongJiView=t,__reflect(t.prototype,"game.PanelTongJiView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelFengxiangjinbi",n._config=e,n.skinName="PanelFengxiangjinbiSkin",n}return __extends(n,t),n.prototype.init=function(){var e=[];e=[{text:"分享到",style:{bold:!0,textColor:"0xffffff"}},{text:"微信群，",style:{bold:!0,textColor:"0xF3D717"}},{text:"立即获得",style:{bold:!0,textColor:"0xffffff"}}],this.titleText.textFlow=e;var t=this;t.showSome()},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.showSome=function(){var e=this;switch(e._config.multiple){case 5:e.beishushouyi.text="5倍收益",e.beishuyinying.source="panel_fenxiangjinbi_wubeishouyi_png";break;case 15:e.beishushouyi.text="15倍收益",e.beishuyinying.source="panel_fenxiangjinbi_shiwubeishouyi_png"}},n.prototype.addEvent=function(){this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.touchHandle=function(t){var n=this;switch(t.target){case n.closeBtn:n.destroy(),e.GameDatas.getIntance().openGiftShow();break;case n.sendBtn:e.GameRequestMgr.getIntance().Share_sharedSuccess_C("extra_barley",n._config.id),e.WXTools.setShareQunShare("要不要过来跟我们一起沐浴阳光？",romoteUrlHead+"/game/romote/shareimg/share_img_3.jpg",function(t){console.log(t);var a=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelFengxiangjinbi");a&&a.destroy(),e.GameRequestMgr.getIntance().Share_sharedSuccess_C("extra_barley",n._config.id)},function(e){console.log(e),viewTool.TipsUtil.getIntance().showTip("分享到群里才有效哦！")},platform)}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent()},n}(baseContent.BasePanel);e.PanelFengxiangjinbi=t,__reflect(t.prototype,"game.PanelFengxiangjinbi",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="GameShop",e.skinName="GameShopSkin",e}return __extends(n,t),n.prototype.init=function(){this.showGrpList.itemRenderer=e.GameShopItem,this.showGrpList.itemRendererSkinName="GameShopItemSkin"},n.prototype.cacheBitMapView=function(){t.prototype.cacheBitMapView.call(this),this.topGrp.cacheAsBitmap=!0},n.prototype.enable=function(){t.prototype.enable.call(this),e.GameRequestMgr.getIntance().Shop_getShopInfo_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.nengliangbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.jinbibtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.daojubtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.zuanshibtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(e){switch(e.target){case this.closeBtn:this.removeUs();break;case this.nengliangbtn:case this.jinbibtn:case this.daojubtn:case this.zuanshibtn:this.changeListItem()}},n.prototype.changeListItem=function(){for(var e=0,t=0,n=this.topGrp.numChildren;n>t;t++){var a=this.topGrp.getChildAt(t);if(1==a.selected){e=t;break}}console.log(e),this.listArr&&(this.showGrpList.dataProvider=this.listArr[e])},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=this,t.showData=e.GameDatas.getIntance().commodity_list,t.showData?(new Promise(function(e){t.listArr=[new eui.ArrayCollection,new eui.ArrayCollection,new eui.ArrayCollection,new eui.ArrayCollection];for(var n=0,a=t.showData.length;a>n;n++)t.listArr[t.showData[n].column-1].addItem({info:t.showData[n],index:t.listArr[t.showData[n].column-1].length,islevel:3==t.showData[n].column?!1:!0});t.changeListItem()}),[2]):[2]})})},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.nengliangbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.jinbibtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.daojubtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.zuanshibtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.closeBtn.destroy()},n}(baseContent.BasePanel);e.GameShop=t,__reflect(t.prototype,"game.GameShop",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="GameShopItemSkin",e}return __extends(n,t),n.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.config=this.data,this.init()},n.prototype.init=function(){if(this.config){var t=this.config.info;switch(this.textOne.text=t.num+"",this.textTwo.text="拥有"+t.remaining+"个",4==t.type?(this.dIcon.visible=this.labelTwo.visible=!1,this.labelOne.visible=!0):(this.dIcon.visible=this.labelTwo.visible=!0,this.labelOne.visible=!1),this.config.islevel?this.iconImg.source=e.GameDatas.getIntance().getSomeOneIconStrByType(t.type,!1,this.config.index+1):this.iconImg.source=e.GameDatas.getIntance().getSomeOneIconStrByType(t.type),this.labelTwo.text=t.prices+"",this.labelOne.text="¥"+t.prices,t.type){case 1:case 2:case 3:case 4:this.textOne.visible=!0,this.textTwo.visible=!1;break;default:this.textOne.text=e.GameDatas.getIntance().getSomeOneTitleStrByType(t.type),this.textTwo.visible=!0}}this.grpBtn.touchEnabled=!0,this.grpBtn.touchChildren=!1,this.addEvent()},n.prototype.addEvent=function(){this.grpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(console.log("touchHanle"),t.target){case this.grpBtn:var n=this.config.info;console.log("configBtn-->"+n.id),e.GameNetUrlData.isUseNet&&("2"==n.money_type?viewTool.TipsUtil.getIntance().showTip("付款"):e.GameRequestMgr.getIntance().Shop_buyCommodity_C(n.id))}},n}(eui.ItemRenderer);e.GameShopItem=t,__reflect(t.prototype,"game.GameShopItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelHaoYouAddView",e.skinName="PanelHaoYouAddViewSkin",e}return __extends(n,t),n.prototype.init=function(){this.initShow()},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=this,new Promise(function(n){e.GameDatas.getIntance().user_info&&(t.idShow.text="复制我的ID："+e.GameDatas.getIntance().user_info.id,t.idGrp.width=(7+(e.GameDatas.getIntance().user_info.id+"").length/2)*t.idShow.size);var a=e.GameDatas.getIntance().friendMsgList;if(a){if(t.msgListGrp.cacheAsBitmap=!1,t.msgListGrp.numChildren!=a.length){t.msgListGrp.removeChildren();for(var i=0,o=a.length;o>i;i++){var s=new e.PanelHaoYouAddViewItem(a[i]);t.msgListGrp.addChild(s)}}else for(var i=0,o=a.length;o>i;i++){var s=t.msgListGrp.getChildAt(i);s.initShow(a[i])}t.msgListGrp.cacheAsBitmap=!0}a&&a.length>0?(t.listMsgScr.visible=!0,t.nullGrp.visible=!1,t.allNoBtn.visible=!0,t.allYesBtn.visible=!0):(t.listMsgScr.visible=!1,t.nullGrp.visible=!0,t.allNoBtn.visible=!1,t.allYesBtn.visible=!1)}),[2]})})},n.prototype.enable=function(){t.prototype.enable.call(this),this.uidStr.text="",e.GameRequestMgr.getIntance().User_getApplyMessage_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.downType)},n.prototype.addEvent=function(){this.allYesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.allNoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.closeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.idGrp.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){var n=this;switch(t.target){case n.allYesBtn:e.GameRequestMgr.getIntance().User_doApplyMessage_C(null,"1"),n.listMsgScr.visible=!1,n.nullGrp.visible=!0,n.allNoBtn.visible=!1,n.allYesBtn.visible=!1;break;case n.allNoBtn:e.GameRequestMgr.getIntance().User_doApplyMessage_C(null,"2"),n.listMsgScr.visible=!1,n.nullGrp.visible=!0,n.allNoBtn.visible=!1,n.allYesBtn.visible=!1;break;case n.closeImg:n.removeUs();break;case n.addBtn:var a=n.uidStr.text.trim();if(!a||0==a.length){viewTool.TipsUtil.getIntance().showTip("请输入用户ID");break}if(a==e.GameDatas.getIntance().user_info.id+""){viewTool.TipsUtil.getIntance().showTip("不可添加自己哟！");break}e.GameRequestMgr.getIntance().User_searchUser_C(parseInt(a));break;case n.idGrp:commonUtils.StringTool.copySome(e.GameDatas.getIntance().user_info.id+"",function(){viewTool.TipsUtil.getIntance().showTip("复制成功！")},platform)}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.downType)},n.prototype.removeEvent=function(){this.allYesBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.allNoBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.closeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.idGrp.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelHaoYouAddView=t,__reflect(t.prototype,"game.PanelHaoYouAddView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.msgInfo=e,n.skinName="PanelHaoYouAddViewItemSkin",n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.initShow(this.msgInfo),this.addEvent()},n.prototype.initShow=function(e){e&&(this.userName.text=e.user_name+"",e.content&&e.content.length>0?this.infoDoc.text="信息："+e.content:this.infoDoc.text="",this.starNum.text=""+e.star_num,this.yesBtn.visible=this.noBtn.visible=!0,"1"==e.sex?this.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_boy_png":this.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_girl_png",this.head.setHEHead(e.avatar))},n.prototype.enable=function(){},n.prototype.addEvent=function(){this.noBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.yesBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.noBtn:e.GameNetUrlData.isUseNet&&e.GameRequestMgr.getIntance().User_doApplyMessage_C(this.msgInfo.id,"2"),this.yesBtn.visible=this.noBtn.visible=!1;break;case this.yesBtn:e.GameNetUrlData.isUseNet&&e.GameRequestMgr.getIntance().User_doApplyMessage_C(this.msgInfo.id,"1"),this.yesBtn.visible=this.noBtn.visible=!1}},n.prototype.removeEvent=function(){},n.prototype.destroy=function(){},n}(eui.Component);e.PanelHaoYouAddViewItem=t,__reflect(t.prototype,"game.PanelHaoYouAddViewItem")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.className_key="PanelHaoYouShanChuView",t.skinName="PanelHaoYouShanChuViewSkin",t}return __extends(t,e),t.prototype.init=function(){this.addEvent()},t.prototype.enable=function(){e.prototype.enable.call(this),e.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},t.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},t.prototype.touchHanle=function(e){switch(e.target){case this.closeBtn:this.removeUs()}},t.prototype.removeUs=function(){e.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},t.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},t.prototype.destroy=function(){e.prototype.destroy.call(this),this.closeBtn.destroy()},t}(baseContent.BasePanel);e.PanelHaoYouShanChuView=t,__reflect(t.prototype,"game.PanelHaoYouShanChuView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelHaoYouView",e.skinName="PanelHaoYouViewSkin",e}return __extends(n,t),n.prototype.init=function(){},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(a){return t=e.GameDatas.getIntance().friendList,n=this,n.onShowAnimation?[2]:(t&&t.length>0?new Promise(function(a){n.nullGrp.visible=!1,n.listG.visible=!0;var i=!1,o=0;if(t.length!=n.listG.numChildren){n.listG.removeChildren();for(var s=0,r=t.length;r>s;s++){var c=new e.PanelHaoYouViewItem(t[s]);n.listG.addChild(c),!i&&(t[s].can_give_energy||t[s].be_given_energy&&!t[s].aready_get_energy)&&(i=!0),o+=t[s].aready_get_num}}else for(var s=0,r=t.length;r>s;s++){var c=n.listG.getChildAt(s);c.initShowData(t[s]),c.initShow(),!i&&(t[s].can_give_energy||t[s].be_given_energy&&!t[s].aready_get_energy)&&(i=!0),o+=t[s].aready_get_num}n.showLinQuBtn.visible=n.showLinQuBtn.enabled=i,n.showAllText.text="今日已领取："+o+"/50"}):(n.nullGrp.visible=!0,n.showLinQuBtn.visible=n.listG.visible=!1),[2])})})},n.prototype.enable=function(){t.prototype.enable.call(this),e.GameRequestMgr.getIntance().User_lookFriends_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.downType,this.initShow)},n.prototype.addEvent=function(){this.closeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.addBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.addFriend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.showLinQuBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeImg:this.removeUs();break;case this.addBtn:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelYaoQingJiangLiView);break;case this.addFriend:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelHaoYouAddView);break;case this.showLinQuBtn:e.GameRequestMgr.getIntance().User_energy_C()}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.closeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.addBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.addFriend.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.showLinQuBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.addBtn.destroy(),this.addBtn=null,this.addFriend.destroy(),this.addFriend=null,this.showLinQuBtn.destroy(),this.showLinQuBtn=null},n}(baseContent.BasePanel);e.PanelHaoYouView=t,__reflect(t.prototype,"game.PanelHaoYouView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.friendData=e,n.skinName="PanelHaoYouViewItemSkin",n.addEventListener(egret.Event.ADDED_TO_STAGE,n.enable,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.destroy,n),n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init(),this.clickG.touchChildren=!1},n.prototype.init=function(){this.initShow()},n.prototype.touchHanle=function(t){var n=this;switch(t.target){case n.getEnergyImg:viewTool.TipsUtil.getIntance().showTip("领取成功！"),e.GameRequestMgr.getIntance().User_energy_C(1,n.friendData.fid),n.getEnergyImg.touchEnabled=!1,n.getEnergyImg.source="panel_haoyou_tex_json.panel_nenglianglingqu_nengliang_btn_png";break;case n.giveEnergyImg:viewTool.TipsUtil.getIntance().showTip("赠送成功！"),e.GameRequestMgr.getIntance().User_energy_C(2,n.friendData.fid),n.giveEnergyImg.visible=!1}},n.prototype.initShowData=function(e){void 0===e&&(e=null),e&&(this.friendData=e)},n.prototype.initShow=function(){var e=this;e.friendData&&(e.head.setHEHead(e.friendData.avatar),e.nickName.text=commonUtils.StringTool.getShortStrAtByte(e.friendData.user_name+"",24),e.startNum.text=e.friendData.star_num+"","1"==e.friendData.sex?e.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_boy_png":e.sexImg.source="panel_haoyou_tex_json.panel_haoyou_icon_girl_png",e.friendData.be_given_energy?(e.getEnergyImg.visible=!0,e.friendData.aready_get_energy?(e.getEnergyImg.touchEnabled=!1,e.getEnergyImg.source="panel_haoyou_tex_json.panel_nenglianglingqu_nengliangyilingqu_btn_png",e.friendData.can_give_energy?(e.giveEnergyImg.visible=!0,e.getEnergyImg.visible=!1):e.giveEnergyImg.visible=!1):(e.getEnergyImg.touchEnabled=!0,e.giveEnergyImg.visible=!1,e.getEnergyImg.source="panel_haoyou_tex_json.panel_nenglianglingqu_nengliang_btn_png")):(e.getEnergyImg.visible=!1,e.friendData.can_give_energy?e.giveEnergyImg.visible=!0:(e.giveEnergyImg.visible=!0,e.giveEnergyImg.source="panel_chat_json.panel_nenglianglingqu_yizengsong_btn_png",e.giveEnergyImg.touchEnabled=!1)))},n.prototype.enable=function(){this.addEvent()},n.prototype.addEvent=function(){this.getEnergyImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.giveEnergyImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.clickG.addEventListener(egret.TouchEvent.TOUCH_TAP,this.click_grpShowInfo,this)},n.prototype["delete"]=function(){this.destroy(),this.parent.removeChild(this)},n.prototype.removeEvent=function(){this.getEnergyImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.giveEnergyImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.click_grpShowInfo=function(){var t=new e.PanelChatHaoYouXiangQingView(this.friendData),n=new egret.Point;n=this.parent.localToGlobal(this.x,this.y,n),t.setLocal({x:100,y:n.y+50}),baseContent.PanelManager.getIntance().openPanelInstance(t)},n.prototype.destroy=function(){this.removeEvent()},n}(eui.Component);e.PanelHaoYouViewItem=t,__reflect(t.prototype,"game.PanelHaoYouViewItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelHaoYouYanZhengView",n.addUid_=e,n.skinName="PanelHaoYouYanZhengViewSkin",n}return __extends(n,t),n.prototype.init=function(){},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(e){switch(e.target){case this.closeBtn:this.removeUs();break;case this.sendBtn:this.addFriend()}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addFriend=function(){var t=this.infoText.text.trim();e.GameRequestMgr.getIntance().User_addFriend_C(this.addUid_,t),this.removeUs()},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.closeBtn.destroy()},n}(baseContent.BasePanel);e.PanelHaoYouYanZhengView=t,__reflect(t.prototype,"game.PanelHaoYouYanZhengView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.className_key="PanelHuiGuiLiBaoView",n.configs=e.GameDatas.getIntance().huiGuiLibaoData_,n.skinName="PanelHuiGuiLiBaoViewSkin",n}return __extends(n,t),n.prototype.init=function(){this.initshow()},n.prototype.initshow=function(){this.user_name_text.text=e.GameDatas.getIntance().user_info.user_name;for(var t=0,n=3;n>t;t++){var a=new e.PanelHuiGuiLiBaoViewItem(this.configs[t]);this.giftGp.addChild(a)}},n.prototype.touchHandle=function(t){switch(t.target){case this.senBtn:e.GameRequestMgr.getIntance().Activity_reciveComeBackGift_C(),this.destroy(),e.GameDatas.getIntance().huiGuiLibaoData_=null}},n.prototype.addEvent=function(){this.senBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.removeEvent=function(){this.senBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelHuiGuiLiBaoView=t,__reflect(t.prototype,"game.PanelHuiGuiLiBaoView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.config_=e,n.skinName="PanelHuiGuiLiBaoViewItemSkin",n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){return this.iconShow.source=e.GameDatas.getIntance().getSomeOneIconStrByType(this.config_.type),this.config_.num>=1e4?void(this.textLabel.text=Math.floor(this.config_.num/1e4)+"W"):void(this.textLabel.text=this.config_.num+"")},n.prototype.addEvent=function(){},n.prototype.removeEvent=function(){},n.prototype.enable=function(){this.enable()},n.prototype.destroy=function(){this.destroy()},n}(eui.Component);e.PanelHuiGuiLiBaoViewItem=t,__reflect(t.prototype,"game.PanelHuiGuiLiBaoViewItem")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e.enterPingTuView="jigsawBtn",e.enterMayiKuiPaoView="antrunBtn",e.jingQingQiDai="jinqiBtn",e}();e.HuoDongtype=t,__reflect(t.prototype,"game.HuoDongtype"),e.GameDatas.getIntance().huodongInfoList=[e.HuoDongtype.enterPingTuView,e.HuoDongtype.enterMayiKuiPaoView,e.HuoDongtype.jingQingQiDai]}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelHuoDongView",e.isCreate=!1,e.skinName="PanelHuoDongViewSkin",e}return __extends(n,t),n.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return e=this,e.isCreate=!0,[2,new Promise(function(t){var n=baseContent.SceneLayerMgr.getIntance().getCurrenScene().rightGrp.getChildByName("huoBtn"),a=new egret.Point;a=n.parent.localToGlobal(n.x,n.y,a),e.container=new egret.DisplayObjectContainer;var i=new egret.Shape;i.graphics.beginFill(0,.55);var o=commonUtils.StageUtils.getIntance().getStageWidth(),s=commonUtils.StageUtils.getIntance().getStageHeight();i.graphics.drawRect(0,0,o,s),i.graphics.endFill(),e.container.addChild(i),e.hightLightShow(n)})]})})},n.prototype.hightLightShow=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=this,[2,new Promise(function(n){t.dp=new egret.Shape,t.dp.blendMode=egret.BlendMode.ERASE,t.dp.graphics.beginFill(0,1);var a=e.width>e.height?e.width/2:e.height/2;t.dp.graphics.drawCircle(e.width/2,e.height/2,a),t.dp.graphics.endFill();var i=new egret.Point;i=e.parent.localToGlobal(e.x,e.y,i),t.dp.x=i.x-e.width/2,t.dp.y=i.y-e.height/2,t.container.addChild(t.dp);var o=new egret.RenderTexture;o.drawToTexture(t.container);var s=new egret.Bitmap;s.texture=o,s.touchEnabled=!1,s.pixelHitTest=!1,t.addChildAt(s,0),t.initShowList()})]})})},n.prototype.initShowList=function(){var t=this;if(t.isCreate)for(var n=0,a=e.GameDatas.getIntance().huodongInfoList.length;a>n;n++){var i=void 0;switch(n<t.listG.numChildren?i=t.listG.getChildAt(n):(i=new e.PanelHuoDongViewItem(e.GameDatas.getIntance().huodongInfoList[n]),t.listG.addChild(i)),e.GameDatas.getIntance().huodongInfoList[n]){case e.HuoDongtype.enterPingTuView:e.GameDatas.getIntance().redSpotInfo&&(i.IsHaveNew=1==e.GameDatas.getIntance().redSpotInfo.huoBtn.jigsawBtn);break;case e.HuoDongtype.enterMayiKuiPaoView:e.GameDatas.getIntance().redSpotInfo&&(i.IsHaveNew=1==e.GameDatas.getIntance().redSpotInfo.huoBtn.antrunBtn),e.GameDatas.getIntance().user_info.in_battle_pet_id?i.InfoText=null:i.InfoText="宠物系统开启后即可体验";
break;case e.HuoDongtype.jingQingQiDai:i.IsHaveNew=!1}}},n.prototype.enable=function(){t.prototype.enable.call(this),this.initShowList(),this.grpCenter.scaleY=0,egret.Tween.get(this.grpCenter).to({scaleY:1},500,egret.Ease.bounceOut),this.rectImg.visible=!1,e.GameSoundMgr.getInstance().playPanelOpen()},n.prototype.addEvent=function(){this.clickG.addEventListener(egret.TouchEvent.TOUCH_TAP,this.removeUs,this)},n.prototype.enterAntRunListView=function(){var t=this;commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!0);var n,a=ant_run.AntRunView.gameIsFirstCompelet;n=a?[e.GameDatas.ant_run]:[e.GameDatas.ant_run,e.GameDatas.newControl],baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr(n,null,function(){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),egret.setTimeout(function(){baseContent.PanelManager.getIntance().openTypeIntance(ant_run.AntRunPetListView),baseContent.PanelManager.getIntance().removeSomeOnePanel("PanelHuoDongView"),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.CloseShowChaoPing,!1),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.CloseShowMainView,!1),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!1)},t,750)},this)},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){},n.prototype.destroy=function(){},n}(baseContent.BasePanel);e.PanelHuoDongView=t,__reflect(t.prototype,"game.PanelHuoDongView",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.infoText=null,n.isHaveNew=!1,n.huoDongType=e,n.skinName="PanelHuoDongViewItemSkin",n}return __extends(n,t),Object.defineProperty(n.prototype,"InfoText",{get:function(){return this.infoText},set:function(e){this.infoText=e,this.unGrp&&(this.unGrp.visible=null!=e,this.info.text=this.infoText)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"IsHaveNew",{get:function(){return this.isHaveNew},set:function(e){this.isHaveNew=e,this.redImg&&(this.redImg.visible=this.isHaveNew)},enumerable:!0,configurable:!0}),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.addEvent(),this.initShow()},n.prototype.initShow=function(){switch(this.redImg.visible=this.isHaveNew,this.infoText?(this.info.text=this.infoText,this.unGrp.visible=!0):this.unGrp.visible=!1,this.huoDongType){case e.HuoDongtype.enterPingTuView:this.currentImg.source="huodong_banner_pingtu_png";break;case e.HuoDongtype.enterMayiKuiPaoView:this.currentImg.source="huodong_banner_petrun_png";break;case e.HuoDongtype.jingQingQiDai:this.currentImg.source="huodong_banner_expect_png"}},n.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(this.huoDongType){case e.HuoDongtype.enterPingTuView:e.GameRequestMgr.getIntance().Jigsaw_getJigsawInfo_C();break;case e.HuoDongtype.enterMayiKuiPaoView:e.GameDatas.getIntance().user_info.in_battle_pet_id&&(commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!0),e.GameRequestMgr.getIntance().AntRun_init_C());break;case e.HuoDongtype.jingQingQiDai:}},n}(eui.Component);e.PanelHuoDongViewItem=t,__reflect(t.prototype,"game.PanelHuoDongViewItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelLeftPanel",e.skinName="PanelLeftPanelSkin",e}return __extends(n,t),n.prototype.cacheBitMapView=function(){t.prototype.cacheBitMapView.call(this),this.btnGrp.cacheAsBitmap=!0,this.titleGrp.cacheAsBitmap=!0},n.prototype.init=function(){if(this.showImg.mask=this.showImgMask,commonUtils.DeviceUtils.getInstance().getIsIPhoneX()&&(this.btnScr.top+=60,this.titleGrp.top+=60),e.GameDatas.getIntance().user_info){var t=e.GameDatas.getIntance().user_info;t.avatar&&t.avatar.length>0&&commonUtils.ImageTools.loadImage(t.avatar,function(e){this.showImg.source=e},this),this.userName.text=e.GameDatas.getIntance().user_info.user_name,this.idShow.text="ID:"+e.GameDatas.getIntance().user_info.id}this.ver.text=commonUtils.VersionUtils.getIntance().Version;var n=[{id:1,title:"地图",icon:"antGame_panel_icon_map",fontT:"antGame_panel_font_map"},{id:2,title:"好友",icon:"antGame_panel_icon_friend",fontT:"antGame_panel_font_friend"},{id:4,title:"排行榜",icon:"antGame_panel_icon_list",fontT:"antGame_panel_font_list"},{id:5,title:"仇人",icon:"antGame_panel_icon_personal",fontT:"antGame_panel_font_personal"},{id:6,title:"消息",icon:"antGame_panel_icon_information",fontT:"antGame_panel_font_information"},{id:7,title:"设置",icon:"antGame_panel_btn_stting",fontT:"antGame_panel_font_stting"}];this.btnGrp.removeChildren();for(var a=0,i=n.length;i>a;a++){var o=new e.PanelLeftPanelItem(n[a]);o.x=-o.width,o.y=a*(o.height+3),o.setAnimation(100*a),o.name=n[a].title,this.btnGrp.addChild(o),o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)}},n.prototype.enable=function(){var n=this;t.prototype.enable.call(this),this.allGrp.left=-this.allGrp.width,egret.Tween.get(this.allGrp).to({left:0},500,egret.Ease.circOut).call(function(){egret.Tween.removeTweens(n.allGrp)}),this.rectImg.touchEnabled=!0,e.GameSoundMgr.playOpenOrCloseLeftPanel(!0)},n.prototype.addEvent=function(){for(var e=0,t=this.btnGrp.numChildren;t>e;e++)this.btnGrp.getChildAt(e).addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this);this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.rectImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.copyBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.closeLeft=function(){var e=this;egret.Tween.get(this.allGrp).to({left:-this.allGrp.width},500,egret.Ease.circOut).call(function(){egret.Tween.removeTweens(e.allGrp),baseContent.SceneLayerMgr.getIntance().getCurrenScene().showLeftBtnCloseOrOpen(!0),t.prototype.removeUsFromParent.call(e)},this)},n.prototype.touchHanle=function(t){var n=this;switch(t.target){case this.closeBtn:case this.rectImg:this.closeLeft(),e.GameSoundMgr.playOpenOrCloseLeftPanel(!0);break;case this.copyBtn:commonUtils.StringTool.copySome(e.GameDatas.getIntance().user_info.id+"",function(){viewTool.TipsUtil.getIntance().showTip("复制成功")},platform)}switch(t.target.name){case"地图":commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.MiwuZheDangEvent,!0),baseContent.BufferLayerMgr.getIntance().addBuffer("game.GameServerLoadingView"),commonUtils.ResUtils.getInstance().loadGroupByGrpArr([e.GameDatas.game_map],null,function(){baseContent.BufferLayerMgr.getIntance().removeBuffer("game.GameServerLoadingView"),egret.setTimeout(function(){baseContent.PanelManager.getIntance().openTypeIntance(e.GameMapView)},n,750)},this);break;case"好友":baseContent.PanelManager.getIntance().openTypeIntance(e.PanelChatView);break;case"消息":e.GameNetUrlData.isUseNet&&e.GameRequestMgr.getIntance().News_getMessage_C(),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelXiaoXiView);break;case"商城":viewTool.TipsUtil.getIntance().showTip("暂未开启");break;case"仇人":e.GameNetUrlData.isUseNet&&e.GameRequestMgr.getIntance().Enemy_getEnemys_C(),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelErenBangView);break;case"设置":baseContent.PanelManager.getIntance().openTypeIntance(e.PanelSettingView);break;case"排行榜":e.GameNetUrlData.isUseNet&&!e.GameDatas.getIntance().rankList&&e.GameRequestMgr.getIntance().User_getRankingList_C(),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelPaiHangBangView)}},n.prototype.removeEvent=function(){for(var e=0,t=this.btnGrp.numChildren;t>e;e++)this.btnGrp.getChildAt(e).removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this);this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.rectImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.copyBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.removeEvent(),this.closeBtn.destroy()},n}(baseContent.BasePanel);e.PanelLeftPanel=t,__reflect(t.prototype,"game.PanelLeftPanel",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(e){function t(t){var n=e.call(this)||this;return n.config_=t,n.width=492,n.height=136,n.touchEnabled=!0,n.touchChildren=!1,n.skinName="PanelLeftPanelItemSkin",n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.config_&&(this.icon.source="panel_left_tex_json."+this.config_.icon+"_png",this.titleImg.source="panel_left_tex_json."+this.config_.fontT+"_png"),this.bgImg.visible=!1,this.addEvent()},t.prototype.setAnimation=function(e){this.waitTime=e},t.prototype.showAnimation=function(){var e=this;this.x=-this.width,egret.Tween.removeTweens(this),egret.Tween.get(this).wait(this.waitTime).to({x:0},300,egret.Ease.circOut).call(function(){egret.Tween.removeTweens(e)})},t.prototype.enable=function(){this.showAnimation()},t.prototype.addEvent=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.enable,this),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHanle,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchHanle,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHanle,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},t.prototype.touchHanle=function(e){switch(e.type){case egret.TouchEvent.TOUCH_TAP:console.log(this.config_.id+"->"+this.config_.title);break;case egret.TouchEvent.TOUCH_BEGIN:this.bgImg.visible=!0,this.move.play(2);break;case egret.TouchEvent.TOUCH_END:this.bgImg.visible=!1;break;case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:this.bgImg.visible=!1}},t.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},t}(eui.Component);e.PanelLeftPanelItem=t,__reflect(t.prototype,"game.PanelLeftPanelItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="MaiMiaoBuZhuView",e.skinName="MaiMiaoBuZhuViewSkin",e}return __extends(n,t),n.prototype.init=function(){this.sbtn.textFlow=[{text:" 商场 ",style:{underline:!0}}]},n.prototype.initShow=function(t){this.labelTwo0.text=t[0].diamond+"",this.type_text_0.text=t[0].appenddix[0].num+"",this.type_icon_0.source=e.GameDatas.getIntance().getSomeOneIconStrByType(t[0].appenddix[0].type),this.grpBtn.id=t[0].id,this.labelTwo1.text=t[1].diamond+"",this.type_text_1.text=t[1].appenddix[0].num+"",this.type_icon_1.source=e.GameDatas.getIntance().getSomeOneIconStrByType(t[1].appenddix[0].type),this.type_text_2.text=t[1].appenddix[1].num+"",this.type_icon_2.source=e.GameDatas.getIntance().getSomeOneIconStrByType(t[1].appenddix[1].type),this.type_text_3.text=t[1].appenddix[2].num+"",this.type_icon_3.source=e.GameDatas.getIntance().getSomeOneIconStrByType(t[1].appenddix[2].type),this.grpBtn0.id=t[1].id},n.prototype.enable=function(){t.prototype.enable.call(this),this.dText.text=""+e.GameDatas.getIntance().user_info.diamond,e.GameRequestMgr.getIntance().Shop_barleyGiftBag_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.grpBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.grpBtn0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUs();break;case this.grpBtn:e.GameRequestMgr.getIntance().Shop_buyBarleyGiftBag_C(this.grpBtn.id);break;case this.grpBtn0:e.GameRequestMgr.getIntance().Shop_buyBarleyGiftBag_C(this.grpBtn0.id);break;case this.sbtn:this.removeUs(),viewTool.TipsUtil.getIntance().showTip("暂未开启")}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.grpBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.grpBtn0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sbtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.MaiMiaoBuZhuView=t,__reflect(t.prototype,"game.MaiMiaoBuZhuView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelGiftView",n.config_=e,n.skinName="PanelGiftViewSkin",n}return __extends(n,t),n.prototype.enable=function(){t.prototype.enable.call(this);var e=this;e.showSome(),e.showEnter(baseContent.PanelMoveType.scaleType,function(){e.guangImg&&(egret.Tween.removeTweens(e.guangImg),egret.Tween.get(e.guangImg,{loop:!0}).to({rotation:360},3e3))})},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType),egret.Tween.removeTweens(this.guangImg)},n.prototype.showSome=function(){var t=this;return t.config_.showType==e.GiftShwoType.suiPianType?void(0==t.config_.data.type?(t.textShow.text="万能碎片X"+t.config_.data.num,viewTools.RESTools.setImgRes(t.iconShow,e.GameDatas.getIntance().getSomeOneIconStrByType(7,!0))):(t.textShow.text=t.config_.data.type+"号碎片X"+t.config_.data.num,viewTools.RESTools.setImgRes(t.iconShow,"panel_pingtu_img_"+t.config_.data.type+"_1_png"))):(t.textShow.text=e.GameDatas.getIntance().getSomeOneTitleStrByType(t.config_.data.type)+"X"+t.config_.data.num,void viewTools.RESTools.setImgRes(t.iconShow,e.GameDatas.getIntance().getSomeOneIconStrByType(t.config_.data.type,!0)))},n.prototype.init=function(){var e=this;egret.Tween.removeTweens(e.guangImg),egret.Tween.get(e.guangImg,{loop:!0}).to({rotaion:360},3e3)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.touchHandle=function(t){switch(t.target){case this.closeBtn:return this.destroy(),void(this.config_.nextEventStr?"nextPingtu"==this.config_.nextEventStr?e.GameRequestMgr.getIntance().Jigsaw_getJigsawInfo_C():commonUtils.EventMananger.getIntance().sendEvent(this.config_.nextEventStr,this.config_.eventData):e.GameDatas.getIntance().openGiftShow())}},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelGiftView=t,__reflect(t.prototype,"game.PanelGiftView",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelJinMeiXiaoShi",e.skinName="PanelJinMeiXiaoShiSkin",e}return __extends(n,t),n.prototype.cacheBitMapView=function(){this.grpCenter.cacheAsBitmap=!0},n.prototype.init=function(){},n.prototype.initShow=function(e){this.textShow.text=e.time_solt[0]+"\n"+e.time_solt[1]},n.prototype.enable=function(){t.prototype.enable.call(this),e.GameRequestMgr.getIntance().Activity_getEnergyConfig_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.senBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUs();break;case this.senBtn:e.GameRequestMgr.getIntance().Activity_getEnergy_C()}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.senBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelJinMeiXiaoShi=t,__reflect(t.prototype,"game.PanelJinMeiXiaoShi",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){void 0===e&&(e=null);var n=t.call(this)||this;return n.className_key="PanelTeHuiLIBao",n.nextPanelName=e,n.skinName="PanelTeHuiLIBaoSkin",n}return __extends(n,t),n.prototype.init=function(){},n.prototype.initShow=function(e){this.textInfoOne.text=e.recharge+"元即可获得价值",this.textInfoTwo.text=e.value_of_recharge+"元",this.listGrp.removeChildren(),this.senBtn.label="¥"+e.recharge;for(var t=0,n=e.appenddix.length;n>t;t++){var a=new eui.Group;a.width=125,a.height=150;var i=new eui.Image;i.source=this.getSourceByType(e.appenddix[t].type).str,i.horizontalCenter=i.verticalCenter=0,a.addChild(i);var o=new eui.Label;o.text=this.getSourceByType(e.appenddix[t].type).name+"X"+commonUtils.StringTool.showSomeTextByNumber(parseInt(e.appenddix[t].num)),o.size=24,o.horizontalCenter=0,o.bottom=-10,o.fontFamily="Microsoft YaHei",a.addChild(o),this.listGrp.addChild(a)}},n.prototype.getSourceByType=function(e){switch(e){case 1:case"1":return{str:"panelOtherActive_tehuilibao_engry30_png",name:"能量"};case 2:case"2":return{str:"panelOtherActive_tehuilibao_glod10_png",name:"麦苗"};case 4:case"4":return{str:"panelOtherActive_tehuilibao_dam_png",name:"钻石"}}},n.prototype.enable=function(){t.prototype.enable.call(this),e.GameRequestMgr.getIntance().Activity_specialGiftBag_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.senBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(e){switch(e.target){case this.senBtn:viewTool.TipsUtil.getIntance().showTip("暂未开启");break;case this.closeBtn:this.destroy(),this.nextPanelName&&(baseContent.PanelManager.getIntance().openTypeIntance(this.nextPanelName),this.nextPanelName=null)}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.senBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){this.removeUs(),t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelTeHuiLIBao=t,__reflect(t.prototype,"game.PanelTeHuiLIBao",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelPaiHangBangView",e.skinName="PanelPaiHangBangViewSkin",e}return __extends(n,t),n.prototype.cacheBitMapView=function(){t.prototype.cacheBitMapView.call(this)},n.prototype.init=function(){this.worldBtn.selected=!0,this.friendsBtn.selected=!1,this.worldScr.visible=!0,this.worldList.itemRenderer=this.friendList.itemRenderer=e.PanelPaiHangBangViewItem,this.worldList.itemRendererSkinName=this.friendList.itemRendererSkinName="PanelPaiHangBangViewItemSkin",this.friendScr.visible=!1},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(a){return(t=e.GameDatas.getIntance().rankList)?(n=this,new Promise(function(e){if(n.dataArrF||(n.dataArrF=new eui.ArrayCollection,n.dataArrW=new eui.ArrayCollection),t.friends){n.dataArrF.removeAll();for(var a=0,i=t.friends.length;i>a;a++){var o=t.friends[a];n.dataArrF.addItem({info:o,index:a+1})}n.friendList.dataProvider=n.dataArrF}if(t.world){n.dataArrW.removeAll();for(var a=0,i=t.world.length;i>a;a++){var o=t.world[a];n.dataArrW.addItem({info:o,index:a+1})}n.worldList.dataProvider=n.dataArrW}}),[2]):[2]})})},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.downType,this.initShow)},n.prototype.addEvent=function(){this.closeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.worldBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.friendsBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(e){switch(e.target){case this.closeImg:this.removeUs();break;case this.worldBtn:this.worldBtn.selected=!0,this.friendsBtn.selected=!1,this.worldScr.visible=!0,this.friendScr.visible=!1;break;case this.friendsBtn:this.worldBtn.selected=!1,this.friendsBtn.selected=!0,this.worldScr.visible=!1,this.friendScr.visible=!0}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.downType)},n.prototype.removeEvent=function(){this.closeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.worldBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.friendsBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelPaiHangBangView=t,__reflect(t.prototype,"game.PanelPaiHangBangView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.width=575,e.height=120,e.skinName="PanelPaiHangBangViewItemSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.headImg.mask=this.headImgMask,this.addEvent()},n.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.num_!=this.data.index&&this.init()},n.prototype.init=function(){this.info_=this.data.info,this.num_=this.data.index,this.initShow(this.info_,this.num_)},n.prototype.initShow=function(e,t){var n=this;e&&n.num!=t&&(n.userName.text=commonUtils.StringTool.formatStrLen(e.user_name),n.num=t,e.avatar&&e.avatar.length>0?commonUtils.ImageTools.loadImage(e.avatar,function(e){n.headImg.source=e},n):viewTools.RESTools.setImgRes(n.headImg,"game_main_view_tex_json.game_main_view_default_headimg_jpg"),n.startNum.text=e.star_num+"",4>t?(n.iconShow.visible=!0,n.idShow.visible=!1,n.headBo.source="panel_left_paiHang_tex_json.antGame_panel_icon_headSculptureNO"+t+"_png",n.iconShow.source="panel_left_paiHang_tex_json.antGame_paihangPanelView_icon_medal"+t+"_png"):(n.iconShow.visible=!1,n.headBo.visible=!1,n.idShow.visible=!0,n.idShow.text=t+""))},n.prototype.enable=function(){},n.prototype.addEvent=function(){var t=this;this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){if(e.GameDatas.getIntance().user_info.id==t.info_.uid)return void ant_grp.AntGrpDatas.getIntance().tipsUtil.showTip("这是你自己哦！");var n=new egret.Point;n=t.headImg.parent.localToGlobal(t.headImg.x+t.headImg.width,t.headImg.y+t.headImg.height/2,n);var a=["true","null","null","true"],i=new ant_grp.AntGrpMemberInfoView({indexPoint:n,admin:a});i.config=new ant_grp.MemberInfo,i.config.uid=t.info_.uid,baseContent.PanelManager.getIntance().openPanelInstance(i)},this)},n.prototype.removeEvent=function(){},n.prototype.destroy=function(){},n}(eui.ItemRenderer);e.PanelPaiHangBangViewItem=t,__reflect(t.prototype,"game.PanelPaiHangBangViewItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelPingTuBoxInfoView",e.skinName="PanelPingTuBoxInfoSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.enable=function(){t.prototype.enable.call(this),this.rectImg.visible=!1,t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.init=function(){this.grpCenter.touchEnabled=!0,this.grpCenter.touchChildren=!1;e.GameDatas.getIntance().JigsawInfo},n.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.touchHandle=function(e){switch(e.target){case this.grpCenter:return}this.destroy()},n.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelPingTuBoxInfoView=t,__reflect(t.prototype,"game.PanelPingTuBoxInfoView",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelPingTuGiveSiftView",n.siftInfo=e,n.skinName="PanelPingTuGiveSiftViewSkin",n}return __extends(n,t),n.prototype.init=function(){},n.prototype.changeShowType=function(e){this.siftInfo=e,this.initShow()},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=this,new Promise(function(n){var a=e.GameDatas.getIntance().friendList;if(a){if(t.msgListGrp.cacheAsBitmap=!1,t.msgListGrp.numChildren!=a.length){t.msgListGrp.removeChildren(),t.msgListArr=[];for(var i=0,o=a.length;o>i;i++){var s=new e.PanelPingTuHaoYouViewItem(a[i],t.siftInfo);t.msgListGrp.addChild(s),t.msgListArr.push(s)}}else for(var i=0,o=a.length;o>i;i++){var s=t.msgListGrp.getChildAt(i);s.initShow(a[i],t.siftInfo)}t.msgListGrp.cacheAsBitmap=!0}a&&a.length>0?(t.listMsgScr.visible=!0,t.nullGrp.visible=!1):(t.listMsgScr.visible=!1,t.nullGrp.visible=!0)}),[2]})})},n.prototype.enable=function(){t.prototype.enable.call(this),this.fNameStr.text="",e.GameRequestMgr.getIntance().User_lookFriends_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.downType)},n.prototype.addEvent=function(){this.fNameStr.addEventListener(egret.Event.CHANGE,this.changeFName,this),this.closeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),commonUtils.EventMananger.getIntance().addEvent("friends_have",this.initShow,this),commonUtils.EventMananger.getIntance().addEvent("Jigsaw_givePiece_S_200",this.removeSelf,this)},n.prototype.changeFName=function(){console.log(this.fNameStr.text);var e=this,t=this.fNameStr.text.trim();if(t.length>0){e.msgListGrp.removeChildren();for(var n=0,a=e.msgListArr.length;a>n;n++){var i=e.msgListArr[n].getMsgInfo();i&&i.user_name.indexOf(t)>-1&&e.msgListGrp.addChild(e.msgListArr[n])}}else e.initShow()},n.prototype.touchHanle=function(e){var t=this;switch(e.target){case t.closeImg:t.removeUs()}},n.prototype.removeSelf=function(){this.removeUs()},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.downType)},n.prototype.removeEvent=function(){this.fNameStr.removeEventListener(egret.Event.CHANGE,this.changeFName,this),this.closeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),commonUtils.EventMananger.getIntance().removeEvent("friends_have",this.initShow,this),commonUtils.EventMananger.getIntance().removeEvent("Jigsaw_givePiece_S_200",this.removeSelf,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelPingTuGiveSiftView=t,__reflect(t.prototype,"game.PanelPingTuGiveSiftView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e,n){var a=t.call(this)||this;return a.changeType=n.type,a.suiPianNum=n.suiPianType,a.msgInfo=e,a.siftInfo=n,a.skinName="PanelPingTuHaoYouViewItemSkin",a}return __extends(n,t),n.prototype.getMsgInfo=function(){return this.msgInfo},n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.initShow(this.msgInfo,this.siftInfo),this.addEvent()},n.prototype.initShow=function(e,t){this.msgInfo=e,this.siftInfo=t,"gift_type"==this.siftInfo.type?(this.changeBtn.visible=!1,this.siftBtn.visible=!0):(this.changeBtn.visible=!0,this.siftBtn.visible=!1),e&&(this.head.setHead(e.avatar),this.userName.text=e.user_name+"",this.starNum.text=""+e.star_num,"1"==e.sex?this.sexImg.source="panel_common_context_json.panel_common_touxiang_name_sex_png":this.sexImg.source="panel_common_context_json.panel_common_touxiang_name_sex1_png")},n.prototype.enable=function(){},n.prototype.addEvent=function(){this.changeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.siftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(e.GameDatas.getIntance().swapChangInfo={me_name:e.GameDatas.getIntance().user_info.user_name,me_avatar:e.GameDatas.getIntance().user_info.avatar,me_propImg:"panel_pingtu_img_"+this.siftInfo.suiPianType+"_1_png",me_propType:this.siftInfo.suiPianType,friend_id:this.msgInfo.fid,friend_name:this.msgInfo.user_name,friend_avatar:this.msgInfo.avatar,swapChangFrom:2},t.target){case this.changeBtn:e.GameRequestMgr.getIntance().Chat_getSwappableList_C();break;case this.siftBtn:var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelPingTuSift");n&&n.initShow(e.GameDatas.getIntance().swapChangInfo,this.siftInfo.suiPianType);var a={userInfo:e.GameDatas.getIntance().swapChangInfo,suiPianNum:this.siftInfo.suiPianType};baseContent.PanelManager.getIntance().openTypeIntance(e.PanelPingTuSift,a)}},n.prototype.removeEvent=function(){this.changeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.siftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){},n}(eui.Component);e.PanelPingTuHaoYouViewItem=t,__reflect(t.prototype,"game.PanelPingTuHaoYouViewItem")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.className_key="PanelPingTuInfoView",t.skinName="PanelPingTuInfoViewSkin",t}return __extends(t,e),t.prototype.enable=function(){e.prototype.enable.call(this),e.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},t.prototype.removeUs=function(){e.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},t.prototype.init=function(){},t.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},t.prototype.touchHandle=function(e){switch(e.target){case this.closeBtn:this.removeUs(),this.destroy()}},t.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},t.prototype.destroy=function(){this.closeBtn.destroy()},t}(baseContent.BasePanel);e.PanelPingTuInfoView=t,__reflect(t.prototype,"game.PanelPingTuInfoView",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.localInfoX=360,n.className_key="PanelPingTuItemInfo",n.typeConfig=e,n.touchEnabled=!0,n.skinName="PanelPingTuItemInfoSkin",n}return __extends(n,t),n.prototype.enable=function(){t.prototype.enable.call(this),this.typeConfig&&(0!=this.typeConfig.type&&this.typeConfig.num>0?this.changeBtn.enabled=this.siftBtn.enabled=!0:this.changeBtn.enabled=this.siftBtn.enabled=!1),this.rectImg.visible=!1,t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.init=function(){this.grpCenter.x=this.localInfoX,this.shiyongBtn.enabled=this.typeConfig.canBeUse},n.prototype.setLocalGrp=function(e){this.localInfoX=e,this.grpCenter&&(this.grpCenter.x=e)},n.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.touchHandle=function(t){switch(t.target){case this.shiyongBtn:return 0==this.typeConfig.type?(console.log("显示装万能碎片"),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ShowConstrolPingTu,!0)):e.GameRequestMgr.getIntance().Jigsaw_loadPiece_C(this.typeConfig.type,0),void this.destroy();
case this.changeBtn:e.GameDatas.getIntance().siftInfo={type:"change_type",suiPianType:this.typeConfig.type};var n=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelPingTuGiveSiftView");return n&&n.changeShowType(e.GameDatas.getIntance().siftInfo),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelPingTuGiveSiftView,e.GameDatas.getIntance().siftInfo),void this.destroy();case this.siftBtn:e.GameDatas.getIntance().siftInfo={type:"gift_type",suiPianType:this.typeConfig.type};var a=baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelPingTuGiveSiftView");return a&&a.changeShowType(e.GameDatas.getIntance().siftInfo),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelPingTuGiveSiftView,e.GameDatas.getIntance().siftInfo),void this.destroy();case this.grpCenter:return}this.destroy()},n.prototype.removeEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelPingTuItemInfo=t,__reflect(t.prototype,"game.PanelPingTuItemInfo",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelPingTuMsgView",e.skinName="PanelPingTuMsgViewSkin",e}return __extends(n,t),n.prototype.init=function(){this.initShow()},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return t=this,new Promise(function(n){var a=e.GameDatas.getIntance().siftMsgInfoList;if(a&&a.length>0){if(t.listMsgScr.visible=!0,t.nullGrp.visible=!1,t.msgListGrp.cacheAsBitmap=!1,t.msgListGrp.numChildren!=a.length){t.msgListGrp.removeChildren();for(var i=0,o=a.length;o>i;i++){var s=new e.PanelPingTuMsgViewItem(a[i]);t.msgListGrp.addChild(s)}}else for(var i=0,o=a.length;o>i;i++){var s=t.msgListGrp.getChildAt(i);s.initShow(a[i])}t.msgListGrp.cacheAsBitmap=!0}else t.listMsgScr.visible=!1,t.nullGrp.visible=!0}),[2]})})},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.downType)},n.prototype.addEvent=function(){this.closeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(e){var t=this;switch(e.target){case t.closeImg:t.removeUs()}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.downType)},n.prototype.removeEvent=function(){this.closeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelPingTuMsgView=t,__reflect(t.prototype,"game.PanelPingTuMsgView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(e){function t(t){var n=e.call(this)||this;return n.siftMsgInfo=t,n.skinName="PanelPingTuMsgViewItemSkin",n}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.initShow(this.siftMsgInfo),this.addEvent()},t.prototype.initShow=function(e){this.suiPianTypeImg.source="panel_pingtu_img_"+e.piece_id+"_1_png",this.timeLab.text=commonUtils.DateTool.forObliqueDate(e.time);var t=[];t=[{text:e.user_name,style:{bold:!0,textColor:"0xCA5500"}},{text:"赠送了你",style:{bold:!0,textColor:"0x75472B"}},{text:e.piece_id,style:{bold:!0,textColor:"0xCA5500"}},{text:"号碎片",style:{bold:!0,textColor:"0x75472B"}}],this.msgText.textFlow=t},t.prototype.addEvent=function(){},t.prototype.touchHanle=function(e){e.target},t.prototype.removeEvent=function(){},t.prototype.destroy=function(){},t}(eui.Component);e.PanelPingTuMsgViewItem=t,__reflect(t.prototype,"game.PanelPingTuMsgViewItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelPingTuSift",n.userInfo=e.userInfo,n.suiPianNum=e.suiPianNum,n.skinName="PanelPingTuSiftSkin",n}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.initShow(this.userInfo,this.suiPianNum)},n.prototype.initShow=function(e,t){this.userInfo=e,this.suiPianNum=t;var n=[];n=[{text:"确定要",style:{bold:!0,textColor:"0x75472B"}},{text:"赠送碎片",style:{bold:!0,textColor:"0xCA5500"}},{text:"吗 ?",style:{bold:!0,textColor:"0x75472B"}}],this.sure_text.textFlow=n},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUsFromParent();break;case this.sureBtn:e.GameRequestMgr.getIntance().Jigsaw_givePiece_C(this.userInfo.friend_id,this.suiPianNum),this.removeUsFromParent()}},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),egret.Tween.removeTweens(this.closeBtn)},n}(baseContent.BasePanel);e.PanelPingTuSift=t,__reflect(t.prototype,"game.PanelPingTuSift",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.timeIndex=0,e.className_key="PanelPingTuView",e.skinName="PanelPingTuViewSkin",e}return __extends(n,t),n.prototype.enable=function(){t.prototype.enable.call(this),this.canNotGitGrp.visible=!1,t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType,this.initShow)},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.init=function(){this.clickRedG.touchChildren=!1,this.iconShowList.itemRenderer=e.PanelPingTuViewItem,this.iconShowList.itemRendererSkinName="PanelPingTuViewItemSkin",this.pieceList.itemRenderer=e.PanelPingTuViewTwoItem,this.pieceList.itemRendererSkinName="PanelPingTuViewTwoItemSkin",this.leftBtn.source="panel_pingtu_icon_next_hui_png",this.clickRedG.newsIconLocal={x:40,y:0},e.GameDatas.getIntance().redSpotInfo&&e.GameDatas.getIntance().redSpotInfo.huoBtn&&e.GameDatas.getIntance().redSpotInfo.huoBtn.jigsawBtn&&this.showMsgRedPoint(1==e.GameDatas.getIntance().redSpotInfo.huoBtn.ptxiaoxiBtn)},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(a){return t=e.GameDatas.getIntance().JigsawInfo,t&&(n=this,new Promise(function(e){n.dataInfoListArr||(n.dataInfoListArr=new eui.ArrayCollection),n.pieceList.dataProvider=n.dataInfoListArr,n.showPiceList(),n.showPanelPiceList(),n.iconShowList.dataProvider=n.iconDataListArr,n.showTime(),n.complet_num.text=""+t.complete_times,n.total_num.text="/"+t.total_times,t.complete_times==t.total_times&&(n.canNotGitGrp.visible=!0)})),[2]})})},n.prototype.showTime=function(){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(a){return t=this,n=e.GameDatas.getIntance().JigsawInfo,t.timeIndex=n.end_time,egret.Tween.removeTweens(t.showTimeText),egret.Tween.get(t.showTimeText,{loop:!0}).call(function(){t.showTimeText.text=commonUtils.NumberTool.getShowTimeThree(t.timeIndex),t.timeIndex--,t.timeIndex<0&&egret.Tween.removeTweens(t.showTimeText)},t).wait(1e3),[2]})})},n.prototype.showPiceList=function(){var t=this,n=e.GameDatas.getIntance().JigsawInfo;t.dataInfoListArr.removeAll();for(var a=0,i=n.piece.length;i>a;a++)t.dataInfoListArr.addItem(n.piece[a]);t.dataInfoListArr.refresh()},n.prototype.showPanelPiceList=function(){var t=e.GameDatas.getIntance().JigsawInfo,n=this;n.iconDataListArr||(n.iconDataListArr=new eui.ArrayCollection),n.iconDataListArr.removeAll();for(var a=1;10>a;a++){for(var i={type:a,is_omnipotent:0,idNum:a},o=0,s=t.piece_in_use.length;s>o;o++)if(t.piece_in_use[o].type==a){0==t.piece_in_use[o].is_omnipotent?i.is_omnipotent=1:i.is_omnipotent=2;break}n.iconDataListArr.addItem(i)}n.iconDataListArr.refresh()},n.prototype.showMsgRedPoint=function(e){this.clickRedG.newsIconVisible=e},n.prototype.showSiftMsgList=function(){e.GameRequestMgr.getIntance().Jigsaw_getJigsawMessage_C()},n.prototype.showSomeOneSuiPianCom=function(e,t,n){console.log("修改碎片-->"+t);var a=this;if(!e)return void a.changeSomeOneSuiPian(t.type,t.is_omnipotent,!1);var i=new egret.Point,o=a.iconShowList.getChildAt(t.type-1);o.parent.localToGlobal(o.x,o.y,i),n.p1=i,console.log(n);var s=a.getSomeOneSuiPian(t.type);s.x=n.p0.x,s.y=n.p0.y,a.addChild(s),s.scaleX=s.scaleY=.2,egret.Tween.get(s).to({scaleX:-.3},150).to({scaleX:.3},150).to({scaleX:-.9},150).to({scaleX:.9},150),egret.Tween.get(s).to({scaleX:.9,scaleY:.9,x:n.p1.x+90,y:n.p1.y+90},600).to({scaleX:1.3,scaleY:1.3},250).to({scaleX:1,scaleY:1},150).call(function(){egret.Tween.removeTweens(s),a.removeChild(s),s=null,a.changeSomeOneSuiPian(t.type,t.is_omnipotent,!0)},a)},n.prototype.getSomeOneSuiPian=function(e){var t=new eui.Group,n=new eui.Image;switch(n.source="panel_pingtu_img_"+e+"_1_png",e){case 1:n.top=n.left=0;break;case 2:n.top=n.horizontalCenter=0;break;case 3:n.top=n.right=0;break;case 4:n.left=n.verticalCenter=0;break;case 5:n.verticalCenter=n.horizontalCenter=0;break;case 6:n.verticalCenter=n.right=0;break;case 7:n.left=n.bottom=0;break;case 8:n.horizontalCenter=n.bottom=0;break;case 9:n.right=n.bottom=0}return t.width=t.height=180,t.anchorOffsetX=t.anchorOffsetY=90,t.addChild(n),t},n.prototype.changeSomeOneSuiPian=function(e,t,n){var a=this;a.changePiceListSuiPian(e,t,n),a.changePiceUse(e,t,n);for(var i=0,o=a.iconDataListArr.length;o>i;i++){var s=a.iconDataListArr.getItemAt(i);if(s.type==e){n?0==t?s.is_omnipotent=1:1==t&&(s.is_omnipotent=2):s.is_omnipotent=0,a.iconDataListArr.replaceItemAt(s,i);break}}a.iconDataListArr.refresh()},n.prototype.changePiceListSuiPian=function(e,t,n){var a=this;if(1==t){var i=a.dataInfoListArr.getItemAt(0);return n?i.num=i.num-1:i.num=i.num+1,void a.dataInfoListArr.replaceItemAt(i,0)}for(var o=0,s=a.dataInfoListArr.length;s>o;o++){var i=a.dataInfoListArr.getItemAt(o);if(i.type==e){n?i.num=i.num-1:i.num=i.num+1,a.dataInfoListArr.replaceItemAt(i,o);break}}},n.prototype.changePiceUse=function(t,n,a){var i=e.GameDatas.getIntance().JigsawInfo;if(a)return i.piece_in_use.push({type:t,is_omnipotent:n}),e.GameDatas.getIntance().JigsawInfo=i,void this.checkIsComplet();for(var o=0,s=i.piece_in_use.length;s>o;o++)if(i.piece_in_use[o].type==t)return i.piece_in_use.splice(o,1),void(e.GameDatas.getIntance().JigsawInfo=i)},n.prototype.checkIsComplet=function(){var t=e.GameDatas.getIntance().JigsawInfo,n=t.piece_in_use.length;return 9==n?(console.log("全部装好了碎片"),e.GameRequestMgr.getIntance().Jigsaw_completeJigsaw_C(),!0):!1},n.prototype.addEvent=function(){commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.ShowSomeSuiPianCom,this.showSomeOneSuiPianCom,this),commonUtils.EventMananger.getIntance().addEvent("siftView_close",this.siftViewClose,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.infoBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.boxBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.leftBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.rightBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.listScrPiece.addEventListener(eui.UIEvent.CHANGE_END,this.changEndPriceScr,this),this.clickRedG.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showSiftMsgList,this)},n.prototype.touchHandle=function(t){switch(t.target){case this.closeBtn:this.removeUs();break;case this.infoBtn:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelPingTuInfoView);break;case this.boxBtn:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelPingTuBoxInfoView);break;case this.leftBtn:this.listScrPiece.viewport.scrollH>30&&(this.listScrPiece.viewport.scrollH-=125,this.listScrPiece.viewport.scrollH<0&&(this.listScrPiece.viewport.scrollH=0),this.changEndPriceScr());break;case this.rightBtn:this.listScrPiece.viewport.scrollH<720&&(this.listScrPiece.viewport.scrollH+=125,this.listScrPiece.viewport.scrollH>720&&(this.listScrPiece.viewport.scrollH=750),this.changEndPriceScr())}},n.prototype.siftViewClose=function(){this.removeUs()},n.prototype.changEndPriceScr=function(){this.listScrPiece.viewport.scrollH>=720?(this.listScrPiece.viewport.scrollH=750,this.rightBtn.source="panel_pingtu_icon_next_hui_png",this.rightBtn.scaleX=-1):(this.rightBtn.scaleX=1,this.rightBtn.source="panel_pingtu_icon_next_png"),this.listScrPiece.viewport.scrollH<=0?(this.listScrPiece.viewport.scrollH=0,this.leftBtn.source="panel_pingtu_icon_next_hui_png"):this.leftBtn.source="panel_pingtu_icon_up_png"},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.infoBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.boxBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.leftBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.rightBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this),this.listScrPiece.removeEventListener(eui.UIEvent.CHANGE_END,this.changEndPriceScr,this),commonUtils.EventMananger.getIntance().removeEvent(e.GameEvent.ShowSomeSuiPianCom,this.showSomeOneSuiPianCom,this),commonUtils.EventMananger.getIntance().removeEvent("siftView_close",this.removeUs,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),egret.Tween.removeTweens(this.showTimeText),this.closeBtn.destroy()},n}(baseContent.BasePanel);e.PanelPingTuView=t,__reflect(t.prototype,"game.PanelPingTuView",["baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.width=e.height=181,e.skinName="PanelPingTuViewItemSkin",e.touchEnabled=!0,e.touchChildren=!1,e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},n.prototype.dataChanged=function(){this.showdata_=this.data,this.initShow(this.data)},n.prototype.initShow=function(e){if(e)switch(this.idNum.text=e.idNum+"",this.icon_hid.source="panel_pingtu_img_"+e.type+"_0_png",this.icon_show.source="panel_pingtu_img_"+e.type+"_1_png",0==e.is_omnipotent?(this.icon_hid.visible=!0,this.icon_show.visible=this.isWanNeng.visible=!1):1==e.is_omnipotent?(this.icon_hid.visible=this.isWanNeng.visible=!1,this.icon_show.visible=!0):(this.icon_hid.visible=!1,this.icon_show.visible=this.isWanNeng.visible=!0),this.icon_guang.visible=!1,e.type){case 1:this.icon_guang.source="panel_pingtu_showimg_1_png",this.icon_hid.top=this.icon_hid.left=this.icon_show.top=this.icon_show.left=this.icon_guang.top=this.icon_guang.left=0;break;case 2:this.icon_guang.source="panel_pingtu_showimg_2_png",this.icon_hid.top=this.icon_hid.horizontalCenter=this.icon_show.top=this.icon_show.horizontalCenter=this.icon_guang.top=this.icon_guang.horizontalCenter=0;break;case 3:this.icon_guang.source="panel_pingtu_showimg_1_png",this.icon_guang.scaleX=-1,this.icon_hid.top=this.icon_hid.right=this.icon_show.top=this.icon_show.right=this.icon_guang.top=this.icon_guang.right=0;break;case 4:this.icon_guang.source="panel_pingtu_showimg_3_png",this.icon_hid.left=this.icon_hid.verticalCenter=this.icon_show.left=this.icon_show.verticalCenter=this.icon_guang.left=this.icon_guang.verticalCenter=0;break;case 5:this.icon_guang.source="panel_pingtu_showimg_4_png",this.icon_hid.verticalCenter=this.icon_hid.horizontalCenter=this.icon_show.verticalCenter=this.icon_show.horizontalCenter=this.icon_guang.verticalCenter=this.icon_guang.horizontalCenter=0;break;case 6:this.icon_guang.source="panel_pingtu_showimg_3_png",this.icon_guang.scaleX=-1,this.icon_hid.verticalCenter=this.icon_hid.right=this.icon_show.verticalCenter=this.icon_show.right=this.icon_guang.verticalCenter=this.icon_guang.right=0;break;case 7:this.icon_guang.source="panel_pingtu_showimg_1_png",this.icon_guang.scaleY=-1,this.icon_hid.left=this.icon_hid.bottom=this.icon_show.left=this.icon_show.bottom=this.icon_guang.left=this.icon_guang.bottom=0;break;case 8:this.icon_guang.source="panel_pingtu_showimg_2_png",this.icon_guang.scaleY=-1,this.icon_hid.horizontalCenter=this.icon_hid.bottom=this.icon_show.horizontalCenter=this.icon_show.bottom=this.icon_guang.horizontalCenter=this.icon_guang.bottom=0;break;case 9:this.icon_guang.source="panel_pingtu_showimg_1_png",this.icon_guang.scaleX=-1,this.icon_guang.scaleY=-1,this.icon_hid.right=this.icon_hid.bottom=this.icon_show.right=this.icon_show.bottom=this.icon_guang.right=this.icon_guang.bottom=0}},n.prototype.addEvent=function(){commonUtils.EventMananger.getIntance().addEvent(e.GameEvent.ShowConstrolPingTu,this.showGuangView,this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.showGuangView=function(e){console.log("亮暗效果-->"+e),0==this.showdata_.is_omnipotent&&(this.icon_guang.visible=e)},n.prototype.touchHandle=function(){console.log(this.showdata_.type),0!=this.showdata_.is_omnipotent?e.GameRequestMgr.getIntance().Jigsaw_unloadPiece_C(this.showdata_.type):this.icon_guang.visible&&(console.log("装上万能碎片"),e.GameRequestMgr.getIntance().Jigsaw_loadPiece_C(this.showdata_.type,1),commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ShowConstrolPingTu,!1))},n.prototype.showType=function(e){},n}(eui.ItemRenderer);e.PanelPingTuViewItem=t,__reflect(t.prototype,"game.PanelPingTuViewItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="PanelPingTuViewTwoItemSkin",e.touchEnabled=!0,e.touchChildren=!1,e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.dataChanged=function(){this.data&&(this.showdata_=this.data,0==this.showdata_.type?(this.wanIcon.visible=!0,this.idNum.visible=!1,0==this.showdata_.num?this.iconShow.source="panel_pingtu_view_tex_json.panel_pingtu_wannengsuipian_hui_png":this.iconShow.source="panel_common_icons_json.game_icon_suipian_1_png",this.iconShow.scaleX=this.iconShow.scaleY=1):(this.idNum.visible=!0,this.idNum.text=this.showdata_.type+"",this.wanIcon.visible=!1,this.iconShow.scaleX=this.iconShow.scaleY=.4,0==this.showdata_.num?this.iconShow.source="panel_pingtu_img_"+this.showdata_.type+"_0_png":this.iconShow.source="panel_pingtu_img_"+this.showdata_.type+"_1_png"),this.numShow.text=""+this.showdata_.num)},n.prototype.init=function(){this.addEvent()},n.prototype.addEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.touchHandle=function(){console.log(this.showdata_.type);var t=!0;if(this.showdata_.num>0){for(var n=e.GameDatas.getIntance().JigsawInfo,a=0,i=n.piece_in_use.length;i>a;a++)if(n.piece_in_use[a].type==this.showdata_.type){t=!1;break}}else t=!1;var o=e.GameDatas.getIntance().JigsawInfo;o&&o.complete_times==o.total_times&&(t=!1);var s=new e.PanelPingTuItemInfo({canBeUse:t,type:this.showdata_.type,num:this.showdata_.num}),r=new egret.Point;this.parent.localToGlobal(this.x,this.y,r),s.setLocalGrp(r.x+60),baseContent.PanelManager.getIntance().openPanelInstance(s),window.localHere={p0:new egret.Point(r.x+60,r.y+60)}},n.prototype.showType=function(e){},n}(eui.ItemRenderer);e.PanelPingTuViewTwoItem=t,__reflect(t.prototype,"game.PanelPingTuViewTwoItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelDuiHuanMaView",e.skinName="PanelDuiHuanMaViewSkin",e}return __extends(n,t),n.prototype.init=function(){},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUs();break;case this.sendBtn:var n=this.codeText.text;n&&n.length>0&&e.GameRequestMgr.getIntance().User_doConversionAward_C(n),this.removeUs()}},n.prototype.removeEvent=function(){this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){this.removeUs(),t.prototype.destroy.call(this),this.closeBtn.destroy()},n}(baseContent.BasePanel);e.PanelDuiHuanMaView=t,__reflect(t.prototype,"game.PanelDuiHuanMaView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelFanKuiView",e.skinName="PanelFanKuiViewSkin",e}return __extends(n,t),n.prototype.init=function(){},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUs();break;case this.sendBtn:var n=this.textDocText.text;n&&n.length>0&&e.GameRequestMgr.getIntance().doSubmitFeedback_C(n),this.removeUs()}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){this.removeUs(),t.prototype.destroy.call(this),this.closeBtn.destroy()},n}(baseContent.BasePanel);e.PanelFanKuiView=t,__reflect(t.prototype,"game.PanelFanKuiView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;t.isOpen=!0,t.typeString="";var n=t;return n.width=200,n.height=70,n.touchEnabled=!0,n.touchChildren=!1,n.skinName="PanelSettingTollgViewSkin",n.once(egret.Event.ADDED,function(){n.cacheAsBitmap=!0},n),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},Object.defineProperty(t.prototype,"TypeString",{get:function(){return this.typeString},set:function(e){this.typeString=e,this.iconType.source=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"IsOpen",{get:function(){return this.isOpen},set:function(e){this.isOpen=e,this.isOpen?(this.iconType.left=0,this.fontShow.horizontalCenter=20,this.fontShow.source="panel_setting_tex_json.panel_setting_font_on_pan_png",this.bgShow.source="panel_setting_tex_json.panel_setting_common_on_pan_png"):(this.iconType.left=140,this.fontShow.horizontalCenter=-20,this.fontShow.source="panel_setting_tex_json.panel_setting_font_off_pan_png",this.bgShow.source="panel_setting_tex_json.panel_setting_common_off_pan_png")},enumerable:!0,configurable:!0}),t}(eui.Component);e.PanelSettingTollgView=t,__reflect(t.prototype,"game.PanelSettingTollgView")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelSettingView",e.skinName="PanelSettingViewSkin",e}return __extends(n,t),n.prototype.init=function(){var t=this;if(t.showImg.mask=t.showImgMask,e.GameDatas.getIntance().user_info){if(e.GameDatas.getIntance().user_info){var n=e.GameDatas.getIntance().user_info;n.avatar&&n.avatar.length>0&&commonUtils.ImageTools.loadImage(n.avatar,function(e){t.showImg.source=e},t)}t.ver.text="版本号："+commonUtils.VersionUtils.getIntance().Version,t.nickName.text=e.GameDatas.getIntance().user_info.user_name+"",t.idStr.text="游戏ID："+e.GameDatas.getIntance().user_info.id,this.soundSelect.IsOpen=e.GameSoundMgr.getInstance().soundConfig.sound,this.bgSelect.IsOpen=e.GameSoundMgr.getInstance().soundConfig.music,this.systemSelect.IsOpen=e.GameSoundMgr.getInstance().soundConfig.brd}},n.prototype.setLocal=function(){e.GameSoundMgr.getInstance().soundConfig={sound:this.soundSelect.IsOpen,music:this.bgSelect.IsOpen,brd:this.systemSelect.IsOpen}},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){var e=this;e.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.fankuiBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.duihuanmaBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.soundSelect.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.bgSelect.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.systemSelect.addEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e)},n.prototype.touchHanle=function(t){var n=this;switch(t.target){case n.closeBtn:n.removeUs(),n.setLocal();break;case n.fankuiBtn:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelFanKuiView);break;case n.duihuanmaBtn:baseContent.PanelManager.getIntance().openTypeIntance(e.PanelDuiHuanMaView);break;case n.soundSelect:n.soundSelect.IsOpen?n.soundSelect.IsOpen=e.GameSoundMgr.getInstance()._soundSelect=!1:n.soundSelect.IsOpen=e.GameSoundMgr.getInstance()._soundSelect=!0;break;case n.bgSelect:n.bgSelect.IsOpen?(n.bgSelect.IsOpen=!1,e.GameSoundMgr.playBgMusic(!1),e.GameSoundMgr.getInstance().musicSelect=!1):(n.bgSelect.IsOpen=!0,e.GameSoundMgr.getInstance().musicSelect=!0,e.GameSoundMgr.playBgMusic(!0));break;case n.systemSelect:n.systemSelect.IsOpen?n.systemSelect.IsOpen=!1:n.systemSelect.IsOpen=!0}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){var e=this;e.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.fankuiBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.duihuanmaBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.soundSelect.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.bgSelect.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e),e.systemSelect.removeEventListener(egret.TouchEvent.TOUCH_TAP,e.touchHanle,e)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.closeBtn.destroy(),this.closeBtn=null,this.fankuiBtn.destroy(),this.fankuiBtn=null,this.duihuanmaBtn.destroy(),this.duihuanmaBtn=null},n}(baseContent.BasePanel);e.PanelSettingView=t,__reflect(t.prototype,"game.PanelSettingView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.width=148,e.height=200,e.skinName="PanelSignInItemViewSkin",e.once(egret.Event.ADDED,function(){e.cacheAsBitmap=!0},e),e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},n.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.init()},n.prototype.init=function(){this.day_num_index!=this.data.day_num&&(this.day_num_index=this.data.day_num,this.day_num.text=this.data.num+"",this.dayImg.source="panel_signIn_font_"+this.data.day_num+"tian_png",this.iconImg.source=e.GameDatas.getIntance().getSomeOneIconStrByType(parseInt(this.data.type_icon)),1==this.data.type?this.yesGrp.visible=!0:this.yesGrp.visible=!1,-1==this.data.type?this.bgImg.source="panel_signIn_qiandao_png":this.bgImg.source="panel_signIn_qiandao1_png")},n.prototype.enable=function(){},n.prototype.addEvent=function(){},n.prototype.removeEvent=function(){},n.prototype.destroy=function(){},n}(eui.ItemRenderer);e.PanelSignInItemView=t,__reflect(t.prototype,"game.PanelSignInItemView")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelSignInView",e.skinName="PanelSignInViewSkin",e}return __extends(n,t),n.prototype.cacheBitMapView=function(){t.prototype.cacheBitMapView.call(this)},n.prototype.init=function(){this.topList.itemRenderer=this.bottomList.itemRenderer=e.PanelSignInItemView,this.topList.itemRendererSkinName=this.bottomList.itemRendererSkinName="PanelSignInItemViewSkin",this.topList.touchEnabled=this.topList.touchChildren=this.bottomList.touchEnabled=this.bottomList.touchChildren=!1},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(n){return e.GameDatas.getIntance().sigin_infos?(t=this,new Promise(function(n){1!=e.GameDatas.getIntance().sigin_infos.is_signin_today?(t.sendBtn.enabled=!0,t.sendBtn.textImg.source="panel_common_someBtn_json.panel_signIn_font_lingqujiangli_type8_png"):(t.sendBtn.textImg.source="panel_common_someBtn_json.panel_signIn_font_yilingqu_type8_png",t.sendBtn.enabled=!1);for(var a=e.GameDatas.getIntance().sigin_infos.award,i=new eui.ArrayCollection,o=0;4>o;o++){var s={};s.day_num=o+1,s.type_icon=e.GameDatas.getIntance().sigin_infos.award[o][0].type,o<e.GameDatas.getIntance().sigin_infos.sign_num?s.type=1:o<e.GameDatas.getIntance().sigin_infos.sign_num+1?s.type=0:s.type=-1,s.num=a[o][0].num,i.addItem(s)}t.topList.dataProvider=i;for(var r=new eui.ArrayCollection,o=4,c=7;c>o;o++){var s={};s.day_num=o+1,s.type_icon=e.GameDatas.getIntance().sigin_infos.award[o][0].type,o<e.GameDatas.getIntance().sigin_infos.sign_num?s.type=1:o<e.GameDatas.getIntance().sigin_infos.sign_num+1?s.type=0:s.type=-1,s.num=a[o][0].num,r.addItem(s)}t.bottomList.dataProvider=r}),[2]):[2]})})},n.prototype.showYesSigin=function(t){e.GameDatas.getIntance().sigin_infos.sign_num!=t&&(e.GameDatas.getIntance().sigin_infos.sign_num=t,e.GameDatas.getIntance().sigin_infos.is_signin_today=1,this.initShow())},n.prototype.enable=function(){t.prototype.enable.call(this),e.GameRequestMgr.getIntance().Signin_getSignInfo_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType,this.initShow)},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUs();break;case this.sendBtn:e.GameNetUrlData.isUseNet&&e.GameRequestMgr.getIntance().Signin_signIn_C()}},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this),this.closeBtn.destroy(),this.closeBtn=null,this.sendBtn.destroy(),this.sendBtn=null},n}(baseContent.BasePanel);e.PanelSignInView=t,__reflect(t.prototype,"game.PanelSignInView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelXiaoXiFuJian",n.info=e,n.skinName="PanelXiaoXiFuJianSkin",n}return __extends(n,t),n.prototype.init=function(){},n.prototype.initShow=function(t){if(t)if(this.info=t,this.contentText.text=t.content+"","1"==t.has_appendix)this.fuJianGrp.visible=!1,this.configBtn.visible=!1;else{this.fuJianGrp.removeChildren(),this.configBtn.visible=!0;var n=!0;1==t.appenddix_status?(this.configBtn.enabled=!1,n=!0,this.configBtn.textImgSource="panel_common_someBtn_json.panel_xingjitehui_lingqu_font_type0_png"):(n=!1,this.configBtn.textImgSource="panel_common_someBtn_json.panel_xiaoxixitong_common_font1_type0_png",this.configBtn.enabled=!0);for(var a=0,i=t.appenddix.length;i>a;a++)this.fuJianGrp.addChild(new e.PanelXiaoXiFuJianItem(t.appenddix[a],n));
this.fuJianGrp.visible=!0}},n.prototype.enable=function(){t.prototype.enable.call(this),this.initShow(this.info),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.addEvent=function(){this.configBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.configBtn:e.GameRequestMgr.getIntance().News_handleMail_C(this.info.id,3),this.configBtn.enabled=!1;for(var n=0,a=this.fuJianGrp.numChildren;a>n;n++)this.fuJianGrp.getChildAt(n).isOkShow.visible=!0;this.configBtn.textImgSource="panel_common_someBtn_json.panel_xingjitehui_lingqu_font_type0_png";break;case this.closeBtn:this.removeUs()}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.configBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){this.removeUs(),t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelXiaoXiFuJian=t,__reflect(t.prototype,"game.PanelXiaoXiFuJian",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e,n){var a=t.call(this)||this;return a.info_=e,a.isOk_=n,a.skinName="PanelXiaoXiFuJianItemSkin",a}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.initShow()},n.prototype.initShow=function(){this.isOkShow.visible=this.isOk_,this.labelShow.text="X"+this.info_.num,this.iconShow.source=e.GameDatas.getIntance().getSomeOneIconStrByType(this.info_.type)},n}(eui.Component);e.PanelXiaoXiFuJianItem=t,__reflect(t.prototype,"game.PanelXiaoXiFuJianItem")}(game||(game={}));var game;!function(e){var t=function(t){function a(){var e=t.call(this)||this;return e.className_key="PanelXiaoXiTiXing",e.skinName="PanelXiaoXiTiXingSkin",e}return __extends(a,t),a.prototype.getSomeOneTypeShow=function(e,t){return 0==e?{text:t,style:{bold:!1,textColor:"0x471D05"}}:1==e?{text:t,style:{bold:!1,textColor:"0xC66A17"}}:{text:t,style:{bold:!1,textColor:"0xf3d426",strokeColor:"0x7f4d02",stroke:"2"}}},a.prototype.init=function(){},a.prototype.setShowInfo=function(e,t,a,i){void 0===t&&(t=n.attackMsg),void 0===a&&(a=null),void 0===i&&(i=null),this.msgInfos=e,this.msgType=t,this.clickSureEventType=a,this.envetInfo=i},a.prototype.enable=function(){t.prototype.enable.call(this),this.rectImg.visible=!1,this.initShow(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.msgType)},a.prototype.initShow=function(){if(this.msgInfos){for(var e=[],t=0,n=this.msgInfos.length;n>t;t++)e.push(this.getSomeOneTypeShow(this.msgInfos[t].typeColor,this.msgInfos[t].infoStr));this.name_text.textFlow=e}},a.prototype.addEvent=function(){this.yes_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},a.prototype.touchHanle=function(t){switch(t.target){case this.yes_btn:this.removeUs(),this.clickSureEventType&&commonUtils.EventMananger.getIntance().sendEvent(this.clickSureEventType,this.envetInfo),baseContent.SceneLayerMgr.getIntance().getCurrenScene().initShow(),this.msgType==n.beAttackMsg&&e.GameRequestMgr.getIntance().Pasture_getPastureInfo_C()}},a.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.msgType),egret.Tween.get(this).wait(500).call(t.prototype.destroy,this)},a.prototype.removeEvent=function(){this.yes_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},a.prototype.destroy=function(){this.removeUs(),t.prototype.destroy.call(this),this.yes_btn.destroy(),this.yes_btn=null},a}(baseContent.BasePanel);e.PanelXiaoXiTiXing=t,__reflect(t.prototype,"game.PanelXiaoXiTiXing",["baseContent.IPanel","baseContent.IObj"]);var n;!function(e){e[e.attackMsg=0]="attackMsg",e[e.beAttackMsg=1]="beAttackMsg",e[e.touquMsg=2]="touquMsg",e[e.beTouQuMsg=3]="beTouQuMsg"}(n=e.MsgType||(e.MsgType={}));var a=function(){function e(){}return e}();e.MsgInfo=a,__reflect(a.prototype,"game.MsgInfo")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelXiaoXiView",e.skinName="PanelXiaoXiViewSkin",e}return __extends(n,t),n.prototype.init=function(){this.xiaoXB.selected=!0,this.xiaoXi.visible=!0,this.youJB.selected=!1,this.youJian.visible=!1,this.listGrp.itemRenderer=e.PanelXiaoXiViewItem,this.listGrp.itemRendererSkinName="PanelXiaoXiViewItemSkin",this.listGrpYou.itemRenderer=e.PanelXiaoXiViewYouJianItem,this.listGrpYou.itemRendererSkinName="PanelXiaoXiViewYouJianItemSkin"},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(a){return t=e.GameDatas.getIntance().msgListInfo,n=this,!t||n.onShowAnimation?[2]:(new Promise(function(a){if(n.nullGrp.visible=!0,t&&t.length>0){for(var i=new eui.ArrayCollection,o=0,s=t.length;s>o;o++)i.addItem(t[o]);n.listGrp.dataProvider=i,n.xiaoXB.selected&&(n.nullGrp.visible=!1)}var r=e.GameDatas.getIntance().mailMsgList,c=!1;if(r&&r.length>0){for(var l=new eui.ArrayCollection,o=0,s=r.length;s>o;o++)l.addItem(r[o]),c||0==r[o].appenddix_status&&(c=!0);n.listGrpYou.dataProvider=l,n.youJB.selected&&(n.nullGrp.visible=!1)}n.youJB.getChildByName("news_icon").visible=c}),[2])})})},n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.downType,this.initShow)},n.prototype.addEvent=function(){this.closeImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.xiaoXB.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.youJB.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){var n=this;switch(t.target){case n.closeImg:n.removeUs();break;case n.xiaoXB:var a=e.GameDatas.getIntance().msgListInfo;a&&a.length>0?(n.xiaoXi.visible=!0,n.nullGrp.visible=!1):n.nullGrp.visible=!0,n.xiaoXB.selected=!0,n.youJB.selected=!1,n.youJian.visible=!1;break;case n.youJB:var i=e.GameDatas.getIntance().mailMsgList;i&&i.length>0?(n.youJian.visible=!0,n.nullGrp.visible=!1):n.nullGrp.visible=!0,n.xiaoXB.selected=!1,n.xiaoXi.visible=!1,n.youJB.selected=!0}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.downType)},n.prototype.removeEvent=function(){this.closeImg.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.xiaoXB.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.youJB.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){this.removeUs(),t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelXiaoXiView=t,__reflect(t.prototype,"game.PanelXiaoXiView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.width=576,t.height=105,t.skinName="PanelXiaoXiViewItemSkin",t.once(egret.Event.ADDED_TO_STAGE,function(){t.cacheAsBitmap=!0},t),t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&this.msgInfo_!=this.data&&(this.msgInfo_=this.data,this.initShow(this.msgInfo_))},t.prototype.init=function(){this.showImg.mask=this.showImgMask},t.prototype.initShow=function(e){var t=this;if(e)switch(t.msgInfo_=e,e.avatar&&e.avatar.length>0?commonUtils.ImageTools.loadImage(e.avatar,function(e){t.showImg.source=e},t):viewTools.RESTools.setImgRes(t.showImg,"game_main_view_tex_json.game_main_view_default_headimg_jpg"),t.startNum.text=e.star_num+"",t.time_text.text=commonUtils.DateTool.formatThreeDateStr(e.time)+"",t.textGrp.removeChildren(),t.btnConf.visible=!1,t.showIcon.visible=!1,t.btnCd.visible=!1,t.time_text.visible=!1,e.type){case 1:t.textGrp.addChild(t.getSomeOneTypeShow(0,commonUtils.StringTool.formatStrLen(e.user_name))),t.textGrp.addChild(t.getSomeOneTypeShow(1,"攻击了你的建筑")),t.showIcon.visible=!0,t.time_text.visible=!0,t.showIcon.source="panel_xiaoxixitong_xiaoxi_icon_show_png";break;case 2:t.textGrp.addChild(t.getSomeOneTypeShow(0,commonUtils.StringTool.formatStrLen(e.user_name))),t.textGrp.addChild(t.getSomeOneTypeShow(1,"偷走了你的")),t.textGrp.addChild(t.getSomeOneTypeShow(0,""+e.barley_num)),t.textGrp.addChild(t.getSomeOneTypeShow(1,"麦苗")),t.showIcon.visible=!0,t.time_text.visible=!0,t.showIcon.source="panel_xiaoxixitong_xiaoxi_icon_xiaotou_png";break;case 3:t.textGrp.addChild(t.getSomeOneTypeShow(0,commonUtils.StringTool.formatStrLen(e.user_name))),t.textGrp.addChild(t.getSomeOneTypeShow(1,"邀请你挑战")),t.textGrp.addChild(t.getSomeOneTypeShow(0,"大BOSS")),t.btnCd.visible=!0;break;case 4:t.textGrp.addChild(t.getSomeOneTypeShow(0,commonUtils.StringTool.formatStrLen(e.user_name))),t.textGrp.addChild(t.getSomeOneTypeShow(1,"损坏了你的建筑")),t.btnConf.visible=!0;break;case 5:t.textGrp.addChild(t.getSomeOneTypeShow(1,"你防御了")),t.textGrp.addChild(t.getSomeOneTypeShow(0,commonUtils.StringTool.formatStrLen(e.user_name))),t.textGrp.addChild(t.getSomeOneTypeShow(1,"的攻击")),t.showIcon.visible=!0,t.time_text.visible=!0,t.showIcon.source="panel_xiaoxixitong_xiaoxi_icon_fang_png"}},t.prototype.getSomeOneTypeShow=function(e,t){var n=new eui.Label;return 1==e?n.textColor=986123:0==e?n.textColor=13003287:(n.textColor=15979558,n.stroke=2,n.strokeColor=8342786),n.size=18,n.text=t+"",n},t}(eui.ItemRenderer);e.PanelXiaoXiViewItem=t,__reflect(t.prototype,"game.PanelXiaoXiViewItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.width=576,e.height=105,e.skinName="PanelXiaoXiViewYouJianItemSkin",e.once(egret.Event.ADDED,function(){e.cacheAsBitmap=!0},e),e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},n.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&this.mailInfo_!=this.data&&(this.mailInfo_=this.data,this.initShow(this.mailInfo_))},n.prototype.init=function(){},n.prototype.initShow=function(e){e&&("2"==e.has_appendix?0==e.appenddix_status?(this.iconShow.source="panel_xiaoxixitong_youjian_icon_he0_png",this.btnConf.enabled=!0,this.btnConf.textImg.source="panel_common_someBtn_json.panel_xiaoxixitong_common_font1_type0_png"):(this.iconShow.source="panel_xiaoxixitong_youjian_icon_he1_png",this.btnConf.enabled=!0,this.btnConf.textImg.source="panel_common_someBtn_json.panel_xiaoxixitong_common_font0_type0_png"):0==e.status?this.iconShow.source="panel_xiaoxixitong_youjian_icon_xin0_png":this.iconShow.source="panel_xiaoxixitong_youjian_icon_xin1_png",this.titleText.text=e.title+"",this.timeText.text=e.time+"")},n.prototype.enable=function(){},n.prototype.addEvent=function(){this.btnConf.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.btnConf:"2"==this.mailInfo_.has_appendix?baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelXiaoXiFuJian")?(baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelXiaoXiFuJian").initShow(this.mailInfo_),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelXiaoXiFuJian)):baseContent.PanelManager.getIntance().openTypeIntance(e.PanelXiaoXiFuJian,this.mailInfo_):(e.GameRequestMgr.getIntance().News_handleMail_C(this.mailInfo_.id,1),baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelXiaoXiFuJian")?(baseContent.PanelManager.getIntance().getPenelByPanelKey("PanelXiaoXiFuJian").initShow(this.mailInfo_),baseContent.PanelManager.getIntance().openTypeIntance(e.PanelXiaoXiFuJian)):baseContent.PanelManager.getIntance().openTypeIntance(e.PanelXiaoXiFuJian,this.mailInfo_),this.iconShow.source="panel_xiaoxixitong_youjian_icon_xin1_png")}},n.prototype.removeEvent=function(){this.btnConf.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n}(eui.ItemRenderer);e.PanelXiaoXiViewYouJianItem=t,__reflect(t.prototype,"game.PanelXiaoXiViewYouJianItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelXinJiTeHui",e.skinName="PanelXinJiTeHuiSkin",e}return __extends(n,t),n.prototype.cacheBitMapView=function(){this.showGrpList.cacheAsBitmap=!0},n.prototype.init=function(){this.showGrpList.itemRenderer=e.PanelXinJiTeHuiItem,this.showGrpList.itemRendererSkinName="PanelXinJiTeHuiItemSkin"},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(a){return t=this,n=e.GameDatas.getIntance().starAwardInfo,!n||t.onShowAnimation?[2]:(t.arrData||(t.arrData=new eui.ArrayCollection,t.showGrpList.dataProvider=t.arrData),t.dataStr==JSON.stringify(n)+e.GameDatas.getIntance().user_info.star_num?[2]:(t.dataStr=JSON.stringify(n)+e.GameDatas.getIntance().user_info.star_num,new Promise(function(a){t.arrData.removeAll();for(var i=0,o=n.length;o>i;i++){var s=void 0,r=1,c=!1,l=0,g=0;0==i?r=0:i==o-1&&(r=2),1==n[i].is_recive?(c=!0,g=2):e.GameDatas.getIntance().user_info.star_num>=n[i].star_num&&(g=1,c=!0),c&&(o>i+1&&(0!=n[i+1].is_recive||e.GameDatas.getIntance().user_info.star_num>=n[i+1].star_num)&&i-1>-1&&(0!=n[i-1].is_recive||e.GameDatas.getIntance().user_info.star_num>=n[i-1].star_num)?l=2:(o>i+1&&(0!=n[i+1].is_recive||e.GameDatas.getIntance().user_info.star_num>=n[i+1].star_num)||i-1>-1&&(0!=n[i-1].is_recive||e.GameDatas.getIntance().user_info.star_num>=n[i-1].star_num))&&(l=1)),s={id:n[i].id,type:r,isHaveStar:c,isConnect:l,starNum:n[i].star_num,engNum:n[i].appenddix[0].num,is_recive:g},t.arrData.addItem(s)}}),[2]))})})},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.enable=function(){t.prototype.enable.call(this),e.GameRequestMgr.getIntance().Activity_starAward_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType,this.initShow)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUs();break;case this.sendBtn:e.GameViewMgr.toForworadTaskTypeByView(1,"PanelXinJiTeHui")}},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){this.removeUs(),t.prototype.destroy.call(this),this.closeBtn.destroy()},n}(baseContent.BasePanel);e.PanelXinJiTeHui=t,__reflect(t.prototype,"game.PanelXinJiTeHui",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.width=600,e.height=116,e.skinName="PanelXinJiTeHuiItemSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.addEvent()},n.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data&&(this.config_c=this.data,this.init())},n.prototype.init=function(){switch(this.config_c.isHaveStar?this.isHaveStar.source="panel_xingjitehui_icon_star0_png":this.isHaveStar.source="panel_xingjitehui_icon_star1_png",0!=this.config_c.isConnect?0==this.config_c.type?(this.downConnect.visible=!0,this.upConnect.visible=!1):1==this.config_c.type&&2==this.config_c.isConnect?this.upConnect.visible=this.downConnect.visible=!0:(this.downConnect.visible=!1,this.upConnect.visible=!0):this.upConnect.visible=this.downConnect.visible=!1,this.config_c.type){case 0:this.iconBg0.visible=!0,this.iconBg1.visible=this.iconBg2.visible=!1;break;case 1:this.iconBg1.visible=!0,this.iconBg0.visible=this.iconBg2.visible=!1;break;case 2:this.iconBg2.visible=!0,this.iconBg1.visible=this.iconBg0.visible=!1}this.engNum.text=this.config_c.engNum+"",this.starNum.text=this.config_c.starNum+"颗",2==this.config_c.is_recive?(this.sendbtn.visible=!1,this.yesBtn.visible=!0):1==this.config_c.is_recive?(this.sendbtn.enabled=this.sendbtn.visible=!0,this.yesBtn.visible=!1):(this.sendbtn.enabled=this.yesBtn.visible=!1,this.sendbtn.visible=!0)},n.prototype.addEvent=function(){this.sendbtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.touchHandle=function(t){e.GameRequestMgr.getIntance().Activity_getStarAward_C(this.config_c.id)},n}(eui.ItemRenderer);e.PanelXinJiTeHuiItem=t,__reflect(t.prototype,"game.PanelXinJiTeHuiItem")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelXinShouMuBiao",e.skinName="PanelXinShouMuBiaoSkin",e}return __extends(n,t),n.prototype.init=function(){this.sendBtn.visible=!1,this.listInfo.itemRenderer=e.PanelXinShouMuBiaoItemOne,this.listInfo.itemRendererSkinName="PanelXinShouMuBiaoItemOneSkin"},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(a){return t=e.GameDatas.getIntance().noviceGoalInfo,!t||this.onShowAnimation?[2]:(n=this,new Promise(function(a){if(n.dataStr!=JSON.stringify(t)){n.dataStr=JSON.stringify(t),n.completeInfo.text="（进度："+t.current_stage+"/"+t.total_stage+"）",n.targetNum.text="目标"+t.current_stage+"：",n.targetInfoList.removeChildren();for(var i=0,o=t.target_award.length;o>i;i++){var s=new e.PanelXinShouMuBiaoItemTwo;s.dataInfo(t.target_award[i]),n.targetInfoList.addChild(s)}n.infoListArr||(n.infoListArr=new eui.ArrayCollection,n.listInfo.dataProvider=n.infoListArr),n.infoListArr.removeAll();for(var i=0,o=t.target.length;o>i;i++)i==o-1?n.infoListArr.addItem({dataInfo:t.target[i],isLine:!1}):n.infoListArr.addItem({dataInfo:t.target[i],isLine:!0});n.starGrp.removeChildren();for(var i=0;i<t.target_num;i++){var r=new eui.Image;i<t.target_complete_num?viewTools.RESTools.setImgRes(r,"panel_xinshoumubiao_icon_xingxing1_png"):viewTools.RESTools.setImgRes(r,"panel_xinshoumubiao_icon_xingxing1_1_png"),n.starGrp.addChild(r)}n.sendBtn.visible=t.target_complete_num==t.target_num?!0:!1,t=null}}),[2])})})},n.prototype.enable=function(){t.prototype.enable.call(this),e.GameRequestMgr.getIntance().Task_noviceGoal_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType,this.initShow)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sendBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUs(),0==e.GameDatas.getIntance().user_info.newbie_task_statu&&commonUtils.EventMananger.getIntance().sendEvent(e.GameEvent.ChangeBtnGrp);break;case this.sendBtn:e.GameRequestMgr.getIntance().Task_receiveStageReward_C()}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.sendBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){this.removeUs(),t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelXinShouMuBiao=t,__reflect(t.prototype,"game.PanelXinShouMuBiao",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="PanelXinShouMuBiaoItemOneSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.addEvent()},n.prototype.dataChanged=function(){t.prototype.dataChanged.call(this),this.data.dataInfo!=this.infoData_&&(this.infoData_=this.data.dataInfo,this.lineImg.visible=this.data.isLine,this.titleText.text=this.infoData_.comment,this.iconImg.source=e.GameDatas.getIntance().getSomeOneIconStrByType(parseInt(this.infoData_.appenddix[0].type)),this.docText.text=this.infoData_.appenddix[0].num+"",this.barPr.setInfo(this.infoData_.complete_num,this.infoData_.task_num,this.infoData_.complete_num+"/"+this.infoData_.task_num),1==this.infoData_.is_complete?0==this.infoData_.is_received?(this.configBtn1.enabled=this.configBtn1.enabled=!0,this.configBtn1.textImgSource="panel_common_someBtn_json.panel_xiaoxixitong_common_font1_type0_png",this.configBtn1.btnImgSource="panel_common_someBtn_json.panel_common_type0_0_png",this.configBtn1.btnImgDown="panel_common_someBtn_json.panel_common_type0_1_png"):(this.configBtn1.textImg.visible=!1,this.configBtn1.enabled=!1):(this.configBtn1.enabled=this.configBtn1.enabled=!0,this.configBtn1.textImgSource="panel_common_someBtn_json.panel_xinshoumubiao_font_qianwang_type5_png",this.configBtn1.btnImgSource="panel_common_someBtn_json.panel_common_type5_0_png",this.configBtn1.btnImgDown="panel_common_someBtn_json.panel_common_type5_1_png"))},n.prototype.addEvent=function(){this.configBtn1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.configBtn1:if(1==this.infoData_.is_complete&&0==this.infoData_.is_received){e.GameRequestMgr.getIntance().Task_receiveTaskReward_C(this.infoData_.task_id);break}e.GameViewMgr.toForworadTaskTypeByView(this.infoData_.task_type,"PanelXinShouMuBiao")}},n}(eui.ItemRenderer);e.PanelXinShouMuBiaoItemOne=t,__reflect(t.prototype,"game.PanelXinShouMuBiaoItemOne")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="PanelXinShouMuBiaoItemOneBarSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.init()},t.prototype.init=function(){this.addEvent()},t.prototype.setInfo=function(e,t,n){if(this.titleText.text=n,0==e)return void(this.bar.visible=!1);this.bar.visible=!0;var a=e/t,i=242*a;i=34>i?34:i,i=i>242?242:i,this.bar.width=i},t.prototype.addEvent=function(){},t}(eui.Component);e.PanelXinShouMuBiaoItemOneBar=t,__reflect(t.prototype,"game.PanelXinShouMuBiaoItemOneBar")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="PanelXinShouMuBiaoItemTwoSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){this.infodata_&&(this.iconImg.source=e.GameDatas.getIntance().getSomeOneIconStrByType(this.infodata_.type),this.titleText.text=""+this.infodata_.num)},n.prototype.dataInfo=function(e){this.infodata_!=e&&(this.infodata_=e)},n.prototype.initShow=function(e){},n.prototype.addEvent=function(){},n}(eui.Component);e.PanelXinShouMuBiaoItemTwo=t,__reflect(t.prototype,"game.PanelXinShouMuBiaoItemTwo")}(game||(game={}));var game;!function(e){var t=function(t){function n(e,n){var a=t.call(this)||this;return a.awards_=e,a.index_=n,a.width=550,a.height=110,a.skinName="PanelYaoQingJiangLiItemViewSkin",a}return __extends(n,t),n.prototype.enable=function(){t.prototype.enable.call(this),this.cacheAsBitmap=!0},n.prototype.init=function(){this.initShow(this.awards_,this.index_),this.addEvent()},n.prototype.initShow=function(e,t){e&&(this.index_=t,this.titleText.text="邀请到"+e.inviting_num+"位好友("+e.inviting_num+"/"+e.num+")",this.awardsText.text=""+e.awards,e.inviting_num>=e.num?(this.iconImg.source="panel_yaoqingjiangli_tex_json.panel_yaoqingjiangli_haoyou_icon_type1_png",1==e.statu?(this.yesBtn.visible=!0,this.btnC.visible=!1):(this.yesBtn.visible=!1,this.btnC.visible=!0,this.btnC.enabled=!0)):(this.yesBtn.visible=!1,this.btnC.visible=!0,this.iconImg.source="panel_yaoqingjiangli_tex_json.panel_yaoqingjiangli_haoyou_icon_type_png",this.btnC.enabled=!1))},n.prototype.addEvent=function(){this.btnC.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.btnC:this.yesBtn.visible=!0,this.btnC.visible=!1,e.GameRequestMgr.getIntance().User_reciveInvitingAwards_C(this.awards_.id)}},n.prototype.removeEvent=function(){this.btnC.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n}(viewTools.CustomPanelListItem);e.PanelYaoQingJiangLiItemView=t,__reflect(t.prototype,"game.PanelYaoQingJiangLiItemView")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.className_key="PanelYaoQingJiangLiView",e.skinName="PanelYaoQingJiangLiViewSkin",e}return __extends(n,t),n.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},n.prototype.init=function(){viewTools.GameSomeAnimationUitl.addCloseAnimation(this.closeBtn)},n.prototype.initShow=function(){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(a){return t=e.GameDatas.getIntance().awardsList,n=this,t&&!n.onShowAnimation&&new Promise(function(a){n.msgListGrp.cacheAsBitmap=!1;for(var i=0,o=t.length;o>i;i++){var s=void 0;i<n.msgListGrp.numChildren?(s=n.msgListGrp.getChildAt(i),s.initShow(t[i],i)):(s=new e.PanelYaoQingJiangLiItemView(t[i],i),n.msgListGrp.addChild(s))}n.msgListGrp.cacheAsBitmap=!0}),[2]})})},n.prototype.enable=function(){t.prototype.enable.call(this),this.msgListGrp.scrollV=0,e.GameRequestMgr.getIntance().User_invitingAwards_C(),t.prototype.showEnter.call(this,baseContent.PanelMoveType.downType,this.initShow)},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.yaoQingBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.touchHanle=function(t){switch(t.target){case this.closeBtn:this.removeUs();break;case this.yaoQingBtn:e.GameRequestMgr.getIntance().Share_sharedSuccess_C("yao_qing_hao_you"),e.WXTools.sharSomeMessage({title:"平日老欺负我，这回看我怎么收拾你！",imageUrl:romoteUrlHead+"/game/romote/shareimg/share_img_1.jpg",query:"user_id="+e.GameDatas.getIntance().user_info.id+"&share_type=yao_qing_hao_you",success:function(t){console.log("邀请好友  分享成功！"),e.GameRequestMgr.getIntance().Share_sharedSuccess_C("yao_qing_hao_you")}},platform)}},n.prototype.removeUs=function(){t.prototype.removeUs.call(this,baseContent.PanelMoveType.downType)},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this),this.yaoQingBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHanle,this)},n.prototype.destroy=function(){this.removeUs(),t.prototype.destroy.call(this),egret.Tween.removeTweens(this.closeBtn)},n}(baseContent.BasePanel);e.PanelYaoQingJiangLiView=t,__reflect(t.prototype,"game.PanelYaoQingJiangLiView",["baseContent.IPanel","baseContent.IObj"])}(game||(game={}));var game;!function(e){var t=function(t){function n(e){var n=t.call(this)||this;return n.className_key="PanelYouXiGongGao",n.openNoticeData_=e,n.skinName="PanelYouXiGongGaoSkin",n}return __extends(n,t),n.prototype.enable=function(){t.prototype.enable.call(this),t.prototype.showEnter.call(this,baseContent.PanelMoveType.scaleType)},n.prototype.showSome=function(){var e=this;commonUtils.ImageTools.loadImage(e.openNoticeData_.image,function(t){e.noticeImg.source=t},e),e.noticeText.text=this.openNoticeData_.explain},n.prototype.init=function(){var e=this;e.showSome()},n.prototype.addEvent=function(){this.closeBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.touchHandle=function(t){switch(t.target){case this.closeBtn:this.destroy(),e.GameDatas.getIntance().getNoticeDatasLength()>0&&e.GameDatas.getIntance().noticeOpen()}},n.prototype.removeEvent=function(){this.closeBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandle,this)},n.prototype.destroy=function(){t.prototype.destroy.call(this)},n}(baseContent.BasePanel);e.PanelYouXiGongGao=t,__reflect(t.prototype,"game.PanelYouXiGongGao",["baseContent.IObj"])}(game||(game={}));var viewTools;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.btnScale_=.95,t._enable=!0,t.touchEnabled=!0,t.touchChildren=!1,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.addStageCall,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.removeStageCall,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"btnScale",{get:function(){return this.btnScale_},set:function(e){this.btnScale_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"btnImg",{get:function(){return this._btnImg},set:function(e){this._btnImg=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"btnImgSource",{get:function(){return this._btnImgSourc},set:function(e){this._btnImgSourc=e,this._btnImg||(this._btnImg=new eui.Image,this._btnImg.verticalCenter=this._btnImg.horizontalCenter=0,this.addChild(this._btnImg)),this._btnImg.source=this._btnImgSourc},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"btnImgDown",{get:function(){return this._btnImgDown},set:function(e){this._btnImgDown=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textImg",{get:function(){return this._textImg},set:function(e){this._textImg=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"textImgSource",{get:function(){return this._textImgSource},set:function(e){this._textImgSource=e,this._textImg||(this._textImg=new eui.Image,this._textImg.verticalCenter=this._textImg.horizontalCenter=0,this.addChild(this._textImg)),this._textImg.source=this._textImgSource,this._textImg.visible=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enableSource",{get:function(){return this._enableSource},set:function(e){this._enableSource=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enable},set:function(e){this.touchEnabled=e,this._enable=e,e?(this.btnImg.source=this._btnImgSourc,this.addTouchEvent()):(this.removeTouchEvent(),this._btnImg&&this._enableSource&&(this._btnImg.source=this._enableSource))},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.addStageCall=function(e){e.type==egret.Event.ADDED_TO_STAGE&&(this.enabled=this._enable)},t.prototype.removeStageCall=function(){this.removeTouchEvent()},t.prototype.addTouchEvent=function(){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchHandle,this)},t.prototype.removeTouchEvent=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchHandle,this)},t.prototype.touchHandle=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:this.scaleX=this.scaleY=this.btnScale_,this._btnImg&&this._btnImgDown&&(this._btnImg.source=this._btnImgDown);break;default:this.scaleX=this.scaleY=1,this._btnImg.source=this._btnImgSourc}},t.prototype.destroy=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addStageCall,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStageCall,this),this.btnScale_=null},t}(eui.Component);e.CommonCustomBtn=t,__reflect(t.prototype,"viewTools.CommonCustomBtn")}(viewTools||(viewTools={}));var viewTools;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.btnScale_=.95,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.addStageCall,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.removeStageCall,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"btnScale",{get:function(){return this.btnScale_},set:function(e){this.btnScale_=e},enumerable:!0,configurable:!0}),t.prototype.addStageCall=function(e){e.type==egret.Event.ADDED_TO_STAGE&&(this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchHandle,this))
},t.prototype.removeStageCall=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchHandle,this)},t.prototype.touchHandle=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:commonUtils.EventMananger.getIntance().sendEvent(commonUtils.GlobalEvent.ClickButton),this.scaleX=this.scaleY=this.btnScale_;break;default:this.scaleX=this.scaleY=1}},t.prototype.destroy=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addStageCall,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStageCall,this),this.btnScale_=null},t}(eui.Button);e.CustomBtn=t,__reflect(t.prototype,"viewTools.CustomBtn")}(viewTools||(viewTools={}));var viewTools;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.btnScale_=.85,t.width=t.height=125,t.touchEnabled=!0,t.touchChildren=!1,t.skinName="CustomBtnHuXiSkin",t.once(egret.Event.ADDED,function(){t.cacheAsBitmap=!0},t),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.addStageCall,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.removeStageCall,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"iconSource",{get:function(){return this.iconSource_},set:function(e){this.iconSource_=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"btnScale",{get:function(){return this.btnScale_},set:function(e){this.btnScale_=e},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.iconSource_&&(this.iconImg.source=this.iconSource_)},t.prototype.addStageCall=function(e){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchHandle,this)},t.prototype.removeStageCall=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchHandle,this)},t.prototype.touchHandle=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:commonUtils.EventMananger.getIntance().sendEvent(commonUtils.GlobalEvent.ClickButton),this.scaleX=this.scaleY=this.btnScale_;break;default:this.scaleX=this.scaleY=1}},t.prototype.destroy=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addStageCall,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStageCall,this),this.btnScale_=null},t}(eui.Component);e.CustomBtnHuXi=t,__reflect(t.prototype,"viewTools.CustomBtnHuXi")}(viewTools||(viewTools={}));var viewTools;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.btnScale_=.85,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.addStageCall,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.removeStageCall,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"btnScale",{get:function(){return this.btnScale_},set:function(e){this.btnScale_=e},enumerable:!0,configurable:!0}),t.prototype.addStageCall=function(e){e.type==egret.Event.ADDED_TO_STAGE&&(this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchHandle,this))},t.prototype.removeStageCall=function(e){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchHandle,this)},t.prototype.touchHandle=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:commonUtils.EventMananger.getIntance().sendEvent(commonUtils.GlobalEvent.ClickButton),this.scaleX=this.scaleY=this.btnScale_;break;default:this.scaleX=this.scaleY=1}},t.prototype.destroy=function(){this.addEventListener(egret.Event.ADDED_TO_STAGE,this.addStageCall,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStageCall,this),this.btnScale_=null},t}(eui.Group);e.CustomGrp=t,__reflect(t.prototype,"viewTools.CustomGrp")}(viewTools||(viewTools={}));var viewTools;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.btnScale_=.85,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.addStageCall,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.removeStageCall,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"btnScale",{get:function(){return this.btnScale_},set:function(e){this.btnScale_=e},enumerable:!0,configurable:!0}),t.prototype.addStageCall=function(e){this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchHandle,this)},t.prototype.removeStageCall=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchHandle,this)},t.prototype.touchHandle=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:this.scaleX=this.scaleY=this.btnScale_;break;default:this.scaleX=this.scaleY=1}},t.prototype.destroy=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addStageCall,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStageCall,this),this.btnScale_=null},t}(eui.Image);e.CustomImgBtn=t,__reflect(t.prototype,"viewTools.CustomImgBtn")}(viewTools||(viewTools={}));var viewTools;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.btnScale_=.95,t._newsIconRes="game_main_view_tex_json.antGame_mainView_btn_have_news_png",t.addEventListener(egret.Event.ADDED_TO_STAGE,t.addStageCall,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.removeStageCall,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"btnScale",{get:function(){return this.btnScale_},set:function(e){this.btnScale_=e},enumerable:!0,configurable:!0}),t.prototype.addStageCall=function(e){e.type==egret.Event.ADDED_TO_STAGE&&(this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.touchHandle,this))},t.prototype.removeStageCall=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.touchHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchHandle,this)},t.prototype.touchHandle=function(e){switch(e.type){case egret.TouchEvent.TOUCH_BEGIN:commonUtils.EventMananger.getIntance().sendEvent(commonUtils.GlobalEvent.ClickButton),this.scaleX=this.scaleY=this.btnScale_;break;default:this.scaleX=this.scaleY=1}},t.prototype.destroy=function(){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addStageCall,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeStageCall,this),this.btnScale_=null},Object.defineProperty(t.prototype,"newsIconRes",{get:function(){return this._newsIconRes},set:function(e){this._newsIconRes=e,this._newsIcon&&(this._newsIcon.texture=RES.getRes(this._newsIconRes))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"newsIconLocal",{get:function(){return this._newsIcon?{x:this._newsIcon.x,y:this._newsIcon.y}:null},set:function(e){this._newsIcon&&(this._newsIcon.x=e.x,this._newsIcon.y=e.y)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"newsIconVisible",{get:function(){return this._newsIcon?this._newsIcon.visible:null},set:function(e){this._newsIcon&&(this._newsIcon.visible=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"iconSource",{get:function(){return this._iconSource},set:function(e){this._iconSource=e},enumerable:!0,configurable:!0}),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this._newsIcon||(this._newsIcon=new egret.Bitmap(RES.getRes(this._newsIconRes)),this.addChild(this._newsIcon),this._newsIcon.visible=!1)},t}(eui.Button);e.CustomNewsBtn=t,__reflect(t.prototype,"viewTools.CustomNewsBtn")}(viewTools||(viewTools={}));var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,a){function i(e){t.call(a,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(a))}"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(a,generateEUI)},this):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var viewTools;!function(e){var t=function(){function e(){}return e.addCloseAnimation=function(e){egret.Tween.get(e,{loop:!0}).to({rotation:-7},500).to({rotation:0},400).to({rotation:7},500).to({rotation:0},400)},e.addSomePanelEnterAnimation=function(e,t,n,a,i,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===a&&(a=-1280),void 0===i&&(i=0),void 0===o&&(o=500),e.verticalCenter=a,egret.Tween.get(e).to({verticalCenter:i},o,egret.Ease.backOut).call(function(){egret.Tween.removeTweens(e),t&&t.call(n)})},e.addSomePanelOutAnimation=function(e,t,n,a,i,o){void 0===t&&(t=null),void 0===n&&(n=null),void 0===a&&(a=0),void 0===i&&(i=-1280),void 0===o&&(o=500),e.verticalCenter=a,egret.Tween.get(e).to({verticalCenter:i},o,egret.Ease.backOut).call(function(){egret.Tween.removeTweens(e),t&&t.call(n)})},e.getSomeDroBoneAnimation=function(e,t,n){var a=RES.getRes(e+"_ske_json"),i=RES.getRes(e+"_tex_json"),o=RES.getRes(e+"_tex_png"),s=dragonBones.EgretFactory.factory;s.parseDragonBonesData(a),s.parseTextureAtlasData(i,o);var r=s.buildArmatureDisplay(t,n);return r},e.showSomeConstrctionComplete=function(e){e.scaleY=.5,egret.Tween.get(e).to({scaleY:1},300,egret.Ease.bounceOut)},e}();e.GameSomeAnimationUitl=t,__reflect(t.prototype,"viewTools.GameSomeAnimationUitl")}(viewTools||(viewTools={}));var viewTools;!function(e){var t=function(){function e(){}return e.setImgRes=function(e,t){function n(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t){var n=RES.getRes(e);t(n)})]})})}var a=this;e.visible=!1;var i=function(t){e.source=t,e.visible=!0};RES.hasRes(t)?n(t).then(function(e){var n;n=e,n?i(n):RES.getResAsync(t,i,a)}):(egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME&&(t=romoteUrl+t),RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE))},e.getSomeRes=function(e,t){function n(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t){var n=RES.getRes(e);t(n)})]})})}var a=this;void 0===t&&(t=null);var i=function(e){t&&t(e)};RES.hasRes(e)?n(e).then(function(t){var n;n=t,n?i(n):RES.getResAsync(e,i,a)}):(egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME&&(e=romoteUrl+e),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE))},e.setBitmapRes=function(e,t){function n(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,new Promise(function(t){var n=RES.getRes(e);t(n)})]})})}var a=this;e.visible=!1;var i=function(t){e.texture=t,e.visible=!0};RES.hasRes(t)?n(t).then(function(e){var n;n=e,n?i(n):RES.getResAsync(t,i,a)}):(egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME&&(t=romoteUrl+t),RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_IMAGE))},e.setHeadImg=function(t,n,a){return void 0===a&&(a="game_main_view_tex_json.game_main_view_default_headimg_jpg"),n&&0!=n.length?void commonUtils.ImageTools.loadImage(n,function(e){t.source=e},this):void e.setImgRes(t,a)},e.setFQJHHeadImg=function(t,n,a){void 0===a&&(a="game_main_view_tex_json.game_main_view_default_headimg_jpg"),n&&0!=n.length?commonUtils.ImageTools.loadImage(n,function(e){t.source=e},this):e.setImgRes(t,a)},e.LoadSomeOneGrpToWx=function(e){},e.destroySomeOneGrp=function(e){console.log("销毁某个组的资源-->"+e),RES.destroyRes(e),platform.triggerGC()},e.loadTheme=function(e){return void 0===e&&(e="default"),__awaiter(this,void 0,void 0,function(){var t,n=this;return __generator(this,function(a){return t=new Promise(function(t){var a;a=egret.Capabilities.runtimeType==egret.RuntimeType.WXGAME?new eui.Theme(romoteUrl+e+".thm.json?v="+commonUtils.VersionUtils.getIntance().Version,commonUtils.StageUtils.getIntance().stage):new eui.Theme("resource/"+e+".thm.json?v="+commonUtils.VersionUtils.getIntance().Version,commonUtils.StageUtils.getIntance().stage),a.addEventListener(eui.UIEvent.COMPLETE,function(){t(!0)},n)}),[2,t]})})},e}();e.RESTools=t,__reflect(t.prototype,"viewTools.RESTools")}(viewTools||(viewTools={})),window.Main=Main;